!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.Bitcoin=e()}}(function(){var e;return function t(e,r,n){function i(a,s){if(!r[a]){if(!e[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);throw new Error("Cannot find module '"+a+"'")}var c=r[a]={exports:{}};e[a][0].call(c.exports,function(t){var r=e[a][1][t];return i(r?r:t)},c,c.exports,t,e,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){function r(e,t){return h.isUndefined(t)?""+t:!h.isNumber(t)||!isNaN(t)&&isFinite(t)?h.isFunction(t)||h.isRegExp(t)?t.toString():t:t.toString()}function n(e,t){return h.isString(e)?e.length<t?e:e.slice(0,t):e}function i(e){return n(JSON.stringify(e.actual,r),128)+" "+e.operator+" "+n(JSON.stringify(e.expected,r),128)}function o(e,t,r,n,i){throw new y.AssertionError({message:r,actual:e,expected:t,operator:n,stackStartFunction:i})}function a(e,t){e||o(e,!0,t,"==",y.ok)}function s(e,t){if(e===t)return!0;if(h.isBuffer(e)&&h.isBuffer(t)){if(e.length!=t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}return h.isDate(e)&&h.isDate(t)?e.getTime()===t.getTime():h.isRegExp(e)&&h.isRegExp(t)?e.source===t.source&&e.global===t.global&&e.multiline===t.multiline&&e.lastIndex===t.lastIndex&&e.ignoreCase===t.ignoreCase:h.isObject(e)||h.isObject(t)?c(e,t):e==t}function u(e){return"[object Arguments]"==Object.prototype.toString.call(e)}function c(e,t){if(h.isNullOrUndefined(e)||h.isNullOrUndefined(t))return!1;if(e.prototype!==t.prototype)return!1;if(u(e))return u(t)?(e=p.call(e),t=p.call(t),s(e,t)):!1;try{var r,n,i=g(e),o=g(t)}catch(a){return!1}if(i.length!=o.length)return!1;for(i.sort(),o.sort(),n=i.length-1;n>=0;n--)if(i[n]!=o[n])return!1;for(n=i.length-1;n>=0;n--)if(r=i[n],!s(e[r],t[r]))return!1;return!0}function f(e,t){return e&&t?"[object RegExp]"==Object.prototype.toString.call(t)?t.test(e):e instanceof t?!0:t.call({},e)===!0?!0:!1:!1}function l(e,t,r,n){var i;h.isString(r)&&(n=r,r=null);try{t()}catch(a){i=a}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),e&&!i&&o(i,r,"Missing expected exception"+n),!e&&f(i,r)&&o(i,r,"Got unwanted exception"+n),e&&i&&r&&!f(i,r)||!e&&i)throw i}var h=e("util/"),p=Array.prototype.slice,d=Object.prototype.hasOwnProperty,y=t.exports=a;y.AssertionError=function(e){this.name="AssertionError",this.actual=e.actual,this.expected=e.expected,this.operator=e.operator,e.message?(this.message=e.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var t=e.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,t);else{var r=new Error;if(r.stack){var n=r.stack,a=t.name,s=n.indexOf("\n"+a);if(s>=0){var u=n.indexOf("\n",s+1);n=n.substring(u+1)}this.stack=n}}},h.inherits(y.AssertionError,Error),y.fail=o,y.ok=a,y.equal=function(e,t,r){e!=t&&o(e,t,r,"==",y.equal)},y.notEqual=function(e,t,r){e==t&&o(e,t,r,"!=",y.notEqual)},y.deepEqual=function(e,t,r){s(e,t)||o(e,t,r,"deepEqual",y.deepEqual)},y.notDeepEqual=function(e,t,r){s(e,t)&&o(e,t,r,"notDeepEqual",y.notDeepEqual)},y.strictEqual=function(e,t,r){e!==t&&o(e,t,r,"===",y.strictEqual)},y.notStrictEqual=function(e,t,r){e===t&&o(e,t,r,"!==",y.notStrictEqual)},y.throws=function(){l.apply(this,[!0].concat(p.call(arguments)))},y.doesNotThrow=function(){l.apply(this,[!1].concat(p.call(arguments)))},y.ifError=function(e){if(e)throw e};var g=Object.keys||function(e){var t=[];for(var r in e)d.call(e,r)&&t.push(r);return t}},{"util/":3}],2:[function(e,t){t.exports=function(e){return e&&"object"==typeof e&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],3:[function(e,t,r){(function(t,n){function i(e,t){var n={seen:[],stylize:a};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),y(t)?n.showHidden=t:t&&r._extend(n,t),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,e,n.depth)}function o(e,t){var r=i.styles[t];return r?"["+i.colors[r][0]+"m"+e+"["+i.colors[r][1]+"m":e}function a(e){return e}function s(e){var t={};return e.forEach(function(e){t[e]=!0}),t}function u(e,t,n){if(e.customInspect&&t&&k(t.inspect)&&t.inspect!==r.inspect&&(!t.constructor||t.constructor.prototype!==t)){var i=t.inspect(n,e);return m(i)||(i=u(e,i,n)),i}var o=c(e,t);if(o)return o;var a=Object.keys(t),y=s(a);if(e.showHidden&&(a=Object.getOwnPropertyNames(t)),S(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return f(t);if(0===a.length){if(k(t)){var g=t.name?": "+t.name:"";return e.stylize("[Function"+g+"]","special")}if(w(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(_(t))return e.stylize(Date.prototype.toString.call(t),"date");if(S(t))return f(t)}var v="",B=!1,P=["{","}"];if(d(t)&&(B=!0,P=["[","]"]),k(t)){var b=t.name?": "+t.name:"";v=" [Function"+b+"]"}if(w(t)&&(v=" "+RegExp.prototype.toString.call(t)),_(t)&&(v=" "+Date.prototype.toUTCString.call(t)),S(t)&&(v=" "+f(t)),0===a.length&&(!B||0==t.length))return P[0]+v+P[1];if(0>n)return w(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var F;return F=B?l(e,t,n,y,a):a.map(function(r){return h(e,t,n,y,r,B)}),e.seen.pop(),p(F,v,P)}function c(e,t){if(b(t))return e.stylize("undefined","undefined");if(m(t)){var r="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(r,"string")}return B(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):g(t)?e.stylize("null","null"):void 0}function f(e){return"["+Error.prototype.toString.call(e)+"]"}function l(e,t,r,n,i){for(var o=[],a=0,s=t.length;s>a;++a)o.push(A(t,String(a))?h(e,t,r,n,String(a),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(h(e,t,r,n,i,!0))}),o}function h(e,t,r,n,i,o){var a,s,c;if(c=Object.getOwnPropertyDescriptor(t,i)||{value:t[i]},c.get?s=c.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):c.set&&(s=e.stylize("[Setter]","special")),A(n,i)||(a="["+i+"]"),s||(e.seen.indexOf(c.value)<0?(s=g(r)?u(e,c.value,null):u(e,c.value,r-1),s.indexOf("\n")>-1&&(s=o?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),b(a)){if(o&&i.match(/^\d+$/))return s;a=JSON.stringify(""+i),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function p(e,t,r){var n=0,i=e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+r[1]:r[0]+t+" "+e.join(", ")+" "+r[1]}function d(e){return Array.isArray(e)}function y(e){return"boolean"==typeof e}function g(e){return null===e}function v(e){return null==e}function B(e){return"number"==typeof e}function m(e){return"string"==typeof e}function P(e){return"symbol"==typeof e}function b(e){return void 0===e}function w(e){return F(e)&&"[object RegExp]"===D(e)}function F(e){return"object"==typeof e&&null!==e}function _(e){return F(e)&&"[object Date]"===D(e)}function S(e){return F(e)&&("[object Error]"===D(e)||e instanceof Error)}function k(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==typeof e||"undefined"==typeof e}function D(e){return Object.prototype.toString.call(e)}function T(e){return 10>e?"0"+e.toString(10):e.toString(10)}function C(){var e=new Date,t=[T(e.getHours()),T(e.getMinutes()),T(e.getSeconds())].join(":");return[e.getDate(),U[e.getMonth()],t].join(" ")}function A(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var x=/%[sdj%]/g;r.format=function(e){if(!m(e)){for(var t=[],r=0;r<arguments.length;r++)t.push(i(arguments[r]));return t.join(" ")}for(var r=1,n=arguments,o=n.length,a=String(e).replace(x,function(e){if("%%"===e)return"%";if(r>=o)return e;switch(e){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(t){return"[Circular]"}default:return e}}),s=n[r];o>r;s=n[++r])a+=g(s)||!F(s)?" "+s:" "+i(s);return a},r.deprecate=function(e,i){function o(){if(!a){if(t.throwDeprecation)throw new Error(i);t.traceDeprecation?console.trace(i):console.error(i),a=!0}return e.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(e,i).apply(this,arguments)};if(t.noDeprecation===!0)return e;var a=!1;return o};var O,I={};r.debuglog=function(e){if(b(O)&&(O=t.env.NODE_DEBUG||""),e=e.toUpperCase(),!I[e])if(new RegExp("\\b"+e+"\\b","i").test(O)){var n=t.pid;I[e]=function(){var t=r.format.apply(r,arguments);console.error("%s %d: %s",e,n,t)}}else I[e]=function(){};return I[e]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=y,r.isNull=g,r.isNullOrUndefined=v,r.isNumber=B,r.isString=m,r.isSymbol=P,r.isUndefined=b,r.isRegExp=w,r.isObject=F,r.isDate=_,r.isError=S,r.isFunction=k,r.isPrimitive=E,r.isBuffer=e("./support/isBuffer");var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",C(),r.format.apply(r,arguments))},r.inherits=e("inherits"),r._extend=function(e,t){if(!t||!F(t))return e;for(var r=Object.keys(t),n=r.length;n--;)e[r[n]]=t[r[n]];return e}}).call(this,e("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":2,FWaASH:15,inherits:14}],4:[function(){},{}],5:[function(e,t,r){function n(e,t,r){if(!(this instanceof n))return new n(e,t,r);var i=typeof e;if("base64"===t&&"string"===i)for(e=D(e);e.length%4!==0;)e+="=";var o;if("number"===i)o=C(e);else if("string"===i)o=n.byteLength(e,t);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");o=C(e.length)}var a;n._useTypedArrays?a=n._augment(new Uint8Array(o)):(a=this,a.length=o,a._isBuffer=!0);var s;if(n._useTypedArrays&&"number"==typeof e.byteLength)a._set(e);else if(x(e))if(n.isBuffer(e))for(s=0;o>s;s++)a[s]=e.readUInt8(s);else for(s=0;o>s;s++)a[s]=(e[s]%256+256)%256;else if("string"===i)a.write(e,0,t);else if("number"===i&&!n._useTypedArrays&&!r)for(s=0;o>s;s++)a[s]=0;return a}function i(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=t.length;q(o%2===0,"Invalid hex string"),n>o/2&&(n=o/2);for(var a=0;n>a;a++){var s=parseInt(t.substr(2*a,2),16);q(!isNaN(s),"Invalid hex string"),e[r+a]=s}return a}function o(e,t,r,n){var i=R(I(t),e,r,n);return i}function a(e,t,r,n){var i=R(U(t),e,r,n);return i}function s(e,t,r,n){return a(e,t,r,n)}function u(e,t,r,n){var i=R(N(t),e,r,n);return i}function c(e,t,r,n){var i=R(M(t),e,r,n);return i}function f(e,t,r){return K.fromByteArray(0===t&&r===e.length?e:e.slice(t,r))}function l(e,t,r){var n="",i="";r=Math.min(e.length,r);for(var o=t;r>o;o++)e[o]<=127?(n+=H(i)+String.fromCharCode(e[o]),i=""):i+="%"+e[o].toString(16);return n+H(i)}function h(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;r>i;i++)n+=String.fromCharCode(e[i]);return n}function p(e,t,r){return h(e,t,r)}function d(e,t,r){var n=e.length;(!t||0>t)&&(t=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=t;r>o;o++)i+=O(e[o]);return i}function y(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function g(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return r?(o=e[t],i>t+1&&(o|=e[t+1]<<8)):(o=e[t]<<8,i>t+1&&(o|=e[t+1])),o}}function v(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o;return r?(i>t+2&&(o=e[t+2]<<16),i>t+1&&(o|=e[t+1]<<8),o|=e[t],i>t+3&&(o+=e[t+3]<<24>>>0)):(i>t+1&&(o=e[t+1]<<16),i>t+2&&(o|=e[t+2]<<8),i>t+3&&(o|=e[t+3]),o+=e[t]<<24>>>0),o}}function B(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+1<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=g(e,t,r,!0),a=32768&o;return a?-1*(65535-o+1):o}}function m(e,t,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==t&&null!==t,"missing offset"),q(t+3<e.length,"Trying to read beyond buffer length"));var i=e.length;if(!(t>=i)){var o=v(e,t,r,!0),a=2147483648&o;return a?-1*(4294967295-o+1):o}}function P(e,t,r,n){return n||(q("boolean"==typeof r,"missing or invalid endian"),q(t+3<e.length,"Trying to read beyond buffer length")),V.read(e,t,r,23,4)}function b(e,t,r,n){return n||(q("boolean"==typeof r,"missing or invalid endian"),q(t+7<e.length,"Trying to read beyond buffer length")),V.read(e,t,r,52,8)}function w(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+1<e.length,"trying to write beyond buffer length"),L(t,65535));var o=e.length;if(!(r>=o)){for(var a=0,s=Math.min(o-r,2);s>a;a++)e[r+a]=(t&255<<8*(n?a:1-a))>>>8*(n?a:1-a);return r+2}}function F(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<e.length,"trying to write beyond buffer length"),L(t,4294967295));var o=e.length;if(!(r>=o)){for(var a=0,s=Math.min(o-r,4);s>a;a++)e[r+a]=t>>>8*(n?a:3-a)&255;return r+4}}function _(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+1<e.length,"Trying to write beyond buffer length"),j(t,32767,-32768));var o=e.length;if(!(r>=o))return t>=0?w(e,t,r,n,i):w(e,65535+t+1,r,n,i),r+2}function S(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<e.length,"Trying to write beyond buffer length"),j(t,2147483647,-2147483648));var o=e.length;if(!(r>=o))return t>=0?F(e,t,r,n,i):F(e,4294967295+t+1,r,n,i),r+4}function k(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<e.length,"Trying to write beyond buffer length"),z(t,3.4028234663852886e38,-3.4028234663852886e38));var o=e.length;if(!(r>=o))return V.write(e,t,r,n,23,4),r+4}function E(e,t,r,n,i){i||(q(void 0!==t&&null!==t,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+7<e.length,"Trying to write beyond buffer length"),z(t,1.7976931348623157e308,-1.7976931348623157e308));var o=e.length;if(!(r>=o))return V.write(e,t,r,n,52,8),r+8}function D(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function T(e,t,r){return"number"!=typeof e?r:(e=~~e,e>=t?t:e>=0?e:(e+=t,e>=0?e:0))}function C(e){return e=~~Math.ceil(+e),0>e?0:e}function A(e){return(Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)})(e)}function x(e){return A(e)||n.isBuffer(e)||e&&"object"==typeof e&&"number"==typeof e.length}function O(e){return 16>e?"0"+e.toString(16):e.toString(16)}function I(e){for(var t=[],r=0;r<e.length;r++){var n=e.charCodeAt(r);if(127>=n)t.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var o=encodeURIComponent(e.slice(i,r+1)).substr(1).split("%"),a=0;a<o.length;a++)t.push(parseInt(o[a],16))}}return t}function U(e){for(var t=[],r=0;r<e.length;r++)t.push(255&e.charCodeAt(r));return t}function M(e){for(var t,r,n,i=[],o=0;o<e.length;o++)t=e.charCodeAt(o),r=t>>8,n=t%256,i.push(n),i.push(r);return i}function N(e){return K.toByteArray(e)}function R(e,t,r,n){for(var i=0;n>i&&!(i+r>=t.length||i>=e.length);i++)t[i+r]=e[i];return i}function H(e){try{return decodeURIComponent(e)}catch(t){return String.fromCharCode(65533)}}function L(e,t){q("number"==typeof e,"cannot write a non-number as a number"),q(e>=0,"specified a negative value for writing an unsigned value"),q(t>=e,"value is larger than maximum value for type"),q(Math.floor(e)===e,"value has a fractional component")}function j(e,t,r){q("number"==typeof e,"cannot write a non-number as a number"),q(t>=e,"value larger than maximum allowed value"),q(e>=r,"value smaller than minimum allowed value"),q(Math.floor(e)===e,"value has a fractional component")}function z(e,t,r){q("number"==typeof e,"cannot write a non-number as a number"),q(t>=e,"value larger than maximum allowed value"),q(e>=r,"value smaller than minimum allowed value")}function q(e,t){if(!e)throw new Error(t||"Failed assertion")}var K=e("base64-js"),V=e("ieee754");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var e=new ArrayBuffer(0),t=new Uint8Array(e);return t.foo=function(){return 42},42===t.foo()&&"function"==typeof t.subarray}catch(r){return!1}}(),n.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(e){return!(null===e||void 0===e||!e._isBuffer)},n.byteLength=function(e,t){var r;switch(e=e.toString(),t||"utf8"){case"hex":r=e.length/2;break;case"utf8":case"utf-8":r=I(e).length;break;case"ascii":case"binary":case"raw":r=e.length;break;case"base64":r=N(e).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*e.length;break;default:throw new Error("Unknown encoding")}return r},n.concat=function(e,t){if(q(A(e),"Usage: Buffer.concat(list[, length])"),0===e.length)return new n(0);if(1===e.length)return e[0];var r;if(void 0===t)for(t=0,r=0;r<e.length;r++)t+=e[r].length;var i=new n(t),o=0;for(r=0;r<e.length;r++){var a=e[r];a.copy(i,o),o+=a.length}return i},n.compare=function(e,t){q(n.isBuffer(e)&&n.isBuffer(t),"Arguments must be Buffers");for(var r=e.length,i=t.length,o=0,a=Math.min(r,i);a>o&&e[o]===t[o];o++);return o!==a&&(r=e[o],i=t[o]),i>r?-1:r>i?1:0},n.prototype.write=function(e,t,r,n){if(isFinite(t))isFinite(r)||(n=r,r=void 0);else{var f=n;n=t,t=r,r=f}t=Number(t)||0;var l=this.length-t;r?(r=Number(r),r>l&&(r=l)):r=l,n=String(n||"utf8").toLowerCase();var h;switch(n){case"hex":h=i(this,e,t,r);break;case"utf8":case"utf-8":h=o(this,e,t,r);break;case"ascii":h=a(this,e,t,r);break;case"binary":h=s(this,e,t,r);break;case"base64":h=u(this,e,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":h=c(this,e,t,r);break;default:throw new Error("Unknown encoding")}return h},n.prototype.toString=function(e,t,r){var n=this;if(e=String(e||"utf8").toLowerCase(),t=Number(t)||0,r=void 0===r?n.length:Number(r),r===t)return"";var i;switch(e){case"hex":i=d(n,t,r);break;case"utf8":case"utf-8":i=l(n,t,r);break;case"ascii":i=h(n,t,r);break;case"binary":i=p(n,t,r);break;case"base64":i=f(n,t,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=y(n,t,r);break;default:throw new Error("Unknown encoding")}return i},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.equals=function(e){return q(n.isBuffer(e),"Argument must be a Buffer"),0===n.compare(this,e)},n.prototype.compare=function(e){return q(n.isBuffer(e),"Argument must be a Buffer"),n.compare(this,e)},n.prototype.copy=function(e,t,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),t||(t=0),i!==r&&0!==e.length&&0!==o.length){q(i>=r,"sourceEnd < sourceStart"),q(t>=0&&t<e.length,"targetStart out of bounds"),q(r>=0&&r<o.length,"sourceStart out of bounds"),q(i>=0&&i<=o.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),e.length-t<i-r&&(i=e.length-t+r);var a=i-r;if(100>a||!n._useTypedArrays)for(var s=0;a>s;s++)e[s+t]=this[s+r];else e._set(this.subarray(r,r+a),t)}},n.prototype.slice=function(e,t){var r=this.length;if(e=T(e,r,0),t=T(t,r,r),n._useTypedArrays)return n._augment(this.subarray(e,t));for(var i=t-e,o=new n(i,void 0,!0),a=0;i>a;a++)o[a]=this[a+e];return o},n.prototype.get=function(e){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(e)},n.prototype.set=function(e,t){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(e,t)},n.prototype.readUInt8=function(e,t){return t||(q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to read beyond buffer length")),e>=this.length?void 0:this[e]},n.prototype.readUInt16LE=function(e,t){return g(this,e,!0,t)},n.prototype.readUInt16BE=function(e,t){return g(this,e,!1,t)},n.prototype.readUInt32LE=function(e,t){return v(this,e,!0,t)},n.prototype.readUInt32BE=function(e,t){return v(this,e,!1,t)},n.prototype.readInt8=function(e,t){if(t||(q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to read beyond buffer length")),!(e>=this.length)){var r=128&this[e];return r?-1*(255-this[e]+1):this[e]}},n.prototype.readInt16LE=function(e,t){return B(this,e,!0,t)},n.prototype.readInt16BE=function(e,t){return B(this,e,!1,t)},n.prototype.readInt32LE=function(e,t){return m(this,e,!0,t)},n.prototype.readInt32BE=function(e,t){return m(this,e,!1,t)},n.prototype.readFloatLE=function(e,t){return P(this,e,!0,t)},n.prototype.readFloatBE=function(e,t){return P(this,e,!1,t)},n.prototype.readDoubleLE=function(e,t){return b(this,e,!0,t)},n.prototype.readDoubleBE=function(e,t){return b(this,e,!1,t)},n.prototype.writeUInt8=function(e,t,r){return r||(q(void 0!==e&&null!==e,"missing value"),q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"trying to write beyond buffer length"),L(e,255)),t>=this.length?void 0:(this[t]=e,t+1)},n.prototype.writeUInt16LE=function(e,t,r){return w(this,e,t,!0,r)},n.prototype.writeUInt16BE=function(e,t,r){return w(this,e,t,!1,r)},n.prototype.writeUInt32LE=function(e,t,r){return F(this,e,t,!0,r)},n.prototype.writeUInt32BE=function(e,t,r){return F(this,e,t,!1,r)},n.prototype.writeInt8=function(e,t,r){return r||(q(void 0!==e&&null!==e,"missing value"),q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"Trying to write beyond buffer length"),j(e,127,-128)),t>=this.length?void 0:(e>=0?this.writeUInt8(e,t,r):this.writeUInt8(255+e+1,t,r),t+1)},n.prototype.writeInt16LE=function(e,t,r){return _(this,e,t,!0,r)},n.prototype.writeInt16BE=function(e,t,r){return _(this,e,t,!1,r)},n.prototype.writeInt32LE=function(e,t,r){return S(this,e,t,!0,r)},n.prototype.writeInt32BE=function(e,t,r){return S(this,e,t,!1,r)},n.prototype.writeFloatLE=function(e,t,r){return k(this,e,t,!0,r)},n.prototype.writeFloatBE=function(e,t,r){return k(this,e,t,!1,r)},n.prototype.writeDoubleLE=function(e,t,r){return E(this,e,t,!0,r)},n.prototype.writeDoubleBE=function(e,t,r){return E(this,e,t,!1,r)},n.prototype.fill=function(e,t,r){if(e||(e=0),t||(t=0),r||(r=this.length),q(r>=t,"end < start"),r!==t&&0!==this.length){q(t>=0&&t<this.length,"start out of bounds"),q(r>=0&&r<=this.length,"end out of bounds");var n;if("number"==typeof e)for(n=t;r>n;n++)this[n]=e;else{var i=I(e.toString()),o=i.length;for(n=t;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.inspect=function(){for(var e=[],t=this.length,n=0;t>n;n++)if(e[n]=O(this[n]),n===r.INSPECT_MAX_BYTES){e[n+1]="...";break}return"<Buffer "+e.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var e=new Uint8Array(this.length),t=0,r=e.length;r>t;t+=1)e[t]=this[t];return e.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var G=n.prototype;n._augment=function(e){return e._isBuffer=!0,e._get=e.get,e._set=e.set,e.get=G.get,e.set=G.set,e.write=G.write,e.toString=G.toString,e.toLocaleString=G.toString,e.toJSON=G.toJSON,e.equals=G.equals,e.compare=G.compare,e.copy=G.copy,e.slice=G.slice,e.readUInt8=G.readUInt8,e.readUInt16LE=G.readUInt16LE,e.readUInt16BE=G.readUInt16BE,e.readUInt32LE=G.readUInt32LE,e.readUInt32BE=G.readUInt32BE,e.readInt8=G.readInt8,e.readInt16LE=G.readInt16LE,e.readInt16BE=G.readInt16BE,e.readInt32LE=G.readInt32LE,e.readInt32BE=G.readInt32BE,e.readFloatLE=G.readFloatLE,e.readFloatBE=G.readFloatBE,e.readDoubleLE=G.readDoubleLE,e.readDoubleBE=G.readDoubleBE,e.writeUInt8=G.writeUInt8,e.writeUInt16LE=G.writeUInt16LE,e.writeUInt16BE=G.writeUInt16BE,e.writeUInt32LE=G.writeUInt32LE,e.writeUInt32BE=G.writeUInt32BE,e.writeInt8=G.writeInt8,e.writeInt16LE=G.writeInt16LE,e.writeInt16BE=G.writeInt16BE,e.writeInt32LE=G.writeInt32LE,e.writeInt32BE=G.writeInt32BE,e.writeFloatLE=G.writeFloatLE,e.writeFloatBE=G.writeFloatBE,e.writeDoubleLE=G.writeDoubleLE,e.writeDoubleBE=G.writeDoubleBE,e.fill=G.fill,e.inspect=G.inspect,e.toArrayBuffer=G.toArrayBuffer,e}},{"base64-js":6,ieee754:7}],6:[function(e,t){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function e(e){var t=e.charCodeAt(0);return t===a?62:t===s?63:u>t?-1:u+10>t?t-u+26+26:f+26>t?t-f:c+26>t?t-c+26:void 0}function n(t){function r(e){c[l++]=e}var n,i,a,s,u,c;if(t.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=t.length;u="="===t.charAt(f-2)?2:"="===t.charAt(f-1)?1:0,c=new o(3*t.length/4-u),a=u>0?t.length-4:t.length;var l=0;for(n=0,i=0;a>n;n+=4,i+=3)s=e(t.charAt(n))<<18|e(t.charAt(n+1))<<12|e(t.charAt(n+2))<<6|e(t.charAt(n+3)),r((16711680&s)>>16),r((65280&s)>>8),r(255&s);return 2===u?(s=e(t.charAt(n))<<2|e(t.charAt(n+1))>>4,r(255&s)):1===u&&(s=e(t.charAt(n))<<10|e(t.charAt(n+1))<<4|e(t.charAt(n+2))>>2,r(s>>8&255),r(255&s)),c}function i(e){function t(e){return r.charAt(e)}function n(e){return t(e>>18&63)+t(e>>12&63)+t(e>>6&63)+t(63&e)}var i,o,a,s=e.length%3,u="";for(i=0,a=e.length-s;a>i;i+=3)o=(e[i]<<16)+(e[i+1]<<8)+e[i+2],u+=n(o);switch(s){case 1:o=e[e.length-1],u+=t(o>>2),u+=t(o<<4&63),u+="==";break;case 2:o=(e[e.length-2]<<8)+e[e.length-1],u+=t(o>>10),u+=t(o>>4&63),u+=t(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,a=("0".charCodeAt(0),"+".charCodeAt(0)),s="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0);t.exports.toByteArray=n,t.exports.fromByteArray=i}()},{}],7:[function(e,t,r){r.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,u=(1<<s)-1,c=u>>1,f=-7,l=r?i-1:0,h=r?-1:1,p=e[t+l];for(l+=h,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=h,f-=8);for(a=o&(1<<-f)-1,o>>=-f,f+=n;f>0;a=256*a+e[t+l],l+=h,f-=8);if(0===o)o=1-c;else{if(o===u)return a?0/0:1/0*(p?-1:1);a+=Math.pow(2,n),o-=c}return(p?-1:1)*a*Math.pow(2,o-n)},r.write=function(e,t,r,n,i,o){var a,s,u,c=8*o-i-1,f=(1<<c)-1,l=f>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=0>t||0===t&&0>1/t?1:0;for(t=Math.abs(t),isNaN(t)||1/0===t?(s=isNaN(t)?1:0,a=f):(a=Math.floor(Math.log(t)/Math.LN2),t*(u=Math.pow(2,-a))<1&&(a--,u*=2),t+=a+l>=1?h/u:h*Math.pow(2,1-l),t*u>=2&&(a++,u/=2),a+l>=f?(s=0,a=f):a+l>=1?(s=(t*u-1)*Math.pow(2,i),a+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=d,s/=256,i-=8);for(a=a<<i|s,c+=i;c>0;e[r+p]=255&a,p+=d,a/=256,c-=8);e[r+p-d]|=128*y}},{}],8:[function(e,t){function r(e,t){if(e.length%a!==0){var r=e.length+(a-e.length%a);e=o.concat([e,s],r)}for(var n=[],i=t?e.readInt32BE:e.readInt32LE,u=0;u<e.length;u+=a)n.push(i.call(e,u));return n}function n(e,t,r){for(var n=new o(t),i=r?n.writeInt32BE:n.writeInt32LE,a=0;a<e.length;a++)i.call(n,e[a],4*a,!0);return n}function i(e,t,i,a){o.isBuffer(e)||(e=new o(e));var s=t(r(e,a),e.length*u);return n(s,i,a)}var o=e("buffer").Buffer,a=4,s=new o(a);s.fill(0);var u=8;t.exports={hash:i}},{buffer:5}],9:[function(e,t,r){function n(e,t,r){s.isBuffer(t)||(t=new s(t)),s.isBuffer(r)||(r=new s(r)),t.length>p?t=e(t):t.length<p&&(t=s.concat([t,d],p));for(var n=new s(p),i=new s(p),o=0;p>o;o++)n[o]=54^t[o],i[o]=92^t[o];var a=e(s.concat([n,r]));return e(s.concat([i,a]))}function i(e,t){e=e||"sha1";var r=h[e],i=[],a=0;return r||o("algorithm:",e,"is not yet supported"),{update:function(e){return s.isBuffer(e)||(e=new s(e)),i.push(e),a+=e.length,this},digest:function(e){var o=s.concat(i),a=t?n(r,t,o):r(o);return i=null,e?a.toString(e):a}}}function o(){var e=[].slice.call(arguments).join(" ");throw new Error([e,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function a(e,t){for(var r in e)t(e[r],r)}var s=e("buffer").Buffer,u=e("./sha"),c=e("./sha256"),f=e("./rng"),l=e("./md5"),h={sha1:u,sha256:c,md5:l},p=64,d=new s(p);d.fill(0),r.createHash=function(e){return i(e)},r.createHmac=function(e,t){return i(e,t)},r.randomBytes=function(e,t){if(!t||!t.call)return new s(f(e));try{t.call(this,void 0,new s(f(e)))}catch(r){t(r)}},a(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(e){r[e]=function(){o("sorry,",e,"is not implemented yet")}})},{"./md5":10,"./rng":11,"./sha":12,"./sha256":13,buffer:5}],10:[function(e,t){function r(e,t){e[t>>5]|=128<<t%32,e[(t+64>>>9<<4)+14]=t;for(var r=1732584193,n=-271733879,c=-1732584194,f=271733878,l=0;l<e.length;l+=16){var h=r,p=n,d=c,y=f;r=i(r,n,c,f,e[l+0],7,-680876936),f=i(f,r,n,c,e[l+1],12,-389564586),c=i(c,f,r,n,e[l+2],17,606105819),n=i(n,c,f,r,e[l+3],22,-1044525330),r=i(r,n,c,f,e[l+4],7,-176418897),f=i(f,r,n,c,e[l+5],12,1200080426),c=i(c,f,r,n,e[l+6],17,-1473231341),n=i(n,c,f,r,e[l+7],22,-45705983),r=i(r,n,c,f,e[l+8],7,1770035416),f=i(f,r,n,c,e[l+9],12,-1958414417),c=i(c,f,r,n,e[l+10],17,-42063),n=i(n,c,f,r,e[l+11],22,-1990404162),r=i(r,n,c,f,e[l+12],7,1804603682),f=i(f,r,n,c,e[l+13],12,-40341101),c=i(c,f,r,n,e[l+14],17,-1502002290),n=i(n,c,f,r,e[l+15],22,1236535329),r=o(r,n,c,f,e[l+1],5,-165796510),f=o(f,r,n,c,e[l+6],9,-1069501632),c=o(c,f,r,n,e[l+11],14,643717713),n=o(n,c,f,r,e[l+0],20,-373897302),r=o(r,n,c,f,e[l+5],5,-701558691),f=o(f,r,n,c,e[l+10],9,38016083),c=o(c,f,r,n,e[l+15],14,-660478335),n=o(n,c,f,r,e[l+4],20,-405537848),r=o(r,n,c,f,e[l+9],5,568446438),f=o(f,r,n,c,e[l+14],9,-1019803690),c=o(c,f,r,n,e[l+3],14,-187363961),n=o(n,c,f,r,e[l+8],20,1163531501),r=o(r,n,c,f,e[l+13],5,-1444681467),f=o(f,r,n,c,e[l+2],9,-51403784),c=o(c,f,r,n,e[l+7],14,1735328473),n=o(n,c,f,r,e[l+12],20,-1926607734),r=a(r,n,c,f,e[l+5],4,-378558),f=a(f,r,n,c,e[l+8],11,-2022574463),c=a(c,f,r,n,e[l+11],16,1839030562),n=a(n,c,f,r,e[l+14],23,-35309556),r=a(r,n,c,f,e[l+1],4,-1530992060),f=a(f,r,n,c,e[l+4],11,1272893353),c=a(c,f,r,n,e[l+7],16,-155497632),n=a(n,c,f,r,e[l+10],23,-1094730640),r=a(r,n,c,f,e[l+13],4,681279174),f=a(f,r,n,c,e[l+0],11,-358537222),c=a(c,f,r,n,e[l+3],16,-722521979),n=a(n,c,f,r,e[l+6],23,76029189),r=a(r,n,c,f,e[l+9],4,-640364487),f=a(f,r,n,c,e[l+12],11,-421815835),c=a(c,f,r,n,e[l+15],16,530742520),n=a(n,c,f,r,e[l+2],23,-995338651),r=s(r,n,c,f,e[l+0],6,-198630844),f=s(f,r,n,c,e[l+7],10,1126891415),c=s(c,f,r,n,e[l+14],15,-1416354905),n=s(n,c,f,r,e[l+5],21,-57434055),r=s(r,n,c,f,e[l+12],6,1700485571),f=s(f,r,n,c,e[l+3],10,-1894986606),c=s(c,f,r,n,e[l+10],15,-1051523),n=s(n,c,f,r,e[l+1],21,-2054922799),r=s(r,n,c,f,e[l+8],6,1873313359),f=s(f,r,n,c,e[l+15],10,-30611744),c=s(c,f,r,n,e[l+6],15,-1560198380),n=s(n,c,f,r,e[l+13],21,1309151649),r=s(r,n,c,f,e[l+4],6,-145523070),f=s(f,r,n,c,e[l+11],10,-1120210379),c=s(c,f,r,n,e[l+2],15,718787259),n=s(n,c,f,r,e[l+9],21,-343485551),r=u(r,h),n=u(n,p),c=u(c,d),f=u(f,y)}return Array(r,n,c,f)}function n(e,t,r,n,i,o){return u(c(u(u(t,e),u(n,o)),i),r)}function i(e,t,r,i,o,a,s){return n(t&r|~t&i,e,t,o,a,s)}function o(e,t,r,i,o,a,s){return n(t&i|r&~i,e,t,o,a,s)
}function a(e,t,r,i,o,a,s){return n(t^r^i,e,t,o,a,s)}function s(e,t,r,i,o,a,s){return n(r^(t|~i),e,t,o,a,s)}function u(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function c(e,t){return e<<t|e>>>32-t}var f=e("./helpers");t.exports=function(e){return f.hash(e,r,16)}},{"./helpers":8}],11:[function(e,t){!function(){var e,r,n=this;e=function(e){for(var t,t,r=new Array(e),n=0;e>n;n++)0==(3&n)&&(t=4294967296*Math.random()),r[n]=t>>>((3&n)<<3)&255;return r},n.crypto&&crypto.getRandomValues&&(r=function(e){var t=new Uint8Array(e);return crypto.getRandomValues(t),t}),t.exports=r||e}()},{}],12:[function(e,t){function r(e,t){e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var r=Array(80),s=1732584193,u=-271733879,c=-1732584194,f=271733878,l=-1009589776,h=0;h<e.length;h+=16){for(var p=s,d=u,y=c,g=f,v=l,B=0;80>B;B++){r[B]=16>B?e[h+B]:a(r[B-3]^r[B-8]^r[B-14]^r[B-16],1);var m=o(o(a(s,5),n(B,u,c,f)),o(o(l,r[B]),i(B)));l=f,f=c,c=a(u,30),u=s,s=m}s=o(s,p),u=o(u,d),c=o(c,y),f=o(f,g),l=o(l,v)}return Array(s,u,c,f,l)}function n(e,t,r,n){return 20>e?t&r|~t&n:40>e?t^r^n:60>e?t&r|t&n|r&n:t^r^n}function i(e){return 20>e?1518500249:40>e?1859775393:60>e?-1894007588:-899497514}function o(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r}function a(e,t){return e<<t|e>>>32-t}var s=e("./helpers");t.exports=function(e){return s.hash(e,r,20,!0)}},{"./helpers":8}],13:[function(e,t){var r=e("./helpers"),n=function(e,t){var r=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(r>>16);return n<<16|65535&r},i=function(e,t){return e>>>t|e<<32-t},o=function(e,t){return e>>>t},a=function(e,t,r){return e&t^~e&r},s=function(e,t,r){return e&t^e&r^t&r},u=function(e){return i(e,2)^i(e,13)^i(e,22)},c=function(e){return i(e,6)^i(e,11)^i(e,25)},f=function(e){return i(e,7)^i(e,18)^o(e,3)},l=function(e){return i(e,17)^i(e,19)^o(e,10)},h=function(e,t){var r,i,o,h,p,d,y,g,v,B,m,P,b=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),w=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),F=new Array(64);e[t>>5]|=128<<24-t%32,e[(t+64>>9<<4)+15]=t;for(var v=0;v<e.length;v+=16){r=w[0],i=w[1],o=w[2],h=w[3],p=w[4],d=w[5],y=w[6],g=w[7];for(var B=0;64>B;B++)F[B]=16>B?e[B+v]:n(n(n(l(F[B-2]),F[B-7]),f(F[B-15])),F[B-16]),m=n(n(n(n(g,c(p)),a(p,d,y)),b[B]),F[B]),P=n(u(r),s(r,i,o)),g=y,y=d,d=p,p=n(h,m),h=o,o=i,i=r,r=n(m,P);w[0]=n(r,w[0]),w[1]=n(i,w[1]),w[2]=n(o,w[2]),w[3]=n(h,w[3]),w[4]=n(p,w[4]),w[5]=n(d,w[5]),w[6]=n(y,w[6]),w[7]=n(g,w[7])}return w};t.exports=function(e){return r.hash(e,h,32,!0)}},{"./helpers":8}],14:[function(e,t){t.exports="function"==typeof Object.create?function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:function(e,t){e.super_=t;var r=function(){};r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e}},{}],15:[function(e,t){function r(){}var n=t.exports={};n.nextTick=function(){var e="undefined"!=typeof window&&window.setImmediate,t="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(e)return function(e){return window.setImmediate(e)};if(t){var r=[];return window.addEventListener("message",function(e){var t=e.source;if((t===window||null===t)&&"process-tick"===e.data&&(e.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(e){r.push(e),window.postMessage("process-tick","*")}}return function(e){setTimeout(e,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],16:[function(e,t){t.exports=e(2)},{}],17:[function(e,t){t.exports=e(3)},{"./support/isBuffer":16,FWaASH:15,inherits:14}],18:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.BlockCipher,i=t.algo,o=[],a=[],s=[],u=[],c=[],f=[],l=[],h=[],p=[],d=[];!function(){for(var e=[],t=0;256>t;t++)e[t]=128>t?t<<1:t<<1^283;for(var r=0,n=0,t=0;256>t;t++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,o[r]=i,a[i]=r;var y=e[r],g=e[y],v=e[g],B=257*e[i]^16843008*i;s[r]=B<<24|B>>>8,u[r]=B<<16|B>>>16,c[r]=B<<8|B>>>24,f[r]=B;var B=16843009*v^65537*g^257*y^16843008*r;l[i]=B<<24|B>>>8,h[i]=B<<16|B>>>16,p[i]=B<<8|B>>>24,d[i]=B,r?(r=y^e[e[e[v^y]]],n^=e[e[n]]):r=n=1}}();var y=[0,1,2,4,8,16,32,64,128,27,54],g=i.AES=n.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes/4,n=this._nRounds=r+6,i=4*(n+1),a=this._keySchedule=[],s=0;i>s;s++)if(r>s)a[s]=t[s];else{var u=a[s-1];s%r?r>6&&s%r==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=u<<8|u>>>24,u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=y[s/r|0]<<24),a[s]=a[s-r]^u}for(var c=this._invKeySchedule=[],f=0;i>f;f++){var s=i-f;if(f%4)var u=a[s];else var u=a[s-4];c[f]=4>f||4>=s?u:l[o[u>>>24]]^h[o[u>>>16&255]]^p[o[u>>>8&255]]^d[o[255&u]]}},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._keySchedule,s,u,c,f,o)},decryptBlock:function(e,t){var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r,this._doCryptBlock(e,t,this._invKeySchedule,l,h,p,d,a);var r=e[t+1];e[t+1]=e[t+3],e[t+3]=r},_doCryptBlock:function(e,t,r,n,i,o,a,s){for(var u=this._nRounds,c=e[t]^r[0],f=e[t+1]^r[1],l=e[t+2]^r[2],h=e[t+3]^r[3],p=4,d=1;u>d;d++){var y=n[c>>>24]^i[f>>>16&255]^o[l>>>8&255]^a[255&h]^r[p++],g=n[f>>>24]^i[l>>>16&255]^o[h>>>8&255]^a[255&c]^r[p++],v=n[l>>>24]^i[h>>>16&255]^o[c>>>8&255]^a[255&f]^r[p++],B=n[h>>>24]^i[c>>>16&255]^o[f>>>8&255]^a[255&l]^r[p++];c=y,f=g,l=v,h=B}var y=(s[c>>>24]<<24|s[f>>>16&255]<<16|s[l>>>8&255]<<8|s[255&h])^r[p++],g=(s[f>>>24]<<24|s[l>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^r[p++],v=(s[l>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&f])^r[p++],B=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[f>>>8&255]<<8|s[255&l])^r[p++];e[t]=y,e[t+1]=g,e[t+2]=v,e[t+3]=B},keySize:8});t.AES=n._createHelper(g)}(),e.AES})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],19:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){e.lib.Cipher||function(t){var r=e,n=r.lib,i=n.Base,o=n.WordArray,a=n.BufferedBlockAlgorithm,s=r.enc,u=(s.Utf8,s.Base64),c=r.algo,f=c.EvpKDF,l=n.Cipher=a.extend({cfg:i.extend(),createEncryptor:function(e,t){return this.create(this._ENC_XFORM_MODE,e,t)},createDecryptor:function(e,t){return this.create(this._DEC_XFORM_MODE,e,t)},init:function(e,t,r){this.cfg=this.cfg.extend(r),this._xformMode=e,this._key=t,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(e){return this._append(e),this._process()},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function e(e){return"string"==typeof e?F:P}return function(t){return{encrypt:function(r,n,i){return e(n).encrypt(t,r,n,i)},decrypt:function(r,n,i){return e(n).decrypt(t,r,n,i)}}}}()}),h=(n.StreamCipher=l.extend({_doFinalize:function(){var e=this._process(!0);return e},blockSize:1}),r.mode={}),p=n.BlockCipherMode=i.extend({createEncryptor:function(e,t){return this.Encryptor.create(e,t)},createDecryptor:function(e,t){return this.Decryptor.create(e,t)},init:function(e,t){this._cipher=e,this._iv=t}}),d=h.CBC=function(){function e(e,r,n){var i=this._iv;if(i){var o=i;this._iv=t}else var o=this._prevBlock;for(var a=0;n>a;a++)e[r+a]^=o[a]}var r=p.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i),n.encryptBlock(t,r),this._prevBlock=t.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);n.decryptBlock(t,r),e.call(this,t,r,i),this._prevBlock=o}}),r}(),y=r.pad={},g=y.Pkcs7={pad:function(e,t){for(var r=4*t,n=r-e.sigBytes%r,i=n<<24|n<<16|n<<8|n,a=[],s=0;n>s;s+=4)a.push(i);var u=o.create(a,n);e.concat(u)},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},v=(n.BlockCipher=l.extend({cfg:l.cfg.extend({mode:d,padding:g}),reset:function(){l.reset.call(this);var e=this.cfg,t=e.iv,r=e.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{var n=r.createDecryptor;this._minBufferSize=1}this._mode=n.call(r,this,t&&t.words)},_doProcessBlock:function(e,t){this._mode.processBlock(e,t)},_doFinalize:function(){var e=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){e.pad(this._data,this.blockSize);var t=this._process(!0)}else{var t=this._process(!0);e.unpad(t)}return t},blockSize:4}),n.CipherParams=i.extend({init:function(e){this.mixIn(e)},toString:function(e){return(e||this.formatter).stringify(this)}})),B=r.format={},m=B.OpenSSL={stringify:function(e){var t=e.ciphertext,r=e.salt;if(r)var n=o.create([1398893684,1701076831]).concat(r).concat(t);else var n=t;return n.toString(u)},parse:function(e){var t=u.parse(e),r=t.words;if(1398893684==r[0]&&1701076831==r[1]){var n=o.create(r.slice(2,4));r.splice(0,4),t.sigBytes-=16}return v.create({ciphertext:t,salt:n})}},P=n.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=e.createEncryptor(r,n),o=i.finalize(t),a=i.cfg;return v.create({ciphertext:o,key:r,iv:a.iv,algorithm:e,mode:a.mode,padding:a.padding,blockSize:e.blockSize,formatter:n.format})},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=e.createDecryptor(r,n).finalize(t.ciphertext);return i},_parse:function(e,t){return"string"==typeof e?t.parse(e,this):e}}),b=r.kdf={},w=b.OpenSSL={execute:function(e,t,r,n){n||(n=o.random(8));var i=f.create({keySize:t+r}).compute(e,n),a=o.create(i.words.slice(t),4*r);return i.sigBytes=4*t,v.create({key:i,iv:a,salt:n})}},F=n.PasswordBasedCipher=P.extend({cfg:P.cfg.extend({kdf:w}),encrypt:function(e,t,r,n){n=this.cfg.extend(n);var i=n.kdf.execute(r,e.keySize,e.ivSize);n.iv=i.iv;var o=P.encrypt.call(this,e,t,i.key,n);return o.mixIn(i),o},decrypt:function(e,t,r,n){n=this.cfg.extend(n),t=this._parse(t,n.format);var i=n.kdf.execute(r,e.keySize,e.ivSize,t.salt);n.iv=i.iv;var o=P.decrypt.call(this,e,t,i.key,n);return o}})}()})},{"./core":20}],20:[function(t,r,n){!function(t,i){"object"==typeof n?r.exports=n=i():"function"==typeof e&&e.amd?e([],i):t.CryptoJS=i()}(this,function(){var e=e||function(e,t){var r={},n=r.lib={},i=n.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var r=new e;return t&&r.mixIn(t),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.WordArray=i.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:4*e.length},toString:function(e){return(e||s).stringify(this)},concat:function(e){var t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(var o=0;i>o;o++){var a=r[o>>>2]>>>24-o%4*8&255;t[n+o>>>2]|=a<<24-(n+o)%4*8}else if(r.length>256)for(var o=0;i>o;o+=4)t[n+o>>>2]=r[o>>>2];else t.push.apply(t,r);return this.sigBytes+=i,this},clamp:function(){var t=this.words,r=this.sigBytes;t[r>>>2]&=4294967295<<32-r%4*8,t.length=e.ceil(r/4)},clone:function(){var e=i.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var r=[],n=0;t>n;n+=4)r.push(4294967296*e.random()|0);return new o.init(r,t)}}),a=r.enc={},s=a.Hex={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;r>i;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new o.init(r,t/2)}},u=a.Latin1={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;r>i;i++){var o=t[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n++)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new o.init(r,t)}},c=a.Utf8={stringify:function(e){try{return decodeURIComponent(escape(u.stringify(e)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(e){return u.parse(unescape(encodeURIComponent(e)))}},f=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=c.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var r=this._data,n=r.words,i=r.sigBytes,a=this.blockSize,s=4*a,u=i/s;u=t?e.ceil(u):e.max((0|u)-this._minBufferSize,0);var c=u*a,f=e.min(4*c,i);if(c){for(var l=0;c>l;l+=a)this._doProcessBlock(n,l);var h=n.splice(0,c);r.sigBytes-=f}return new o.init(h,f)},clone:function(){var e=i.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0}),l=(n.Hasher=f.extend({cfg:i.extend(),init:function(e){this.cfg=this.cfg.extend(e),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){e&&this._append(e);var t=this._doFinalize();return t},blockSize:16,_createHelper:function(e){return function(t,r){return new e.init(r).finalize(t)}},_createHmacHelper:function(e){return function(t,r){return new l.HMAC.init(e,r).finalize(t)}}}),r.algo={});return r}(Math);return e})},{}],21:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){{var t=e,r=t.lib,n=r.WordArray,i=t.enc;i.Base64={stringify:function(e){var t=e.words,r=e.sigBytes,n=this._map;e.clamp();for(var i=[],o=0;r>o;o+=3)for(var a=t[o>>>2]>>>24-o%4*8&255,s=t[o+1>>>2]>>>24-(o+1)%4*8&255,u=t[o+2>>>2]>>>24-(o+2)%4*8&255,c=a<<16|s<<8|u,f=0;4>f&&r>o+.75*f;f++)i.push(n.charAt(c>>>6*(3-f)&63));var l=n.charAt(64);if(l)for(;i.length%4;)i.push(l);return i.join("")},parse:function(e){var t=e.length,r=this._map,i=r.charAt(64);if(i){var o=e.indexOf(i);-1!=o&&(t=o)}for(var a=[],s=0,u=0;t>u;u++)if(u%4){var c=r.indexOf(e.charAt(u-1))<<u%4*2,f=r.indexOf(e.charAt(u))>>>6-u%4*2;a[s>>>2]|=(c|f)<<24-s%4*8,s++}return n.create(a,s)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}}(),e.enc.Base64})},{"./core":20}],22:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(e){return e<<8&4278255360|e>>>8&16711935}{var r=e,n=r.lib,i=n.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(e){for(var t=e.words,r=e.sigBytes,n=[],i=0;r>i;i+=2){var o=t[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(e){for(var t=e.length,r=[],n=0;t>n;n++)r[n>>>1]|=e.charCodeAt(n)<<16-n%2*16;return i.create(r,2*t)}}}o.Utf16LE={stringify:function(e){for(var r=e.words,n=e.sigBytes,i=[],o=0;n>o;o+=2){var a=t(r[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(a))}return i.join("")},parse:function(e){for(var r=e.length,n=[],o=0;r>o;o++)n[o>>>1]|=t(e.charCodeAt(o)<<16-o%2*16);return i.create(n,2*r)}}}(),e.enc.Utf16})},{"./core":20}],23:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof e&&e.amd?e(["./core","./sha1","./hmac"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.MD5,s=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),a=o.words,s=r.keySize,u=r.iterations;a.length<s;){c&&n.update(c);var c=n.update(e).finalize(t);n.reset();for(var f=1;u>f;f++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*s,o}});t.EvpKDF=function(e,t,r){return s.create(r).compute(e,t)}}(),e.EvpKDF})},{"./core":20,"./hmac":26,"./sha1":45}],24:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return function(){{var t=e,r=t.lib,n=r.CipherParams,i=t.enc,o=i.Hex,a=t.format;a.Hex={stringify:function(e){return e.ciphertext.toString(o)},parse:function(e){var t=o.parse(e);return n.create({ciphertext:t})}}}}(),e.format.Hex})},{"./cipher-core":19,"./core":20}],25:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./sha256"),t("./hmac")):"function"==typeof e&&e.amd?e(["./core","./sha256","./hmac"],o):o(i.CryptoJS)}(this,function(e){return e.HmacSHA256})},{"./core":20,"./hmac":26,"./sha256":47}],26:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){!function(){{var t=e,r=t.lib,n=r.Base,i=t.enc,o=i.Utf8,a=t.algo;a.HMAC=n.extend({init:function(e,t){e=this._hasher=new e.init,"string"==typeof t&&(t=o.parse(t));var r=e.blockSize,n=4*r;t.sigBytes>n&&(t=e.finalize(t)),t.clamp();for(var i=this._oKey=t.clone(),a=this._iKey=t.clone(),s=i.words,u=a.words,c=0;r>c;c++)s[c]^=1549556828,u[c]^=909522486;i.sigBytes=a.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher,r=t.finalize(e);t.reset();var n=t.finalize(this._oKey.clone().concat(r));return n}})}}()})},{"./core":20}],27:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./x64-core"),t("./lib-typedarrays"),t("./enc-utf16"),t("./enc-base64"),t("./md5"),t("./sha1"),t("./sha256"),t("./sha224"),t("./sha512"),t("./sha384"),t("./sha3"),t("./ripemd160"),t("./hmac"),t("./pbkdf2"),t("./evpkdf"),t("./cipher-core"),t("./mode-cfb"),t("./mode-ctr"),t("./mode-ctr-gladman"),t("./mode-ofb"),t("./mode-ecb"),t("./pad-ansix923"),t("./pad-iso10126"),t("./pad-iso97971"),t("./pad-zeropadding"),t("./pad-nopadding"),t("./format-hex"),t("./aes"),t("./tripledes"),t("./rc4"),t("./rabbit"),t("./rabbit-legacy")):"function"==typeof e&&e.amd?e(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],o):o(i.CryptoJS)}(this,function(e){return e})},{"./aes":18,"./cipher-core":19,"./core":20,"./enc-base64":21,"./enc-utf16":22,"./evpkdf":23,"./format-hex":24,"./hmac":26,"./lib-typedarrays":28,"./md5":29,"./mode-cfb":30,"./mode-ctr":32,"./mode-ctr-gladman":31,"./mode-ecb":33,"./mode-ofb":34,"./pad-ansix923":35,"./pad-iso10126":36,"./pad-iso97971":37,"./pad-nopadding":38,"./pad-zeropadding":39,"./pbkdf2":40,"./rabbit":42,"./rabbit-legacy":41,"./rc4":43,"./ripemd160":44,"./sha1":45,"./sha224":46,"./sha256":47,"./sha3":48,"./sha384":49,"./sha512":50,"./tripledes":51,"./x64-core":52}],28:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){if("function"==typeof ArrayBuffer){var t=e,r=t.lib,n=r.WordArray,i=n.init,o=n.init=function(e){if(e instanceof ArrayBuffer&&(e=new Uint8Array(e)),(e instanceof Int8Array||e instanceof Uint8ClampedArray||e instanceof Int16Array||e instanceof Uint16Array||e instanceof Int32Array||e instanceof Uint32Array||e instanceof Float32Array||e instanceof Float64Array)&&(e=new Uint8Array(e.buffer,e.byteOffset,e.byteLength)),e instanceof Uint8Array){for(var t=e.byteLength,r=[],n=0;t>n;n++)r[n>>>2]|=e[n]<<24-n%4*8;i.call(this,r,t)}else i.apply(this,arguments)};o.prototype=n}}(),e.lib.WordArray})},{"./core":20}],29:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(t){function r(e,t,r,n,i,o,a){var s=e+(t&r|~t&n)+i+a;return(s<<o|s>>>32-o)+t}function n(e,t,r,n,i,o,a){var s=e+(t&n|r&~n)+i+a;return(s<<o|s>>>32-o)+t}function i(e,t,r,n,i,o,a){var s=e+(t^r^n)+i+a;return(s<<o|s>>>32-o)+t}function o(e,t,r,n,i,o,a){var s=e+(r^(t|~n))+i+a;return(s<<o|s>>>32-o)+t}var a=e,s=a.lib,u=s.WordArray,c=s.Hasher,f=a.algo,l=[];!function(){for(var e=0;64>e;e++)l[e]=4294967296*t.abs(t.sin(e+1))|0}();var h=f.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(e,t){for(var a=0;16>a;a++){var s=t+a,u=e[s];e[s]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,f=e[t+0],h=e[t+1],p=e[t+2],d=e[t+3],y=e[t+4],g=e[t+5],v=e[t+6],B=e[t+7],m=e[t+8],P=e[t+9],b=e[t+10],w=e[t+11],F=e[t+12],_=e[t+13],S=e[t+14],k=e[t+15],E=c[0],D=c[1],T=c[2],C=c[3];E=r(E,D,T,C,f,7,l[0]),C=r(C,E,D,T,h,12,l[1]),T=r(T,C,E,D,p,17,l[2]),D=r(D,T,C,E,d,22,l[3]),E=r(E,D,T,C,y,7,l[4]),C=r(C,E,D,T,g,12,l[5]),T=r(T,C,E,D,v,17,l[6]),D=r(D,T,C,E,B,22,l[7]),E=r(E,D,T,C,m,7,l[8]),C=r(C,E,D,T,P,12,l[9]),T=r(T,C,E,D,b,17,l[10]),D=r(D,T,C,E,w,22,l[11]),E=r(E,D,T,C,F,7,l[12]),C=r(C,E,D,T,_,12,l[13]),T=r(T,C,E,D,S,17,l[14]),D=r(D,T,C,E,k,22,l[15]),E=n(E,D,T,C,h,5,l[16]),C=n(C,E,D,T,v,9,l[17]),T=n(T,C,E,D,w,14,l[18]),D=n(D,T,C,E,f,20,l[19]),E=n(E,D,T,C,g,5,l[20]),C=n(C,E,D,T,b,9,l[21]),T=n(T,C,E,D,k,14,l[22]),D=n(D,T,C,E,y,20,l[23]),E=n(E,D,T,C,P,5,l[24]),C=n(C,E,D,T,S,9,l[25]),T=n(T,C,E,D,d,14,l[26]),D=n(D,T,C,E,m,20,l[27]),E=n(E,D,T,C,_,5,l[28]),C=n(C,E,D,T,p,9,l[29]),T=n(T,C,E,D,B,14,l[30]),D=n(D,T,C,E,F,20,l[31]),E=i(E,D,T,C,g,4,l[32]),C=i(C,E,D,T,m,11,l[33]),T=i(T,C,E,D,w,16,l[34]),D=i(D,T,C,E,S,23,l[35]),E=i(E,D,T,C,h,4,l[36]),C=i(C,E,D,T,y,11,l[37]),T=i(T,C,E,D,B,16,l[38]),D=i(D,T,C,E,b,23,l[39]),E=i(E,D,T,C,_,4,l[40]),C=i(C,E,D,T,f,11,l[41]),T=i(T,C,E,D,d,16,l[42]),D=i(D,T,C,E,v,23,l[43]),E=i(E,D,T,C,P,4,l[44]),C=i(C,E,D,T,F,11,l[45]),T=i(T,C,E,D,k,16,l[46]),D=i(D,T,C,E,p,23,l[47]),E=o(E,D,T,C,f,6,l[48]),C=o(C,E,D,T,B,10,l[49]),T=o(T,C,E,D,S,15,l[50]),D=o(D,T,C,E,g,21,l[51]),E=o(E,D,T,C,F,6,l[52]),C=o(C,E,D,T,d,10,l[53]),T=o(T,C,E,D,b,15,l[54]),D=o(D,T,C,E,h,21,l[55]),E=o(E,D,T,C,m,6,l[56]),C=o(C,E,D,T,k,10,l[57]),T=o(T,C,E,D,v,15,l[58]),D=o(D,T,C,E,_,21,l[59]),E=o(E,D,T,C,y,6,l[60]),C=o(C,E,D,T,w,10,l[61]),T=o(T,C,E,D,p,15,l[62]),D=o(D,T,C,E,P,21,l[63]),c[0]=c[0]+E|0,c[1]=c[1]+D|0,c[2]=c[2]+T|0,c[3]=c[3]+C|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;r[i>>>5]|=128<<24-i%32;var o=t.floor(n/4294967296),a=n;r[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[(i+64>>>9<<4)+14]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),e.sigBytes=4*(r.length+1),this._process();for(var s=this._hash,u=s.words,c=0;4>c;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return s},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e}});a.MD5=c._createHelper(h),a.HmacMD5=c._createHmacHelper(h)}(Math),e.MD5})},{"./core":20}],30:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.mode.CFB=function(){function t(e,t,r,n){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else var o=this._prevBlock;n.encryptBlock(o,0);for(var a=0;r>a;a++)e[t+a]^=o[a]}var r=e.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i,n),this._prevBlock=e.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);t.call(this,e,r,i,n),this._prevBlock=o}}),r}(),e.mode.CFB})},{"./cipher-core":19,"./core":20}],31:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.mode.CTRGladman=function(){function t(e){if(255===(e>>24&255)){var t=e>>16&255,r=e>>8&255,n=255&e;255===t?(t=0,255===r?(r=0,255===n?n=0:++n):++r):++t,e=0,e+=t<<16,e+=r<<8,e+=n}else e+=1<<24;return e}function r(e){return 0===(e[0]=t(e[0]))&&(e[1]=t(e[1])),e}var n=e.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(e,t){var n=this._cipher,i=n.blockSize,o=this._iv,a=this._counter;o&&(a=this._counter=o.slice(0),this._iv=void 0),r(a);var s=a.slice(0);n.encryptBlock(s,0);for(var u=0;i>u;u++)e[t+u]^=s[u]}});return n.Decryptor=i,n}(),e.mode.CTRGladman})},{"./cipher-core":19,"./core":20}],32:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.mode.CTR=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var a=o.slice(0);r.encryptBlock(a,0),o[n-1]=o[n-1]+1|0;for(var s=0;n>s;s++)e[t+s]^=a[s]}});return t.Decryptor=r,t}(),e.mode.CTR})},{"./cipher-core":19,"./core":20}],33:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.mode.ECB=function(){var t=e.lib.BlockCipherMode.extend();return t.Encryptor=t.extend({processBlock:function(e,t){this._cipher.encryptBlock(e,t)}}),t.Decryptor=t.extend({processBlock:function(e,t){this._cipher.decryptBlock(e,t)}}),t}(),e.mode.ECB})},{"./cipher-core":19,"./core":20}],34:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.mode.OFB=function(){var t=e.lib.BlockCipherMode.extend(),r=t.Encryptor=t.extend({processBlock:function(e,t){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var a=0;n>a;a++)e[t+a]^=o[a]}});return t.Decryptor=r,t}(),e.mode.OFB})},{"./cipher-core":19,"./core":20}],35:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.pad.AnsiX923={pad:function(e,t){var r=e.sigBytes,n=4*t,i=n-r%n,o=r+i-1;e.clamp(),e.words[o>>>2]|=i<<24-o%4*8,e.sigBytes+=i},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Ansix923})},{"./cipher-core":19,"./core":20}],36:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.pad.Iso10126={pad:function(t,r){var n=4*r,i=n-t.sigBytes%n;t.concat(e.lib.WordArray.random(i-1)).concat(e.lib.WordArray.create([i<<24],1))},unpad:function(e){var t=255&e.words[e.sigBytes-1>>>2];e.sigBytes-=t}},e.pad.Iso10126})},{"./cipher-core":19,"./core":20}],37:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.pad.Iso97971={pad:function(t,r){t.concat(e.lib.WordArray.create([2147483648],1)),e.pad.ZeroPadding.pad(t,r)},unpad:function(t){e.pad.ZeroPadding.unpad(t),t.sigBytes--}},e.pad.Iso97971})},{"./cipher-core":19,"./core":20}],38:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.pad.NoPadding={pad:function(){},unpad:function(){}},e.pad.NoPadding})},{"./cipher-core":19,"./core":20}],39:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return e.pad.ZeroPadding={pad:function(e,t){var r=4*t;e.clamp(),e.sigBytes+=r-(e.sigBytes%r||r)},unpad:function(e){for(var t=e.words,r=e.sigBytes-1;!(t[r>>>2]>>>24-r%4*8&255);)r--;e.sigBytes=r+1}},e.pad.ZeroPadding})},{"./cipher-core":19,"./core":20}],40:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./sha1"),t("./hmac")):"function"==typeof e&&e.amd?e(["./core","./sha1","./hmac"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.Base,i=r.WordArray,o=t.algo,a=o.SHA1,s=o.HMAC,u=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:a,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){for(var r=this.cfg,n=s.create(r.hasher,e),o=i.create(),a=i.create([1]),u=o.words,c=a.words,f=r.keySize,l=r.iterations;u.length<f;){var h=n.update(t).finalize(a);n.reset();for(var p=h.words,d=p.length,y=h,g=1;l>g;g++){y=n.finalize(y),n.reset();for(var v=y.words,B=0;d>B;B++)p[B]^=v[B]}o.concat(h),c[0]++}return o.sigBytes=4*f,o}});t.PBKDF2=function(e,t,r){return u.create(r).compute(e,t)}}(),e.PBKDF2})},{"./core":20,"./hmac":26,"./sha1":45}],41:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(){for(var e=this._X,t=this._C,r=0;8>r;r++)s[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var r=0;8>r;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,c=((4294901760&n)*n|0)+((65535&n)*n|0);u[r]=a^c}e[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,e[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,e[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,e[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,e[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,e[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,e[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,e[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=[],s=[],u=[],c=o.RabbitLegacy=i.extend({_doReset:function(){var e=this._key.words,r=this.cfg.iv,n=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],i=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];
this._b=0;for(var o=0;4>o;o++)t.call(this);for(var o=0;8>o;o++)i[o]^=n[o+4&7];if(r){var a=r.words,s=a[0],u=a[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),l=c>>>16|4294901760&f,h=f<<16|65535&c;i[0]^=c,i[1]^=l,i[2]^=f,i[3]^=h,i[4]^=c,i[5]^=l,i[6]^=f,i[7]^=h;for(var o=0;4>o;o++)t.call(this)}},_doProcessBlock:function(e,r){var n=this._X;t.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;4>i;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[r+i]^=a[i]},blockSize:4,ivSize:2});r.RabbitLegacy=i._createHelper(c)}(),e.RabbitLegacy})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],42:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(){for(var e=this._X,t=this._C,r=0;8>r;r++)s[r]=t[r];t[0]=t[0]+1295307597+this._b|0,t[1]=t[1]+3545052371+(t[0]>>>0<s[0]>>>0?1:0)|0,t[2]=t[2]+886263092+(t[1]>>>0<s[1]>>>0?1:0)|0,t[3]=t[3]+1295307597+(t[2]>>>0<s[2]>>>0?1:0)|0,t[4]=t[4]+3545052371+(t[3]>>>0<s[3]>>>0?1:0)|0,t[5]=t[5]+886263092+(t[4]>>>0<s[4]>>>0?1:0)|0,t[6]=t[6]+1295307597+(t[5]>>>0<s[5]>>>0?1:0)|0,t[7]=t[7]+3545052371+(t[6]>>>0<s[6]>>>0?1:0)|0,this._b=t[7]>>>0<s[7]>>>0?1:0;for(var r=0;8>r;r++){var n=e[r]+t[r],i=65535&n,o=n>>>16,a=((i*i>>>17)+i*o>>>15)+o*o,c=((4294901760&n)*n|0)+((65535&n)*n|0);u[r]=a^c}e[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,e[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,e[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,e[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,e[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,e[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,e[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,e[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=[],s=[],u=[],c=o.Rabbit=i.extend({_doReset:function(){for(var e=this._key.words,r=this.cfg.iv,n=0;4>n;n++)e[n]=16711935&(e[n]<<8|e[n]>>>24)|4278255360&(e[n]<<24|e[n]>>>8);var i=this._X=[e[0],e[3]<<16|e[2]>>>16,e[1],e[0]<<16|e[3]>>>16,e[2],e[1]<<16|e[0]>>>16,e[3],e[2]<<16|e[1]>>>16],o=this._C=[e[2]<<16|e[2]>>>16,4294901760&e[0]|65535&e[1],e[3]<<16|e[3]>>>16,4294901760&e[1]|65535&e[2],e[0]<<16|e[0]>>>16,4294901760&e[2]|65535&e[3],e[1]<<16|e[1]>>>16,4294901760&e[3]|65535&e[0]];this._b=0;for(var n=0;4>n;n++)t.call(this);for(var n=0;8>n;n++)o[n]^=i[n+4&7];if(r){var a=r.words,s=a[0],u=a[1],c=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),f=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),l=c>>>16|4294901760&f,h=f<<16|65535&c;o[0]^=c,o[1]^=l,o[2]^=f,o[3]^=h,o[4]^=c,o[5]^=l,o[6]^=f,o[7]^=h;for(var n=0;4>n;n++)t.call(this)}},_doProcessBlock:function(e,r){var n=this._X;t.call(this),a[0]=n[0]^n[5]>>>16^n[3]<<16,a[1]=n[2]^n[7]>>>16^n[5]<<16,a[2]=n[4]^n[1]>>>16^n[7]<<16,a[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;4>i;i++)a[i]=16711935&(a[i]<<8|a[i]>>>24)|4278255360&(a[i]<<24|a[i]>>>8),e[r+i]^=a[i]},blockSize:4,ivSize:2});r.Rabbit=i._createHelper(c)}(),e.Rabbit})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],43:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(){for(var e=this._S,t=this._i,r=this._j,n=0,i=0;4>i;i++){t=(t+1)%256,r=(r+e[t])%256;var o=e[t];e[t]=e[r],e[r]=o,n|=e[(e[t]+e[r])%256]<<24-8*i}return this._i=t,this._j=r,n}var r=e,n=r.lib,i=n.StreamCipher,o=r.algo,a=o.RC4=i.extend({_doReset:function(){for(var e=this._key,t=e.words,r=e.sigBytes,n=this._S=[],i=0;256>i;i++)n[i]=i;for(var i=0,o=0;256>i;i++){var a=i%r,s=t[a>>>2]>>>24-a%4*8&255;o=(o+n[i]+s)%256;var u=n[i];n[i]=n[o],n[o]=u}this._i=this._j=0},_doProcessBlock:function(e,r){e[r]^=t.call(this)},keySize:8,ivSize:0});r.RC4=i._createHelper(a);var s=o.RC4Drop=a.extend({cfg:a.cfg.extend({drop:192}),_doReset:function(){a._doReset.call(this);for(var e=this.cfg.drop;e>0;e--)t.call(this)}});r.RC4Drop=i._createHelper(s)}(),e.RC4})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],44:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(e,t,r){return e^t^r}function r(e,t,r){return e&t|~e&r}function n(e,t,r){return(e|~t)^r}function i(e,t,r){return e&r|t&~r}function o(e,t,r){return e^(t|~r)}function a(e,t){return e<<t|e>>>32-t}var s=e,u=s.lib,c=u.WordArray,f=u.Hasher,l=s.algo,h=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),y=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),g=c.create([0,1518500249,1859775393,2400959708,2840853838]),v=c.create([1352829926,1548603684,1836072691,2053994217,0]),B=l.RIPEMD160=f.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,s){for(var u=0;16>u;u++){var c=s+u,f=e[c];e[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}var l,B,m,P,b,w,F,_,S,k,E=this._hash.words,D=g.words,T=v.words,C=h.words,A=p.words,x=d.words,O=y.words;w=l=E[0],F=B=E[1],_=m=E[2],S=P=E[3],k=b=E[4];for(var I,u=0;80>u;u+=1)I=l+e[s+C[u]]|0,I+=16>u?t(B,m,P)+D[0]:32>u?r(B,m,P)+D[1]:48>u?n(B,m,P)+D[2]:64>u?i(B,m,P)+D[3]:o(B,m,P)+D[4],I=0|I,I=a(I,x[u]),I=I+b|0,l=b,b=P,P=a(m,10),m=B,B=I,I=w+e[s+A[u]]|0,I+=16>u?o(F,_,S)+T[0]:32>u?i(F,_,S)+T[1]:48>u?n(F,_,S)+T[2]:64>u?r(F,_,S)+T[3]:t(F,_,S)+T[4],I=0|I,I=a(I,O[u]),I=I+k|0,w=k,k=S,S=a(_,10),_=F,F=I;I=E[1]+m+S|0,E[1]=E[2]+P+k|0,E[2]=E[3]+b+w|0,E[3]=E[4]+l+F|0,E[4]=E[0]+B+_|0,E[0]=I},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),e.sigBytes=4*(t.length+1),this._process();for(var i=this._hash,o=i.words,a=0;5>a;a++){var s=o[a];o[a]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8)}return i},clone:function(){var e=f.clone.call(this);return e._hash=this._hash.clone(),e}});s.RIPEMD160=f._createHelper(B),s.HmacRIPEMD160=f._createHmacHelper(B)}(Math),e.RIPEMD160})},{"./core":20}],45:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=r.Hasher,o=t.algo,a=[],s=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],u=r[4],c=0;80>c;c++){if(16>c)a[c]=0|e[t+c];else{var f=a[c-3]^a[c-8]^a[c-14]^a[c-16];a[c]=f<<1|f>>>31}var l=(n<<5|n>>>27)+u+a[c];l+=20>c?(i&o|~i&s)+1518500249:40>c?(i^o^s)+1859775393:60>c?(i&o|i&s|o&s)-1894007588:(i^o^s)-899497514,u=s,s=o,o=i<<30|i>>>2,i=n,n=l}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+u|0},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),t[(n+64>>>9<<4)+15]=r,e.sigBytes=4*t.length,this._process(),this._hash},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e}});t.SHA1=i._createHelper(s),t.HmacSHA1=i._createHmacHelper(s)}(),e.SHA1})},{"./core":20}],46:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./sha256")):"function"==typeof e&&e.amd?e(["./core","./sha256"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.lib,n=r.WordArray,i=t.algo,o=i.SHA256,a=i.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var e=o._doFinalize.call(this);return e.sigBytes-=4,e}});t.SHA224=o._createHelper(a),t.HmacSHA224=o._createHmacHelper(a)}(),e.SHA224})},{"./core":20,"./sha256":47}],47:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.algo,s=[],u=[];!function(){function e(e){for(var r=t.sqrt(e),n=2;r>=n;n++)if(!(e%n))return!1;return!0}function r(e){return 4294967296*(e-(0|e))|0}for(var n=2,i=0;64>i;)e(n)&&(8>i&&(s[i]=r(t.pow(n,.5))),u[i]=r(t.pow(n,1/3)),i++),n++}();var c=[],f=a.SHA256=o.extend({_doReset:function(){this._hash=new i.init(s.slice(0))},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],f=r[5],l=r[6],h=r[7],p=0;64>p;p++){if(16>p)c[p]=0|e[t+p];else{var d=c[p-15],y=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,g=c[p-2],v=(g<<15|g>>>17)^(g<<13|g>>>19)^g>>>10;c[p]=y+c[p-7]+v+c[p-16]}var B=s&f^~s&l,m=n&i^n&o^i&o,P=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=(s<<26|s>>>6)^(s<<21|s>>>11)^(s<<7|s>>>25),w=h+b+B+u[p]+c[p],F=P+m;h=l,l=f,f=s,s=a+w|0,a=o,o=i,i=n,n=w+F|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+s|0,r[5]=r[5]+f|0,r[6]=r[6]+l|0,r[7]=r[7]+h|0},_doFinalize:function(){var e=this._data,r=e.words,n=8*this._nDataBytes,i=8*e.sigBytes;return r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=t.floor(n/4294967296),r[(i+64>>>9<<4)+15]=n,e.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var e=o.clone.call(this);return e._hash=this._hash.clone(),e}});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),e.SHA256})},{"./core":20}],48:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./x64-core")):"function"==typeof e&&e.amd?e(["./core","./x64-core"],o):o(i.CryptoJS)}(this,function(e){return function(t){var r=e,n=r.lib,i=n.WordArray,o=n.Hasher,a=r.x64,s=a.Word,u=r.algo,c=[],f=[],l=[];!function(){for(var e=1,t=0,r=0;24>r;r++){c[e+5*t]=(r+1)*(r+2)/2%64;var n=t%5,i=(2*e+3*t)%5;e=n,t=i}for(var e=0;5>e;e++)for(var t=0;5>t;t++)f[e+5*t]=t+(2*e+3*t)%5*5;for(var o=1,a=0;24>a;a++){for(var u=0,h=0,p=0;7>p;p++){if(1&o){var d=(1<<p)-1;32>d?h^=1<<d:u^=1<<d-32}128&o?o=o<<1^113:o<<=1}l[a]=s.create(u,h)}}();var h=[];!function(){for(var e=0;25>e;e++)h[e]=s.create()}();var p=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var e=this._state=[],t=0;25>t;t++)e[t]=new s.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(e,t){for(var r=this._state,n=this.blockSize/2,i=0;n>i;i++){var o=e[t+2*i],a=e[t+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),a=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8);var s=r[i];s.high^=a,s.low^=o}for(var u=0;24>u;u++){for(var p=0;5>p;p++){for(var d=0,y=0,g=0;5>g;g++){var s=r[p+5*g];d^=s.high,y^=s.low}var v=h[p];v.high=d,v.low=y}for(var p=0;5>p;p++)for(var B=h[(p+4)%5],m=h[(p+1)%5],P=m.high,b=m.low,d=B.high^(P<<1|b>>>31),y=B.low^(b<<1|P>>>31),g=0;5>g;g++){var s=r[p+5*g];s.high^=d,s.low^=y}for(var w=1;25>w;w++){var s=r[w],F=s.high,_=s.low,S=c[w];if(32>S)var d=F<<S|_>>>32-S,y=_<<S|F>>>32-S;else var d=_<<S-32|F>>>64-S,y=F<<S-32|_>>>64-S;var k=h[f[w]];k.high=d,k.low=y}var E=h[0],D=r[0];E.high=D.high,E.low=D.low;for(var p=0;5>p;p++)for(var g=0;5>g;g++){var w=p+5*g,s=r[w],T=h[w],C=h[(p+1)%5+5*g],A=h[(p+2)%5+5*g];s.high=T.high^~C.high&A.high,s.low=T.low^~C.low&A.low}var s=r[0],x=l[u];s.high^=x.high,s.low^=x.low}},_doFinalize:function(){var e=this._data,r=e.words,n=(8*this._nDataBytes,8*e.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(t.ceil((n+1)/o)*o>>>5)-1]|=128,e.sigBytes=4*r.length,this._process();for(var a=this._state,s=this.cfg.outputLength/8,u=s/8,c=[],f=0;u>f;f++){var l=a[f],h=l.high,p=l.low;h=16711935&(h<<8|h>>>24)|4278255360&(h<<24|h>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(h)}return new i.init(c,s)},clone:function(){for(var e=o.clone.call(this),t=e._state=this._state.slice(0),r=0;25>r;r++)t[r]=t[r].clone();return e}});r.SHA3=o._createHelper(p),r.HmacSHA3=o._createHmacHelper(p)}(Math),e.SHA3})},{"./core":20,"./x64-core":52}],49:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./x64-core"),t("./sha512")):"function"==typeof e&&e.amd?e(["./core","./x64-core","./sha512"],o):o(i.CryptoJS)}(this,function(e){return function(){var t=e,r=t.x64,n=r.Word,i=r.WordArray,o=t.algo,a=o.SHA512,s=o.SHA384=a.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var e=a._doFinalize.call(this);return e.sigBytes-=16,e}});t.SHA384=a._createHelper(s),t.HmacSHA384=a._createHmacHelper(s)}(),e.SHA384})},{"./core":20,"./sha512":50,"./x64-core":52}],50:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./x64-core")):"function"==typeof e&&e.amd?e(["./core","./x64-core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(){return a.create.apply(a,arguments)}var r=e,n=r.lib,i=n.Hasher,o=r.x64,a=o.Word,s=o.WordArray,u=r.algo,c=[t(1116352408,3609767458),t(1899447441,602891725),t(3049323471,3964484399),t(3921009573,2173295548),t(961987163,4081628472),t(1508970993,3053834265),t(2453635748,2937671579),t(2870763221,3664609560),t(3624381080,2734883394),t(310598401,1164996542),t(607225278,1323610764),t(1426881987,3590304994),t(1925078388,4068182383),t(2162078206,991336113),t(2614888103,633803317),t(3248222580,3479774868),t(3835390401,2666613458),t(4022224774,944711139),t(264347078,2341262773),t(604807628,2007800933),t(770255983,1495990901),t(1249150122,1856431235),t(1555081692,3175218132),t(1996064986,2198950837),t(2554220882,3999719339),t(2821834349,766784016),t(2952996808,2566594879),t(3210313671,3203337956),t(3336571891,1034457026),t(3584528711,2466948901),t(113926993,3758326383),t(338241895,168717936),t(666307205,1188179964),t(773529912,1546045734),t(1294757372,1522805485),t(1396182291,2643833823),t(1695183700,2343527390),t(1986661051,1014477480),t(2177026350,1206759142),t(2456956037,344077627),t(2730485921,1290863460),t(2820302411,3158454273),t(3259730800,3505952657),t(3345764771,106217008),t(3516065817,3606008344),t(3600352804,1432725776),t(4094571909,1467031594),t(275423344,851169720),t(430227734,3100823752),t(506948616,1363258195),t(659060556,3750685593),t(883997877,3785050280),t(958139571,3318307427),t(1322822218,3812723403),t(1537002063,2003034995),t(1747873779,3602036899),t(1955562222,1575990012),t(2024104815,1125592928),t(2227730452,2716904306),t(2361852424,442776044),t(2428436474,593698344),t(2756734187,3733110249),t(3204031479,2999351573),t(3329325298,3815920427),t(3391569614,3928383900),t(3515267271,566280711),t(3940187606,3454069534),t(4118630271,4000239992),t(116418474,1914138554),t(174292421,2731055270),t(289380356,3203993006),t(460393269,320620315),t(685471733,587496836),t(852142971,1086792851),t(1017036298,365543100),t(1126000580,2618297676),t(1288033470,3409855158),t(1501505948,4234509866),t(1607167915,987167468),t(1816402316,1246189591)],f=[];!function(){for(var e=0;80>e;e++)f[e]=t()}();var l=u.SHA512=i.extend({_doReset:function(){this._hash=new s.init([new a.init(1779033703,4089235720),new a.init(3144134277,2227873595),new a.init(1013904242,4271175723),new a.init(2773480762,1595750129),new a.init(1359893119,2917565137),new a.init(2600822924,725511199),new a.init(528734635,4215389547),new a.init(1541459225,327033209)])},_doProcessBlock:function(e,t){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],s=r[4],u=r[5],l=r[6],h=r[7],p=n.high,d=n.low,y=i.high,g=i.low,v=o.high,B=o.low,m=a.high,P=a.low,b=s.high,w=s.low,F=u.high,_=u.low,S=l.high,k=l.low,E=h.high,D=h.low,T=p,C=d,A=y,x=g,O=v,I=B,U=m,M=P,N=b,R=w,H=F,L=_,j=S,z=k,q=E,K=D,V=0;80>V;V++){var G=f[V];if(16>V)var J=G.high=0|e[t+2*V],W=G.low=0|e[t+2*V+1];else{var Z=f[V-15],Q=Z.high,X=Z.low,Y=(Q>>>1|X<<31)^(Q>>>8|X<<24)^Q>>>7,$=(X>>>1|Q<<31)^(X>>>8|Q<<24)^(X>>>7|Q<<25),et=f[V-2],tt=et.high,rt=et.low,nt=(tt>>>19|rt<<13)^(tt<<3|rt>>>29)^tt>>>6,it=(rt>>>19|tt<<13)^(rt<<3|tt>>>29)^(rt>>>6|tt<<26),ot=f[V-7],at=ot.high,st=ot.low,ut=f[V-16],ct=ut.high,ft=ut.low,W=$+st,J=Y+at+($>>>0>W>>>0?1:0),W=W+it,J=J+nt+(it>>>0>W>>>0?1:0),W=W+ft,J=J+ct+(ft>>>0>W>>>0?1:0);G.high=J,G.low=W}var lt=N&H^~N&j,ht=R&L^~R&z,pt=T&A^T&O^A&O,dt=C&x^C&I^x&I,yt=(T>>>28|C<<4)^(T<<30|C>>>2)^(T<<25|C>>>7),gt=(C>>>28|T<<4)^(C<<30|T>>>2)^(C<<25|T>>>7),vt=(N>>>14|R<<18)^(N>>>18|R<<14)^(N<<23|R>>>9),Bt=(R>>>14|N<<18)^(R>>>18|N<<14)^(R<<23|N>>>9),mt=c[V],Pt=mt.high,bt=mt.low,wt=K+Bt,Ft=q+vt+(K>>>0>wt>>>0?1:0),wt=wt+ht,Ft=Ft+lt+(ht>>>0>wt>>>0?1:0),wt=wt+bt,Ft=Ft+Pt+(bt>>>0>wt>>>0?1:0),wt=wt+W,Ft=Ft+J+(W>>>0>wt>>>0?1:0),_t=gt+dt,St=yt+pt+(gt>>>0>_t>>>0?1:0);q=j,K=z,j=H,z=L,H=N,L=R,R=M+wt|0,N=U+Ft+(M>>>0>R>>>0?1:0)|0,U=O,M=I,O=A,I=x,A=T,x=C,C=wt+_t|0,T=Ft+St+(wt>>>0>C>>>0?1:0)|0}d=n.low=d+C,n.high=p+T+(C>>>0>d>>>0?1:0),g=i.low=g+x,i.high=y+A+(x>>>0>g>>>0?1:0),B=o.low=B+I,o.high=v+O+(I>>>0>B>>>0?1:0),P=a.low=P+M,a.high=m+U+(M>>>0>P>>>0?1:0),w=s.low=w+R,s.high=b+N+(R>>>0>w>>>0?1:0),_=u.low=_+L,u.high=F+H+(L>>>0>_>>>0?1:0),k=l.low=k+z,l.high=S+j+(z>>>0>k>>>0?1:0),D=h.low=D+K,h.high=E+q+(K>>>0>D>>>0?1:0)},_doFinalize:function(){var e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;t[n>>>5]|=128<<24-n%32,t[(n+128>>>10<<5)+30]=Math.floor(r/4294967296),t[(n+128>>>10<<5)+31]=r,e.sigBytes=4*t.length,this._process();var i=this._hash.toX32();return i},clone:function(){var e=i.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:32});r.SHA512=i._createHelper(l),r.HmacSHA512=i._createHmacHelper(l)}(),e.SHA512})},{"./core":20,"./x64-core":52}],51:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core"),t("./enc-base64"),t("./md5"),t("./evpkdf"),t("./cipher-core")):"function"==typeof e&&e.amd?e(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(e){return function(){function t(e,t){var r=(this._lBlock>>>e^this._rBlock)&t;this._rBlock^=r,this._lBlock^=r<<e}function r(e,t){var r=(this._rBlock>>>e^this._lBlock)&t;this._lBlock^=r,this._rBlock^=r<<e}var n=e,i=n.lib,o=i.WordArray,a=i.BlockCipher,s=n.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],l=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],h=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=s.DES=a.extend({_doReset:function(){for(var e=this._key,t=e.words,r=[],n=0;56>n;n++){var i=u[n]-1;r[n]=t[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],a=0;16>a;a++){for(var s=o[a]=[],l=f[a],n=0;24>n;n++)s[n/6|0]|=r[(c[n]-1+l)%28]<<31-n%6,s[4+(n/6|0)]|=r[28+(c[n+24]-1+l)%28]<<31-n%6;s[0]=s[0]<<1|s[0]>>>31;for(var n=1;7>n;n++)s[n]=s[n]>>>4*(n-1)+3;s[7]=s[7]<<5|s[7]>>>27}for(var h=this._invSubKeys=[],n=0;16>n;n++)h[n]=o[15-n]},encryptBlock:function(e,t){this._doCryptBlock(e,t,this._subKeys)},decryptBlock:function(e,t){this._doCryptBlock(e,t,this._invSubKeys)},_doCryptBlock:function(e,n,i){this._lBlock=e[n],this._rBlock=e[n+1],t.call(this,4,252645135),t.call(this,16,65535),r.call(this,2,858993459),r.call(this,8,16711935),t.call(this,1,1431655765);for(var o=0;16>o;o++){for(var a=i[o],s=this._lBlock,u=this._rBlock,c=0,f=0;8>f;f++)c|=l[f][((u^a[f])&h[f])>>>0];this._lBlock=u,this._rBlock=s^c}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,t.call(this,1,1431655765),r.call(this,8,16711935),r.call(this,2,858993459),t.call(this,16,65535),t.call(this,4,252645135),e[n]=this._lBlock,e[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=a._createHelper(p);var d=s.TripleDES=a.extend({_doReset:function(){var e=this._key,t=e.words;this._des1=p.createEncryptor(o.create(t.slice(0,2))),this._des2=p.createEncryptor(o.create(t.slice(2,4))),this._des3=p.createEncryptor(o.create(t.slice(4,6)))},encryptBlock:function(e,t){this._des1.encryptBlock(e,t),this._des2.decryptBlock(e,t),this._des3.encryptBlock(e,t)},decryptBlock:function(e,t){this._des3.decryptBlock(e,t),this._des2.encryptBlock(e,t),this._des1.decryptBlock(e,t)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=a._createHelper(d)}(),e.TripleDES})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],52:[function(t,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(t("./core")):"function"==typeof e&&e.amd?e(["./core"],o):o(i.CryptoJS)}(this,function(e){return function(t){{var r=e,n=r.lib,i=n.Base,o=n.WordArray,a=r.x64={};a.Word=i.extend({init:function(e,t){this.high=e,this.low=t}}),a.WordArray=i.extend({init:function(e,r){e=this.words=e||[],this.sigBytes=r!=t?r:8*e.length},toX32:function(){for(var e=this.words,t=e.length,r=[],n=0;t>n;n++){var i=e[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var e=i.clone.call(this),t=e.words=this.words.slice(0),r=t.length,n=0;r>n;n++)t[n]=t[n].clone();return e}})}}(),e})},{"./core":20}],53:[function(t,r){(function(n){!function(i){"use strict";function o(e,t){if(t=t||{},"undefined"!=typeof n&&"number"==typeof n.pid)return a(e,t);if(!window.crypto)throw new Error("Your browser does not support window.crypto.");return s(e,t)}function a(e,r){var n=t("crypto"),i=n.randomBytes(e);if(r.array)var o=[];else var o=new Uint8Array(e);for(var a=0;e>a;++a)o[a]=i.readUInt8(a);return o}function s(e,t){var r=new Uint8Array(e);if(window.crypto.getRandomValues(r),t.array)for(var n=[],i=0;i<r.length;++i)n[i]=r[i];else n=r;return n}"undefined"!=typeof e&&e.amd?e([],function(){return o}):"undefined"!=typeof r&&r.exports?r.exports=o:i.secureRandom=o}(this)}).call(this,t("FWaASH"))},{FWaASH:15,crypto:4}],54:[function(e,t){function r(e,t){if(!(this instanceof r))return new r(e,t);if(e instanceof r)this.hash=e.hash,this.version=e.version;else if("string"==typeof e)if(e.length<=35){var n=i.decode(e);this.hash=n.payload,this.version=n.version}else e.length<=40?(this.hash=o.hexToBytes(e),this.version=t||s):a("invalid or unrecognized input");else this.hash=e,this.version=t||s}var n=e("./base58"),i=e("./base58check"),o=e("./convert"),a=e("./util").error,s=e("./network").mainnet.addressVersion;r.prototype.toString=function(){return i.encode(this.hash.slice(0),this.version)},r.getVersion=function(e){return n.decode(e)[0]},r.validate=function(e){try{return i.decode(e),!0}catch(t){return!1}},t.exports=r},{"./base58":55,"./base58check":56,"./convert":57,"./network":66,"./util":70}],55:[function(e,t){(function(r){function n(e){for(var t=o.fromByteArrayUnsigned(e),r=[];t.compareTo(s)>=0;){var n=t.mod(s);t=t.subtract(n).divide(s),r.push(a[n.intValue()])}r.push(a[t.intValue()]);for(var i=0;i<e.length&&0===e[i];i++)r.push(a[0]);return r.reverse().join("")}function i(e){for(var t=o.valueOf(0),n=0,i=!1,a=0;a<e.length;++a){var c=e[a],f=u[c];if(void 0===f)throw new Error("invalid base58 string: "+e);t=t.multiply(s).add(f),"1"!==c||i?i=!0:++n}for(var l=t.toByteArrayUnsigned();n-->0;)l.unshift(0);return new r(l)}for(var o=e("./jsbn/jsbn"),a="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",s=o.valueOf(58),u={},c=0;c<a.length;++c){var f=a[c];u[f]=o.valueOf(c)}t.exports={encode:n,decode:i}}).call(this,e("buffer").Buffer)},{"./jsbn/jsbn":63,buffer:5}],56:[function(e,t){(function(r){function n(e){var t=u.createHash("sha256");return t.update(e),t.digest()
}function i(e,t){t=t||0;var t=new r([t]),i=new r(e),o=r.concat([t,i]),a=n(n(o)).slice(0,4);return s.encode(r.concat([o,a]))}function o(e){var t=s.decode(e),r=t.slice(0,-4),i=t.slice(-4),o=n(n(r)).slice(0,4);a.deepEqual(o,i);var u=r.readUInt8(0),c=r.slice(1);return{version:u,payload:c,checksum:i}}var a=e("assert"),s=e("./base58"),u=e("crypto");t.exports={encode:i,decode:o}}).call(this,e("buffer").Buffer)},{"./base58":55,assert:1,buffer:5,crypto:9}],57:[function(e,t){(function(r){function n(e,t,r){for(;e.length<r;)e=t+e;return e}function i(e){return r.isBuffer(e)?e.toString("hex"):e.map(function(e){return n(e.toString(16),"0",2)}).join("")}function o(e){return e.match(/../g).map(function(e){return parseInt(e,16)})}function a(e){for(var t=[],r=0;r<e.length;r+=3)for(var n=e[r]<<16|e[r+1]<<8|e[r+2],i=0;4>i;i++)t.push(8*r+6*i<=8*e.length?_.charAt(n>>>6*(3-i)&63):"=");return t.join("")}function s(e){e=e.replace(/[^A-Z0-9+\/]/gi,"");for(var t=[],r=0,n=0;n<e.length;r=++n%4)r&&t.push((_.indexOf(e.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|_.indexOf(e.charAt(n))>>>6-2*r);return t}function u(e){return"string"!=typeof e?e:o(e)}function c(e){return e.match(/......../g).map(function(e){return parseInt(e,2)})}function f(e){return e.map(function(e){return n(e.toString(2),"0",8)}).join("")}function l(e){return e.map(function(e){return String.fromCharCode(e)}).join("")}function h(e){return e.split("").map(function(e){return e.charCodeAt(0)})}function p(e,t){return void 0===t&&(t=8),0===t?[]:[e%256].concat(p(Math.floor(e/256),t-1))}function d(e){return 0===e.length?0:e[0]+256*d(e.slice(1))}function y(e){return 253>e?[e]:65536>e?[253].concat(p(e,2)):4294967296>e?[254].concat(p(e,4)):[255].concat(p(e,8))}function g(e){var t=e[0],r=253>t?e.slice(0,1):253===t?e.slice(1,3):254===t?e.slice(1,5):e.slice(1,9);return{bytes:253>t?r:e.slice(0,r.length+1),number:d(r)}}function v(e){for(var t=[],r=0,n=0;r<e.length;r++,n+=8)t[n>>>5]|=e[r]<<24-n%32;return t}function B(e){for(var t=[],r=0;r<32*e.length;r+=8)t.push(e[r>>>5]>>>24-r%32&255);return t}function m(e){return new F.init(v(e),e.length)}function P(e){return B(e.words)}function b(e){return i(o(e).reverse())}var w=e("crypto-js"),F=w.lib.WordArray,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";t.exports={lpad:n,bytesToHex:i,hexToBytes:o,bytesToBase64:a,base64ToBytes:s,coerceToBytes:u,binToBytes:c,bytesToBin:f,bytesToString:l,stringToBytes:h,numToBytes:p,bytesToNum:d,numToVarInt:y,varIntToNum:g,bytesToWords:v,wordsToBytes:B,bytesToWordArray:m,wordArrayToBytes:P,reverseEndian:b}}).call(this,e("buffer").Buffer)},{buffer:5,"crypto-js":27}],58:[function(e,t){function r(e,t,r,n){for(var i=Math.max(t.bitLength(),n.bitLength()),o=e.add2D(r),s=e.curve.getInfinity(),u=i-1;u>=0;--u)s=s.twice2D(),s.z=a.ONE,t.testBit(u)?s=s.add2D(n.testBit(u)?o:e):n.testBit(u)&&(s=s.add2D(r));return s}function n(e,t){for(var r=[],n=[],i=0;32>i;i++)r.push(1);for(var i=0;32>i;i++)n.push(0);var o=s.bytesToWordArray(r),c=s.bytesToWordArray(n);return c=u(s.bytesToWordArray(r.concat([0]).concat(t).concat(e)),c),o=u(o,c),r=s.wordArrayToBytes(o),c=u(s.bytesToWordArray(r.concat([1]).concat(t).concat(e)),c),o=u(o,c),o=u(o,c),r=s.wordArrayToBytes(o),a.fromByteArrayUnsigned(r)}var i=e("./jsbn/sec"),o=e("secure-random"),a=e("./jsbn/jsbn"),s=e("./convert"),u=e("crypto-js/hmac-sha256"),c=e("./jsbn/ec").ECPointFp,f=i("secp256k1"),l=null,h={getBigRandom:function(e){return new a(e.bitLength(),o).mod(e.subtract(a.ONE)).add(a.ONE)},sign:function(e,t){var r=t,i=f.getN(),o=a.fromByteArrayUnsigned(e),s=n(e,t.toByteArrayUnsigned()),u=f.getG(),c=u.multiply(s),l=c.getX().toBigInteger().mod(i),p=s.modInverse(i).multiply(o.add(r.multiply(l))).mod(i);return h.serializeSig(l,p)},verify:function(e,t,r){var n,i;if(Array.isArray(t)){var o=h.parseSig(t);n=o.r,i=o.s}else{if("object"!=typeof t||!t.r||!t.s)throw new Error("Invalid value for signature");n=t.r,i=t.s}var s;if(r instanceof c)s=r;else{if(!Array.isArray(r))throw new Error("Invalid format for pubkey value, must be byte array or ECPointFp");s=c.decodeFrom(f.getCurve(),r)}var u=a.fromByteArrayUnsigned(e);return h.verifyRaw(u,n,i,s)},verifyRaw:function(e,t,r,n){var i=f.getN(),o=f.getG();if(t.compareTo(a.ONE)<0||t.compareTo(i)>=0)return!1;if(r.compareTo(a.ONE)<0||r.compareTo(i)>=0)return!1;var s=r.modInverse(i),u=e.multiply(s).mod(i),c=t.multiply(s).mod(i),l=o.multiply(u).add(n.multiply(c)),h=l.getX().toBigInteger().mod(i);return h.equals(t)},serializeSig:function(e,t){var r=e.toByteArraySigned(),n=t.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),i=i.concat(r),i.push(2),i.push(n.length),i=i.concat(n),i.unshift(i.length),i.unshift(48),i},parseSig:function(e){var t;if(48!=e[0])throw new Error("Signature not a valid DERSequence");if(t=2,2!=e[t])throw new Error("First element in signature must be a DERInteger");var r=e.slice(t+2,t+2+e[t+1]);if(t+=2+e[t+1],2!=e[t])throw new Error("Second element in signature must be a DERInteger");var n=e.slice(t+2,t+2+e[t+1]);t+=2+e[t+1];var i=a.fromByteArrayUnsigned(r),o=a.fromByteArrayUnsigned(n);return{r:i,s:o}},parseSigCompact:function(e){if(65!==e.length)throw new Error("Signature has the wrong length");var t=e[0]-27;if(0>t||t>7)throw new Error("Invalid signature type");var r=f.getN(),n=a.fromByteArrayUnsigned(e.slice(1,33)).mod(r),i=a.fromByteArrayUnsigned(e.slice(33,65)).mod(r);return{r:n,s:i,i:t}},recoverPubKey:function(e,t,n,i){i=3&i;var o=1&i,s=i>>1,u=f.getN(),p=f.getG(),d=f.getCurve(),y=d.getQ(),g=d.getA().toBigInteger(),v=d.getB().toBigInteger();l||(l=y.add(a.ONE).divide(a.valueOf(4)));var B=s?e.add(u):e,m=B.multiply(B).multiply(B).add(g.multiply(B)).add(v).mod(y),P=m.modPow(l,y),b=(P.isEven()?!o:o)?P:y.subtract(P),w=new c(d,d.fromBigInteger(B),d.fromBigInteger(b));w.validate();var F=a.fromByteArrayUnsigned(n),_=a.ZERO.subtract(F).mod(u),S=e.modInverse(u),k=r(w,t,p,_).multiply(S);if(k.validate(),!h.verifyRaw(F,e,t,k))throw new Error("Pubkey recovery unsuccessful");return k},calcPubKeyRecoveryParam:function(e,t,r,n){for(var i=0;4>i;i++){var o=h.recoverPubKey(t,r,n,i);if(o.equals(e))return i}throw new Error("Unable to find valid recovery factor")}};t.exports=h},{"./convert":57,"./jsbn/ec":62,"./jsbn/jsbn":63,"./jsbn/sec":64,"crypto-js/hmac-sha256":25,"secure-random":53}],59:[function(e,t){var r=e("./address"),n=e("assert"),i=e("./convert"),o=e("./base58check"),a=e("./jsbn/jsbn"),s=e("./ecdsa"),u=e("./jsbn/ec").ECPointFp,c=e("./jsbn/sec"),f=e("./network"),l=e("./util"),h=c("secp256k1"),p=function(e,t){if(!(this instanceof p))return new p(e,t);if(e)this.import(e,t);else{var r=h.getN();this.priv=s.getBigRandom(r),this.compressed=t||!1}};p.prototype.import=function(e,t){function r(e,t){return e.indexOf(t)>=0}function s(e){return a.fromByteArrayUnsigned(e)}this.priv=e instanceof p?e.priv:e instanceof a?e.mod(h.getN()):Array.isArray(e)?s(e.slice(0,32)):"string"!=typeof e?null:44==e.length?s(i.base64ToBytes(e)):51==e.length&&"5"==e[0]?s(o.decode(e).payload):51==e.length&&"9"==e[0]?s(o.decode(e).payload):52==e.length&&r("LK",e[0])?s(o.decode(e).payload.slice(0,32)):52==e.length&&"c"==e[0]?s(o.decode(e).payload.slice(0,32)):r([64,65],e.length)?s(i.hexToBytes(e.slice(0,64))):null,n(null!==this.priv),this.compressed=void 0!==t?t:e instanceof p?e.compressed:e instanceof a?!1:Array.isArray(e)?!1:"string"!=typeof e?null:44==e.length?!1:51==e.length&&"5"==e[0]?!1:51==e.length&&"9"==e[0]?!1:52==e.length&&r("LK",e[0])?!0:52==e.length&&"c"==e[0]?!0:64==e.length?!1:65==e.length?!0:null,n(null!==this.compressed)},p.prototype.getPub=function(e){return void 0===e&&(e=this.compressed),d(h.getG().multiply(this.priv),e)},p.prototype.toBin=function(){return i.bytesToString(this.toBytes())},p.version_bytes={0:128,111:239},p.prototype.toWif=function(e){return e=e||f.mainnet.addressVersion,o.encode(this.toBytes(),p.version_bytes[e])},p.prototype.toHex=function(){return i.bytesToHex(this.toBytes())},p.prototype.toBytes=function(){var e=this.priv.toByteArrayUnsigned();return this.compressed&&e.push(1),e},p.prototype.toBase64=function(){return i.bytesToBase64(this.toBytes())},p.prototype.toString=p.prototype.toHex,p.prototype.getAddress=function(e){return this.getPub().getAddress(e)},p.prototype.add=function(e){return p(this.priv.add(p(e).priv),this.compressed)},p.prototype.multiply=function(e){return p(this.priv.multiply(p(e).priv),this.compressed)},p.prototype.sign=function(e){return s.sign(e,this.priv)},p.prototype.verify=function(e,t){return this.getPub().verify(e,t)};var d=function(e,t){return this instanceof d?void this.import(e,t):new d(e,t)};d.prototype.import=function(e,t){var r=function(e){return u.decodeFrom(h.getCurve(),e)};this.pub=e instanceof u?e:e instanceof p?h.getG().multiply(e.priv):e instanceof d?e.pub:"string"==typeof e?r(i.hexToBytes(e)):Array.isArray(e)?r(e):null,n(null!==this.pub),this.compressed=t?t:e instanceof u?e.compressed:e instanceof d?e.compressed:this.pub[0]<4},d.prototype.add=function(e){return d(this.pub.add(d(e).pub),this.compressed)},d.prototype.multiply=function(e){return d(this.pub.multiply(p(e).priv),this.compressed)},d.prototype.toBytes=function(e){return void 0===e&&(e=this.compressed),this.pub.getEncoded(e)},d.prototype.toHex=function(e){return i.bytesToHex(this.toBytes(e))},d.prototype.toBin=function(e){return i.bytesToString(this.toBytes(e))},d.prototype.toWif=function(e){return e=e||f.mainnet.addressVersion,o.encode(this.toBytes(),e)},d.prototype.toString=d.prototype.toHex,d.prototype.getAddress=function(e){return e=e||f.mainnet.addressVersion,new r(l.sha256ripe160(this.toBytes()),e)},d.prototype.verify=function(e,t){return s.verify(e,t,this.toBytes())},t.exports={ECKey:p,ECPubKey:d}},{"./address":54,"./base58check":56,"./convert":57,"./ecdsa":58,"./jsbn/ec":62,"./jsbn/jsbn":63,"./jsbn/sec":64,"./network":66,"./util":70,assert:1}],60:[function(e,t){(function(r){function n(e){var t=m.createHash("sha256");return t.update(e),t.digest()}function i(e,t){if(void 0!==e){var r=s.bytesToWordArray(e),n=s.wordArrayToBytes(p(r,"Bitcoin seed"));if(this.chaincode=n.slice(32),this.network=t||"mainnet",!B.hasOwnProperty(this.network))throw new Error("Unknown network: "+this.network);this.priv=new y(n.slice(0,32).concat([1]),!0),this.pub=this.priv.getPub(),this.index=0,this.depth=0}}function o(e,t){return!(t>e||e>t)}function a(e,t,r){var n=d.create(e,s.bytesToWordArray(r));return n.update(s.bytesToWordArray(t)),s.wordArrayToBytes(n.finalize())}var s=e("./convert.js"),u=e("./base58.js"),c=e("assert"),f=e("util").format,l=e("./util.js"),h=e("crypto-js"),p=h.HmacSHA512,d=h.algo.HMAC,y=e("./eckey.js").ECKey,g=e("./eckey.js").ECPubKey,v=e("./address.js"),B=e("./network"),m=e("crypto");i.HIGHEST_BIT=2147483648,i.LENGTH=78,i.fromSeedHex=function(e,t){return new i(s.hexToBytes(e),t)},i.fromSeedString=function(e,t){return new i(s.stringToBytes(e),t)},i.fromBase58=function(e){var t=u.decode(e),r=t.slice(0,-4),o=t.slice(-4),a=n(n(r)).slice(0,4);return c.deepEqual(a,o),c.equal(r.length,i.LENGTH),i.fromBytes(r)},i.fromHex=function(e){return i.fromBytes(s.hexToBytes(e))},i.fromBytes=function(e){if(e.length!=i.LENGTH)throw new Error(f("Invalid input length, %s. Expected %s.",e.length,i.LENGTH));r.isBuffer(e)&&(e=Array.prototype.map.bind(e,function(e){return e})());var t,n=new i,a=e.slice(0,4),u=s.bytesToWords(a)[0];for(var l in B){var h=B[l];for(var p in h.hdVersions)u==h.hdVersions[p]&&(t=p,n.network=l)}if(!n.network)throw new Error(f("Could not find version %s",s.bytesToHex(a)));return n.depth=e[4],n.parentFingerprint=e.slice(5,9),c(0===n.depth==o(n.parentFingerprint,[0,0,0,0])),n.index=s.bytesToNum(e.slice(9,13).reverse()),c(n.depth>0||0===n.index),n.chaincode=e.slice(13,45),"priv"==t?(n.priv=new y(e.slice(46,78).concat([1]),!0),n.pub=n.priv.getPub()):n.pub=new g(e.slice(45,78),!0),n},i.prototype.getIdentifier=function(){return l.sha256ripe160(this.pub.toBytes())},i.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)},i.prototype.getAddress=function(){return new v(l.sha256ripe160(this.pub.toBytes()),this.getKeyVersion())},i.prototype.toBytes=function(e){var t=[],r=B[this.network].hdVersions[e?"priv":"pub"],n=s.wordsToBytes([r]);return t=t.concat(n),c.equal(t.length,4),t.push(this.depth),c.equal(t.length,5),t=t.concat(this.depth?this.parentFingerprint:[0,0,0,0]),c.equal(t.length,9),t=t.concat(s.numToBytes(this.index,4).reverse()),c.equal(t.length,13),t=t.concat(this.chaincode),c.equal(t.length,45),e?(c(this.priv,"Cannot serialize to private without private key"),t.push(0),t=t.concat(this.priv.toBytes().slice(0,32))):t=t.concat(this.pub.toBytes(!0)),t},i.prototype.toHex=function(e){var t=this.toBytes(e);return s.bytesToHex(t)},i.prototype.toBase58=function(e){var t=new r(this.toBytes(e)),i=n(n(t)).slice(0,4);return u.encode(r.concat([t,i]))},i.prototype.derive=function(e){var t,r=s.numToBytes(e,4).reverse(),n=this.chaincode,o=e>=i.HIGHEST_BIT,u=h.algo.SHA512;if(o){c(this.priv,"Private derive on public key");var f=this.priv.toBytes().slice(0,32);t=a(u,[0].concat(f,r),n)}else{var l=this.pub.toBytes(!0);t=a(u,l.concat(r),n)}var p=t.slice(0,32),d=t.slice(32),g=new i;return g.network=this.network,this.priv?(g.priv=this.priv.add(new y(p.concat([1]))),g.priv.compressed=!0,g.priv.version=this.getKeyVersion(),g.pub=g.priv.getPub()):g.pub=this.pub.add(new y(p.concat([1]),!0).getPub()),g.chaincode=d,g.parentFingerprint=this.getFingerprint(),g.depth=this.depth+1,g.index=e,g.pub.compressed=!0,g},i.prototype.derivePrivate=function(e){return this.derive(e+i.HIGHEST_BIT)},i.prototype.getKeyVersion=function(){return B[this.network].addressVersion},i.prototype.toString=i.prototype.toBase58,t.exports=i}).call(this,e("buffer").Buffer)},{"./address.js":54,"./base58.js":55,"./convert.js":57,"./eckey.js":59,"./network":66,"./util.js":70,assert:1,buffer:5,crypto:9,"crypto-js":27,util:17}],61:[function(e,t){var r=e("./eckey"),n=e("./transaction");t.exports={Address:e("./address"),Key:r.ECKey,ECKey:r.ECKey,ECPubKey:r.ECPubKey,Message:e("./message"),BigInteger:e("./jsbn/jsbn"),Crypto:e("crypto-js"),Script:e("./script"),Opcode:e("./opcode"),Transaction:n.Transaction,Util:e("./util"),TransactionIn:n.TransactionIn,TransactionOut:n.TransactionOut,ECPointFp:e("./jsbn/ec").ECPointFp,Wallet:e("./wallet"),network:e("./network"),ecdsa:e("./ecdsa"),HDWallet:e("./hdwallet.js"),base58:e("./base58"),base58check:e("./base58check"),convert:e("./convert")}},{"./address":54,"./base58":55,"./base58check":56,"./convert":57,"./ecdsa":58,"./eckey":59,"./hdwallet.js":60,"./jsbn/ec":62,"./jsbn/jsbn":63,"./message":65,"./network":66,"./opcode":67,"./script":68,"./transaction":69,"./util":70,"./wallet":71,"crypto-js":27}],62:[function(e,t){function r(e,t){this.x=t,this.q=e}function n(e){return e==this?!0:this.q.equals(e.q)&&this.x.equals(e.x)}function i(){return this.x}function o(){return new r(this.q,this.x.negate().mod(this.q))}function a(e){return new r(this.q,this.x.add(e.toBigInteger()).mod(this.q))}function s(e){return new r(this.q,this.x.subtract(e.toBigInteger()).mod(this.q))}function u(e){return new r(this.q,this.x.multiply(e.toBigInteger()).mod(this.q))}function c(){return new r(this.q,this.x.square().mod(this.q))}function f(e){return new r(this.q,this.x.multiply(e.toBigInteger().modInverse(this.q)).mod(this.q))}function l(e,t,r,n){this.curve=e,this.x=t,this.y=r,this.z=null==n?C.ONE:n,this.zinv=null}function h(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function p(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function d(e){if(e==this)return!0;if(this.isInfinity())return e.isInfinity();if(e.isInfinity())return this.isInfinity();var t,r;return t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),t.equals(C.ZERO)?(r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q),r.equals(C.ZERO)):!1}function y(){return null==this.x&&null==this.y?!0:this.z.equals(C.ZERO)&&!this.y.toBigInteger().equals(C.ZERO)}function g(){return new l(this.curve,this.x,this.y.negate(),this.z)}function v(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(e.z)).mod(this.curve.q),r=e.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(e.z)).mod(this.curve.q);if(C.ZERO.equals(r))return C.ZERO.equals(t)?this.twice():this.curve.getInfinity();var n=new C("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),a=(e.x.toBigInteger(),e.y.toBigInteger(),r.square()),s=a.multiply(r),u=i.multiply(a),c=t.square().multiply(this.z),f=c.subtract(u.shiftLeft(1)).multiply(e.z).subtract(s).multiply(r).mod(this.curve.q),h=u.multiply(n).multiply(t).subtract(o.multiply(s)).subtract(c.multiply(t)).multiply(e.z).add(t.multiply(s)).mod(this.curve.q),p=s.multiply(this.z).multiply(e.z).mod(this.curve.q);return new l(this.curve,this.curve.fromBigInteger(f),this.curve.fromBigInteger(h),p)}function B(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=new C("3"),t=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),a=t.square().multiply(e);C.ZERO.equals(o)||(a=a.add(this.z.square().multiply(o))),a=a.mod(this.curve.q);var s=a.square().subtract(t.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=a.multiply(e).multiply(t).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(a.square().multiply(a)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new l(this.curve,this.curve.fromBigInteger(s),this.curve.fromBigInteger(u),c)}function m(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new C("3")),i=this.negate(),o=this;for(t=n.bitLength()-2;t>0;--t){o=o.twice();var a=n.testBit(t),s=r.testBit(t);a!=s&&(o=o.add(a?this:i))}return o}function P(e,t,r){var n;n=e.bitLength()>r.bitLength()?e.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(t);n>=0;)i=i.twice(),e.testBit(n)?i=i.add(r.testBit(n)?o:this):r.testBit(n)&&(i=i.add(t)),--n;return i}function b(e,t,r){this.q=e,this.a=this.fromBigInteger(t),this.b=this.fromBigInteger(r),this.infinity=new l(this,null,null)}function w(){return this.q}function F(){return this.a}function _(){return this.b}function S(e){return e==this?!0:this.q.equals(e.q)&&this.a.equals(e.a)&&this.b.equals(e.b)}function k(){return this.infinity}function E(e){return new r(this.q,e)}function D(e){switch(parseInt(e.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var t=(e.length-2)/2,r=e.substr(2,t),n=e.substr(t+2,t);return new l(this,this.fromBigInteger(new C(r,16)),this.fromBigInteger(new C(n,16)));default:return null}}function T(e,t){var r=e.toByteArrayUnsigned();if(t<r.length)r=r.slice(r.length-t);else for(;t>r.length;)r.unshift(0);return r}{var C=e("./jsbn");e("./sec")}r.prototype.equals=n,r.prototype.toBigInteger=i,r.prototype.negate=o,r.prototype.add=a,r.prototype.subtract=s,r.prototype.multiply=u,r.prototype.square=c,r.prototype.divide=f,l.prototype.getX=h,l.prototype.getY=p,l.prototype.equals=d,l.prototype.isInfinity=y,l.prototype.negate=g,l.prototype.add=v,l.prototype.twice=B,l.prototype.multiply=m,l.prototype.multiplyTwo=P,b.prototype.getQ=w,b.prototype.getA=F,b.prototype.getB=_,b.prototype.equals=S,b.prototype.getInfinity=k,b.prototype.fromBigInteger=E,b.prototype.decodePointHex=D,r.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},l.prototype.getEncoded=function(e){var t=this.getX().toBigInteger(),r=this.getY().toBigInteger(),n=T(t,32);return e?n.unshift(r.isEven()?2:3):(n.unshift(4),n=n.concat(T(r,32))),n},l.decodeFrom=function(e,t){var r=t[0],n=t.length-1;if(4==r)var i=t.slice(1,1+n/2),o=t.slice(1+n/2,1+n),a=C.fromByteArrayUnsigned(i),s=C.fromByteArrayUnsigned(o);else{var i=t.slice(1),a=C.fromByteArrayUnsigned(i),u=e.getQ(),c=a.multiply(a).multiply(a).add(new C("7")).mod(u),f=u.add(new C("1")).divide(new C("4")),s=c.modPow(f,u);s.mod(new C("2")).toString()!=""+r%2&&(s=u.subtract(s))}return new l(e,e.fromBigInteger(a),e.fromBigInteger(s))},l.prototype.add2D=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;if(this.x.equals(e.x))return this.y.equals(e.y)?this.twice():this.curve.getInfinity();var t=e.x.subtract(this.x),r=e.y.subtract(this.y),n=r.divide(t),i=n.square().subtract(this.x).subtract(e.x),o=n.multiply(this.x.subtract(i)).subtract(this.y);return new l(this.curve,i,o)},l.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var e=this.curve.fromBigInteger(C.valueOf(2)),t=this.curve.fromBigInteger(C.valueOf(3)),r=this.x.square().multiply(t).add(this.curve.a).divide(this.y.multiply(e)),n=r.square().subtract(this.x.multiply(e)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new l(this.curve,n,i)},l.prototype.multiply2D=function(e){if(this.isInfinity())return this;if(0==e.signum())return this.curve.getInfinity();var t,r=e,n=r.multiply(new C("3")),i=this.negate(),o=this;for(t=n.bitLength()-2;t>0;--t){o=o.twice();var a=n.testBit(t),s=r.testBit(t);a!=s&&(o=o.add2D(a?this:i))}return o},l.prototype.isOnCurve=function(){var e=this.getX().toBigInteger(),t=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=t.multiply(t).mod(i),a=e.multiply(e).multiply(e).add(r.multiply(e)).add(n).mod(i);return o.equals(a)},l.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},l.prototype.validate=function(){var e=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var t=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(t.compareTo(C.ONE)<0||t.compareTo(e.subtract(C.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(C.ONE)<0||r.compareTo(e.subtract(C.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(e).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0},t.exports=b,t.exports.ECPointFp=l},{"./jsbn":63,"./sec":64}],63:[function(e,t){(function(e){function r(e,t,n){return this instanceof r?void(null!=e&&("number"==typeof e?this.fromNumber(e,t,n):null==t&&"string"!=typeof e?this.fromString(e,256):this.fromString(e,t))):new r(e,t,n)}function n(){return new r(null)}function i(e,t,r,n,i,o){for(;--o>=0;){var a=t*this[e++]+r[n]+i;i=Math.floor(a/67108864),r[n++]=67108863&a}return i}function o(e){return rr.charAt(e)}function a(e,t){var r=nr[e.charCodeAt(t)];return null==r?-1:r}function s(e){for(var t=this.t-1;t>=0;--t)e[t]=this[t];e.t=this.t,e.s=this.s}function u(e){this.t=1,this.s=0>e?-1:0,e>0?this[0]=e:-1>e?this[0]=e+Yt:this.t=0}function c(e){var t=n();return t.fromInt(e),t}function f(e,t){var n,i=this;if(16==t)n=4;else if(8==t)n=3;else if(256==t)n=8;else if(2==t)n=1;else if(32==t)n=5;else{if(4!=t)return void i.fromRadix(e,t);n=2}i.t=0,i.s=0;for(var o=e.length,s=!1,u=0;--o>=0;){var c=8==n?255&e[o]:a(e,o);0>c?"-"==e.charAt(o)&&(s=!0):(s=!1,0==u?i[i.t++]=c:u+n>i.DB?(i[i.t-1]|=(c&(1<<i.DB-u)-1)<<u,i[i.t++]=c>>i.DB-u):i[i.t-1]|=c<<u,u+=n,u>=i.DB&&(u-=i.DB))}8==n&&0!=(128&e[0])&&(i.s=-1,u>0&&(i[i.t-1]|=(1<<i.DB-u)-1<<u)),i.clamp(),s&&r.ZERO.subTo(i,i)}function l(){for(var e=this.s&this.DM;this.t>0&&this[this.t-1]==e;)--this.t}function h(e){var t=this;if(t.s<0)return"-"+t.negate().toString(e);var r;if(16==e)r=4;else if(8==e)r=3;else if(2==e)r=1;else if(32==e)r=5;else{if(4!=e)return t.toRadix(e);r=2}var n,i=(1<<r)-1,a=!1,s="",u=t.t,c=t.DB-u*t.DB%r;if(u-->0)for(c<t.DB&&(n=t[u]>>c)>0&&(a=!0,s=o(n));u>=0;)r>c?(n=(t[u]&(1<<c)-1)<<r-c,n|=t[--u]>>(c+=t.DB-r)):(n=t[u]>>(c-=r)&i,0>=c&&(c+=t.DB,--u)),n>0&&(a=!0),a&&(s+=o(n));return a?s:"0"}function p(){var e=n();return r.ZERO.subTo(this,e),e}function d(){return this.s<0?this.negate():this}function y(e){var t=this.s-e.s;if(0!=t)return t;var r=this.t;if(t=r-e.t,0!=t)return this.s<0?-t:t;for(;--r>=0;)if(0!=(t=this[r]-e[r]))return t;return 0}function g(e){var t,r=1;return 0!=(t=e>>>16)&&(e=t,r+=16),0!=(t=e>>8)&&(e=t,r+=8),0!=(t=e>>4)&&(e=t,r+=4),0!=(t=e>>2)&&(e=t,r+=2),0!=(t=e>>1)&&(e=t,r+=1),r}function v(){return this.t<=0?0:this.DB*(this.t-1)+g(this[this.t-1]^this.s&this.DM)}function B(e,t){var r;for(r=this.t-1;r>=0;--r)t[r+e]=this[r];for(r=e-1;r>=0;--r)t[r]=0;t.t=this.t+e,t.s=this.s}function m(e,t){for(var r=e;r<this.t;++r)t[r-e]=this[r];t.t=Math.max(this.t-e,0),t.s=this.s}function P(e,t){var r,n=this,i=e%n.DB,o=n.DB-i,a=(1<<o)-1,s=Math.floor(e/n.DB),u=n.s<<i&n.DM;for(r=n.t-1;r>=0;--r)t[r+s+1]=n[r]>>o|u,u=(n[r]&a)<<i;for(r=s-1;r>=0;--r)t[r]=0;t[s]=u,t.t=n.t+s+1,t.s=n.s,t.clamp()}function b(e,t){var r=this;t.s=r.s;var n=Math.floor(e/r.DB);if(n>=r.t)return void(t.t=0);var i=e%r.DB,o=r.DB-i,a=(1<<i)-1;t[0]=r[n]>>i;for(var s=n+1;s<r.t;++s)t[s-n-1]|=(r[s]&a)<<o,t[s-n]=r[s]>>i;i>0&&(t[r.t-n-1]|=(r.s&a)<<o),t.t=r.t-n,t.clamp()}function w(e,t){for(var r=this,n=0,i=0,o=Math.min(e.t,r.t);o>n;)i+=r[n]-e[n],t[n++]=i&r.DM,i>>=r.DB;if(e.t<r.t){for(i-=e.s;n<r.t;)i+=r[n],t[n++]=i&r.DM,i>>=r.DB;i+=r.s}else{for(i+=r.s;n<e.t;)i-=e[n],t[n++]=i&r.DM,i>>=r.DB;i-=e.s}t.s=0>i?-1:0,-1>i?t[n++]=r.DV+i:i>0&&(t[n++]=i),t.t=n,t.clamp()}function F(e,t){var n=this.abs(),i=e.abs(),o=n.t;for(t.t=o+i.t;--o>=0;)t[o]=0;for(o=0;o<i.t;++o)t[o+n.t]=n.am(0,i[o],t,o,0,n.t);t.s=0,t.clamp(),this.s!=e.s&&r.ZERO.subTo(t,t)}function _(e){for(var t=this.abs(),r=e.t=2*t.t;--r>=0;)e[r]=0;for(r=0;r<t.t-1;++r){var n=t.am(r,t[r],e,2*r,0,1);(e[r+t.t]+=t.am(r+1,2*t[r],e,2*r+1,n,t.t-r-1))>=t.DV&&(e[r+t.t]-=t.DV,e[r+t.t+1]=1)}e.t>0&&(e[e.t-1]+=t.am(r,t[r],e,2*r,0,1)),e.s=0,e.clamp()}function S(e,t,i){var o=this,a=e.abs();if(!(a.t<=0)){var s=o.abs();if(s.t<a.t)return null!=t&&t.fromInt(0),void(null!=i&&o.copyTo(i));null==i&&(i=n());var u=n(),c=o.s,f=e.s,l=o.DB-g(a[a.t-1]);l>0?(a.lShiftTo(l,u),s.lShiftTo(l,i)):(a.copyTo(u),s.copyTo(i));var h=u.t,p=u[h-1];if(0!=p){var d=p*(1<<o.F1)+(h>1?u[h-2]>>o.F2:0),y=o.FV/d,v=(1<<o.F1)/d,B=1<<o.F2,m=i.t,P=m-h,b=null==t?n():t;for(u.dlShiftTo(P,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),r.ONE.dlShiftTo(h,b),b.subTo(u,u);u.t<h;)u[u.t++]=0;for(;--P>=0;){var w=i[--m]==p?o.DM:Math.floor(i[m]*y+(i[m-1]+B)*v);if((i[m]+=u.am(0,w,i,P,0,h))<w)for(u.dlShiftTo(P,b),i.subTo(b,i);i[m]<--w;)i.subTo(b,i)}null!=t&&(i.drShiftTo(h,t),c!=f&&r.ZERO.subTo(t,t)),i.t=h,i.clamp(),l>0&&i.rShiftTo(l,i),0>c&&r.ZERO.subTo(i,i)}}}function k(e){var t=n();return this.abs().divRemTo(e,null,t),this.s<0&&t.compareTo(r.ZERO)>0&&e.subTo(t,t),t}function E(e){this.m=e}function D(e){return e.s<0||e.compareTo(this.m)>=0?e.mod(this.m):e}function T(e){return e}function C(e){e.divRemTo(this.m,null,e)}function A(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function x(e,t){e.squareTo(t),this.reduce(t)}function O(){if(this.t<1)return 0;var e=this[0];if(0==(1&e))return 0;var t=3&e;return t=t*(2-(15&e)*t)&15,t=t*(2-(255&e)*t)&255,t=t*(2-((65535&e)*t&65535))&65535,t=t*(2-e*t%this.DV)%this.DV,t>0?this.DV-t:-t}function I(e){this.m=e,this.mp=e.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<e.DB-15)-1,this.mt2=2*e.t}function U(e){var t=n();return e.abs().dlShiftTo(this.m.t,t),t.divRemTo(this.m,null,t),e.s<0&&t.compareTo(r.ZERO)>0&&this.m.subTo(t,t),t}function M(e){var t=n();return e.copyTo(t),this.reduce(t),t}function N(e){for(;e.t<=this.mt2;)e[e.t++]=0;for(var t=0;t<this.m.t;++t){var r=32767&e[t],n=r*this.mpl+((r*this.mph+(e[t]>>15)*this.mpl&this.um)<<15)&e.DM;for(r=t+this.m.t,e[r]+=this.m.am(0,n,e,t,0,this.m.t);e[r]>=e.DV;)e[r]-=e.DV,e[++r]++}e.clamp(),e.drShiftTo(this.m.t,e),e.compareTo(this.m)>=0&&e.subTo(this.m,e)}function R(e,t){e.squareTo(t),this.reduce(t)}function H(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function L(){return 0==(this.t>0?1&this[0]:this.s)}function j(e,t){if(e>4294967295||1>e)return r.ONE;var i=n(),o=n(),a=t.convert(this),s=g(e)-1;for(a.copyTo(i);--s>=0;)if(t.sqrTo(i,o),(e&1<<s)>0)t.mulTo(o,a,i);else{var u=i;i=o,o=u}return t.revert(i)}function z(e,t){var r;return r=256>e||t.isEven()?new E(t):new I(t),this.exp(e,r)}function n(){return new r(null)}function q(){var e=n();return this.copyTo(e),e}function K(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function V(){return 0==this.t?this.s:this[0]<<24>>24}function G(){return 0==this.t?this.s:this[0]<<16>>16}function J(e){return Math.floor(Math.LN2*this.DB/Math.log(e))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Z(e){if(null==e&&(e=10),0==this.signum()||2>e||e>36)return"0";var t=this.chunkSize(e),r=Math.pow(e,t),i=c(r),o=n(),a=n(),s="";for(this.divRemTo(i,o,a);o.signum()>0;)s=(r+a.intValue()).toString(e).substr(1)+s,o.divRemTo(i,o,a);return a.intValue().toString(e)+s}function Q(e,t){var n=this;n.fromInt(0),null==t&&(t=10);for(var i=n.chunkSize(t),o=Math.pow(t,i),s=!1,u=0,c=0,f=0;f<e.length;++f){var l=a(e,f);0>l?"-"==e.charAt(f)&&0==n.signum()&&(s=!0):(c=t*c+l,++u>=i&&(n.dMultiply(o),n.dAddOffset(c,0),u=0,c=0))}u>0&&(n.dMultiply(Math.pow(t,u)),n.dAddOffset(c,0)),s&&r.ZERO.subTo(n,n)}function X(e,t,n){var i=this;if("number"==typeof t)if(2>e)i.fromInt(1);else for(i.fromNumber(e,n),i.testBit(e-1)||i.bitwiseTo(r.ONE.shiftLeft(e-1),ot,i),i.isEven()&&i.dAddOffset(1,0);!i.isProbablePrime(t);)i.dAddOffset(2,0),i.bitLength()>e&&i.subTo(r.ONE.shiftLeft(e-1),i);else{var o=7&e,a=(e>>3)+1,s=t(a,{array:!0});o>0?s[0]&=(1<<o)-1:s[0]=0,i.fromString(s,256)}}function Y(){var e=this,t=e.t,r=new Array;r[0]=e.s;var n,i=e.DB-t*e.DB%8,o=0;if(t-->0)for(i<e.DB&&(n=e[t]>>i)!=(e.s&e.DM)>>i&&(r[o++]=n|e.s<<e.DB-i);t>=0;)8>i?(n=(e[t]&(1<<i)-1)<<8-i,n|=e[--t]>>(i+=e.DB-8)):(n=e[t]>>(i-=8)&255,0>=i&&(i+=e.DB,--t)),0!=(128&n)&&(n|=-256),0===o&&(128&e.s)!=(128&n)&&++o,(o>0||n!=e.s)&&(r[o++]=n);return r}function $(e){return 0==this.compareTo(e)}function et(e){return this.compareTo(e)<0?this:e}function tt(e){return this.compareTo(e)>0?this:e}function rt(e,t,r){var n,i,o=this,a=Math.min(e.t,o.t);for(n=0;a>n;++n)r[n]=t(o[n],e[n]);if(e.t<o.t){for(i=e.s&o.DM,n=a;n<o.t;++n)r[n]=t(o[n],i);r.t=o.t}else{for(i=o.s&o.DM,n=a;n<e.t;++n)r[n]=t(i,e[n]);r.t=e.t}r.s=t(o.s,e.s),r.clamp()}function nt(e,t){return e&t}function it(e){var t=n();return this.bitwiseTo(e,nt,t),t}function ot(e,t){return e|t}function at(e){var t=n();return this.bitwiseTo(e,ot,t),t}function st(e,t){return e^t}function ut(e){var t=n();return this.bitwiseTo(e,st,t),t}function ct(e,t){return e&~t}function ft(e){var t=n();return this.bitwiseTo(e,ct,t),t}function lt(){for(var e=n(),t=0;t<this.t;++t)e[t]=this.DM&~this[t];return e.t=this.t,e.s=~this.s,e}function ht(e){var t=n();return 0>e?this.rShiftTo(-e,t):this.lShiftTo(e,t),t}function pt(e){var t=n();return 0>e?this.lShiftTo(-e,t):this.rShiftTo(e,t),t}function dt(e){if(0==e)return-1;var t=0;return 0==(65535&e)&&(e>>=16,t+=16),0==(255&e)&&(e>>=8,t+=8),0==(15&e)&&(e>>=4,t+=4),0==(3&e)&&(e>>=2,t+=2),0==(1&e)&&++t,t}function yt(){for(var e=0;e<this.t;++e)if(0!=this[e])return e*this.DB+dt(this[e]);return this.s<0?this.t*this.DB:-1}function gt(e){for(var t=0;0!=e;)e&=e-1,++t;return t}function vt(){for(var e=0,t=this.s&this.DM,r=0;r<this.t;++r)e+=gt(this[r]^t);return e}function Bt(e){var t=Math.floor(e/this.DB);return t>=this.t?0!=this.s:0!=(this[t]&1<<e%this.DB)}function mt(e,t){var n=r.ONE.shiftLeft(e);return this.bitwiseTo(n,t,n),n}function Pt(e){return this.changeBit(e,ot)}function bt(e){return this.changeBit(e,ct)}function wt(e){return this.changeBit(e,st)}function Ft(e,t){for(var r=this,n=0,i=0,o=Math.min(e.t,r.t);o>n;)i+=r[n]+e[n],t[n++]=i&r.DM,i>>=r.DB;
if(e.t<r.t){for(i+=e.s;n<r.t;)i+=r[n],t[n++]=i&r.DM,i>>=r.DB;i+=r.s}else{for(i+=r.s;n<e.t;)i+=e[n],t[n++]=i&r.DM,i>>=r.DB;i+=e.s}t.s=0>i?-1:0,i>0?t[n++]=i:-1>i&&(t[n++]=r.DV+i),t.t=n,t.clamp()}function _t(e){var t=n();return this.addTo(e,t),t}function St(e){var t=n();return this.subTo(e,t),t}function kt(e){var t=n();return this.multiplyTo(e,t),t}function Et(){var e=n();return this.squareTo(e),e}function Dt(e){var t=n();return this.divRemTo(e,t,null),t}function Tt(e){var t=n();return this.divRemTo(e,null,t),t}function Ct(e){var t=n(),r=n();return this.divRemTo(e,t,r),new Array(t,r)}function At(e){this[this.t]=this.am(0,e-1,this,0,0,this.t),++this.t,this.clamp()}function xt(e,t){if(0!=e){for(;this.t<=t;)this[this.t++]=0;for(this[t]+=e;this[t]>=this.DV;)this[t]-=this.DV,++t>=this.t&&(this[this.t++]=0),++this[t]}}function Ot(){}function It(e){return e}function Ut(e,t,r){e.multiplyTo(t,r)}function Mt(e,t){e.squareTo(t)}function Nt(e){return this.exp(e,new Ot)}function Rt(e,t,r){var n=Math.min(this.t+e.t,t);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;i>n;++n)r[n+this.t]=this.am(0,e[n],r,n,0,this.t);for(i=Math.min(e.t,t);i>n;++n)this.am(0,e[n],r,n,0,t-n);r.clamp()}function Ht(e,t,r){--t;var n=r.t=this.t+e.t-t;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(t-this.t,0);n<e.t;++n)r[this.t+n-t]=this.am(t-n,e[n],r,0,0,this.t+n-t);r.clamp(),r.drShiftTo(1,r)}function Lt(e){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*e.t,this.r2),this.mu=this.r2.divide(e),this.m=e}function jt(e){if(e.s<0||e.t>2*this.m.t)return e.mod(this.m);if(e.compareTo(this.m)<0)return e;var t=n();return e.copyTo(t),this.reduce(t),t}function zt(e){return e}function qt(e){var t=this;for(e.drShiftTo(t.m.t-1,t.r2),e.t>t.m.t+1&&(e.t=t.m.t+1,e.clamp()),t.mu.multiplyUpperTo(t.r2,t.m.t+1,t.q3),t.m.multiplyLowerTo(t.q3,t.m.t+1,t.r2);e.compareTo(t.r2)<0;)e.dAddOffset(1,t.m.t+1);for(e.subTo(t.r2,e);e.compareTo(t.m)>=0;)e.subTo(t.m,e)}function Kt(e,t){e.squareTo(t),this.reduce(t)}function Vt(e,t,r){e.multiplyTo(t,r),this.reduce(r)}function Gt(e,t){var r,i,o=e.bitLength(),a=c(1);if(0>=o)return a;r=18>o?1:48>o?3:144>o?4:768>o?5:6,i=8>o?new E(t):t.isEven()?new Lt(t):new I(t);var s=new Array,u=3,f=r-1,l=(1<<r)-1;if(s[1]=i.convert(this),r>1){var h=n();for(i.sqrTo(s[1],h);l>=u;)s[u]=n(),i.mulTo(h,s[u-2],s[u]),u+=2}var p,d,y=e.t-1,v=!0,B=n();for(o=g(e[y])-1;y>=0;){for(o>=f?p=e[y]>>o-f&l:(p=(e[y]&(1<<o+1)-1)<<f-o,y>0&&(p|=e[y-1]>>this.DB+o-f)),u=r;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--y),v)s[p].copyTo(a),v=!1;else{for(;u>1;)i.sqrTo(a,B),i.sqrTo(B,a),u-=2;u>0?i.sqrTo(a,B):(d=a,a=B,B=d),i.mulTo(B,s[p],a)}for(;y>=0&&0==(e[y]&1<<o);)i.sqrTo(a,B),d=a,a=B,B=d,--o<0&&(o=this.DB-1,--y)}return i.revert(a)}function Jt(e){var t=this.s<0?this.negate():this.clone(),r=e.s<0?e.negate():e.clone();if(t.compareTo(r)<0){var n=t;t=r,r=n}var i=t.getLowestSetBit(),o=r.getLowestSetBit();if(0>o)return t;for(o>i&&(o=i),o>0&&(t.rShiftTo(o,t),r.rShiftTo(o,r));t.signum()>0;)(i=t.getLowestSetBit())>0&&t.rShiftTo(i,t),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),t.compareTo(r)>=0?(t.subTo(r,t),t.rShiftTo(1,t)):(r.subTo(t,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function Wt(e){if(0>=e)return 0;var t=this.DV%e,r=this.s<0?e-1:0;if(this.t>0)if(0==t)r=this[0]%e;else for(var n=this.t-1;n>=0;--n)r=(t*r+this[n])%e;return r}function Zt(e){var t=e.isEven();if(this.isEven()&&t||0==e.signum())return r.ZERO;for(var n=e.clone(),i=this.clone(),o=c(1),a=c(0),s=c(0),u=c(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),t?(o.isEven()&&a.isEven()||(o.addTo(this,o),a.subTo(e,a)),o.rShiftTo(1,o)):a.isEven()||a.subTo(e,a),a.rShiftTo(1,a);for(;i.isEven();)i.rShiftTo(1,i),t?(s.isEven()&&u.isEven()||(s.addTo(this,s),u.subTo(e,u)),s.rShiftTo(1,s)):u.isEven()||u.subTo(e,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),t&&o.subTo(s,o),a.subTo(u,a)):(i.subTo(n,i),t&&s.subTo(o,s),u.subTo(a,u))}return 0!=i.compareTo(r.ONE)?r.ZERO:u.compareTo(e)>=0?u.subtract(e):u.signum()<0?(u.addTo(e,u),u.signum()<0?u.add(e):u):u}var Qt,Xt=r.prototype;r.prototype.am=i,Qt=26,r.prototype.DB=Qt,r.prototype.DM=(1<<Qt)-1;var Yt=r.prototype.DV=1<<Qt,$t=52;r.prototype.FV=Math.pow(2,$t),r.prototype.F1=$t-Qt,r.prototype.F2=2*Qt-$t;var er,tr,rr="0123456789abcdefghijklmnopqrstuvwxyz",nr=new Array;for(er="0".charCodeAt(0),tr=0;9>=tr;++tr)nr[er++]=tr;for(er="a".charCodeAt(0),tr=10;36>tr;++tr)nr[er++]=tr;for(er="A".charCodeAt(0),tr=10;36>tr;++tr)nr[er++]=tr;E.prototype.convert=D,E.prototype.revert=T,E.prototype.reduce=C,E.prototype.mulTo=A,E.prototype.sqrTo=x,I.prototype.convert=U,I.prototype.revert=M,I.prototype.reduce=N,I.prototype.mulTo=H,I.prototype.sqrTo=R,Xt.copyTo=s,Xt.fromInt=u,Xt.fromString=f,Xt.clamp=l,Xt.dlShiftTo=B,Xt.drShiftTo=m,Xt.lShiftTo=P,Xt.rShiftTo=b,Xt.subTo=w,Xt.multiplyTo=F,Xt.squareTo=_,Xt.divRemTo=S,Xt.invDigit=O,Xt.isEven=L,Xt.exp=j,Xt.toString=h,Xt.negate=p,Xt.abs=d,Xt.compareTo=y,Xt.bitLength=v,Xt.mod=k,Xt.modPowInt=z,Ot.prototype.convert=It,Ot.prototype.revert=It,Ot.prototype.mulTo=Ut,Ot.prototype.sqrTo=Mt,Lt.prototype.convert=jt,Lt.prototype.revert=zt,Lt.prototype.reduce=qt,Lt.prototype.mulTo=Vt,Lt.prototype.sqrTo=Kt,Xt.chunkSize=J,Xt.toRadix=Z,Xt.fromRadix=Q,Xt.fromNumber=X,Xt.bitwiseTo=rt,Xt.changeBit=mt,Xt.addTo=Ft,Xt.dMultiply=At,Xt.dAddOffset=xt,Xt.multiplyLowerTo=Rt,Xt.multiplyUpperTo=Ht,Xt.modInt=Wt,Xt.clone=q,Xt.intValue=K,Xt.byteValue=V,Xt.shortValue=G,Xt.signum=W,Xt.toByteArray=Y,Xt.equals=$,Xt.min=et,Xt.max=tt,Xt.and=it,Xt.or=at,Xt.xor=ut,Xt.andNot=ft,Xt.not=lt,Xt.shiftLeft=ht,Xt.shiftRight=pt,Xt.getLowestSetBit=yt,Xt.bitCount=vt,Xt.testBit=Bt,Xt.setBit=Pt,Xt.clearBit=bt,Xt.flipBit=wt,Xt.add=_t,Xt.subtract=St,Xt.multiply=kt,Xt.divide=Dt,Xt.remainder=Tt,Xt.divideAndRemainder=Ct,Xt.modPow=Gt,Xt.modInverse=Zt,Xt.pow=Nt,Xt.gcd=Jt,Xt.square=Et,r.ZERO=c(0),r.ONE=c(1),r.valueOf=c,r.fromByteArrayUnsigned=function(t){return e.isBuffer(t)&&(t=Array.prototype.map.bind(t,function(e){return e})()),t.length?new r(128&t[0]?[0].concat(t):t):new r.valueOf(0)},r.fromByteArraySigned=function(e){return 128&e[0]?(e[0]&=127,r.fromByteArrayUnsigned(e).negate()):r.fromByteArrayUnsigned(e)},r.prototype.toByteArrayUnsigned=function(){var e=this.abs().toByteArray();if(!e.length)return e;0===e[0]&&(e=e.slice(1));for(var t=0;t<e.length;++t)e[t]=e[t]<0?e[t]+256:e[t];return e},r.prototype.toByteArraySigned=function(){var e=this.toByteArrayUnsigned(),t=this.s<0;return 128&e[0]?e.unshift(t?128:0):t&&(e[0]|=128),e},t.exports=r}).call(this,e("buffer").Buffer)},{buffer:5}],64:[function(e,t){function r(e,t,r,n){this.curve=e,this.g=t,this.n=r,this.h=n}function n(){return this.curve}function i(){return this.g}function o(){return this.n}function a(){return this.h}function s(e){return new B(e,16)}function u(){var e=s("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF"),t=s("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC"),n=s("E87579C11079F43DD824993C2CEE5ED3"),i=s("FFFFFFFE0000000075A30D1B9038A115"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("04161FF7528B899B2D0C28607CA52C5B86CF5AC8395BAFEB13C02DA292DDED7A83");return new r(a,u,i,o)}function c(){var e=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73"),t=B.ZERO,n=s("7"),i=s("0100000000000000000001B8FA16DFAB9ACA16B6B3"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("043B4C382CE37AA192A4019E763036F4F5DD4D7EBB938CF935318FDCED6BC28286531733C3F03C4FEE");return new r(a,u,i,o)}function f(){var e=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF"),t=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC"),n=s("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45"),i=s("0100000000000000000001F4C8F927AED3CA752257"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("044A96B5688EF573284664698968C38BB913CBFC8223A628553168947D59DCC912042351377AC5FB32");return new r(a,u,i,o)}function l(){var e=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37"),t=B.ZERO,n=s("3"),i=s("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("04DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new r(a,u,i,o)}function h(){var e=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF"),t=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC"),n=s("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1"),i=s("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("04188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF101207192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new r(a,u,i,o)}function p(){var e=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001"),t=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE"),n=s("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4"),i=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("04B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new r(a,u,i,o)}function d(){var e=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),t=B.ZERO,n=s("7"),i=s("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("0479BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8");return new r(a,u,i,o)}function y(){var e=s("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),t=s("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),n=s("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),i=s("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),o=B.ONE,a=new v(e,t,n),u=a.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new r(a,u,i,o)}function g(e){return"secp128r1"==e?u():"secp160k1"==e?c():"secp160r1"==e?f():"secp192k1"==e?l():"secp192r1"==e?h():"secp224r1"==e?p():"secp256k1"==e?d():"secp256r1"==e?y():null}var v=e("./ec"),B=e("./jsbn");r.prototype.getCurve=n,r.prototype.getG=i,r.prototype.getN=o,r.prototype.getH=a,t.exports=g},{"./ec":62,"./jsbn":63}],65:[function(e,t){function r(e){var t=a.stringToBytes(e),r=[].concat(a.numToVarInt(f.length),f,a.numToVarInt(t.length),t);return a.wordArrayToBytes(c(c(a.bytesToWordArray(r))))}function n(e,t){var n=r(t),i=e.sign(n),o=s.parseSig(i),a=s.calcPubKeyRecoveryParam(e.getPub().pub,o.r,o.s,n);a+=27,e.compressed&&(a+=4);for(var u=o.r.toByteArrayUnsigned(),c=o.s.toByteArrayUnsigned();u.length<32;)u.unshift(0);for(;c.length<32;)c.unshift(0);return i=[a].concat(u,c)}function i(e,t,n){t=s.parseSigCompact(t);var i=new u(s.recoverPubKey(t.r,t.s,r(n),t.i)),a=!!(4&t.i);return i.compressed=a,e=new o(e),i.getAddress(e.version).toString()===e.toString()}var o=e("./address"),a=e("./convert"),s=e("./ecdsa"),u=e("./eckey").ECPubKey,c=e("crypto-js/sha256"),f=a.stringToBytes("Bitcoin Signed Message:\n");t.exports={magicHash:r,sign:n,verify:i}},{"./address":54,"./convert":57,"./ecdsa":58,"./eckey":59,"crypto-js/sha256":47}],66:[function(e,t){t.exports={mainnet:{addressVersion:0,p2shVersion:5,hdVersions:{pub:76067358,priv:76066276}},testnet:{addressVersion:111,p2shVersion:196,hdVersions:{pub:70617039,priv:70615956}}}},{}],67:[function(e,t){var r={map:{OP_0:0,OP_FALSE:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_1:81,OP_TRUE:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},reverseMap:[]};for(var n in r.map)r.reverseMap[r.map[n]]=n;t.exports=r},{}],68:[function(e,t){(function(r){var n=e("./opcode"),i=e("./util"),o=e("./convert"),a=e("./address"),s=e("./network"),u=function(e){if(this.buffer=e||[],!Array.isArray(this.buffer))throw new Error("expect Script to be initialized with Array, but got "+e);this.parse()};u.fromHex=function(e){return new u(o.hexToBytes(e))},u.fromPubKey=function(e){var t=new u,r=e.split(" ");for(var i in r)n.map.hasOwnProperty(r[i])?t.writeOp(n.map[r[i]]):t.writeBytes(o.hexToBytes(r[i]));return t},u.fromScriptSig=function(e){var t=new u,r=e.split(" ");for(var i in r)n.map.hasOwnProperty(r[i])?t.writeOp(n.map[r[i]]):t.writeBytes(o.hexToBytes(r[i]));return t},u.prototype.parse=function(){function e(e){t.chunks.push(t.buffer.slice(r,r+e)),r+=e}var t=this;this.chunks=[];for(var r=0;r<this.buffer.length;){var i=this.buffer[r++];i>=240&&(i=i<<8|this.buffer[r++]);var o;i>0&&i<n.map.OP_PUSHDATA1?e(i):i==n.map.OP_PUSHDATA1?(o=this.buffer[r++],e(o)):i==n.map.OP_PUSHDATA2?(o=this.buffer[r++]<<8|this.buffer[r++],e(o)):i==n.map.OP_PUSHDATA4?(o=this.buffer[r++]<<24|this.buffer[r++]<<16|this.buffer[r++]<<8|this.buffer[r++],e(o)):this.chunks.push(i)}},u.prototype.getOutType=function(){return this.chunks[this.chunks.length-1]==n.map.OP_EQUAL&&this.chunks[0]==n.map.OP_HASH160&&3==this.chunks.length?"P2SH":5==this.chunks.length&&this.chunks[0]==n.map.OP_DUP&&this.chunks[1]==n.map.OP_HASH160&&this.chunks[3]==n.map.OP_EQUALVERIFY&&this.chunks[4]==n.map.OP_CHECKSIG?"Pubkey":"Strange"},u.prototype.toScriptHash=function(){var e=this.getOutType();return"Pubkey"==e?this.chunks[2]:i.sha256ripe160("P2SH"==e?this.buffer:this.buffer)},u.prototype.getToAddress=function(){var e=this.getOutType();return"Pubkey"==e?new a(this.chunks[2]):"P2SH"==e?new a(this.chunks[1],5):new a(this.chunks[1],5)},u.prototype.getFromAddress=function(){return new a(this.simpleInHash())},u.prototype.getInType=function(){return 1==this.chunks.length&&Array.isArray(this.chunks[0])?"Pubkey":2==this.chunks.length&&Array.isArray(this.chunks[0])&&Array.isArray(this.chunks[1])?"Address":this.chunks[0]==n.map.OP_0&&this.chunks.slice(1).reduce(function(e,t,r){return e&&Array.isArray(t)&&(48==t[0]||r==this.chunks.length-1)},!0)?"Multisig":"Strange"},u.prototype.simpleInPubKey=function(){switch(this.getInType()){case"Address":return this.chunks[1];case"Pubkey":throw new Error("Script does not contain pubkey");default:throw new Error("Encountered non-standard scriptSig")}},u.prototype.simpleInHash=function(){return i.sha256ripe160(this.simpleInPubKey())},u.prototype.simpleInPubKeyHash=u.prototype.simpleInHash,u.prototype.writeOp=function(e){this.buffer.push(e),this.chunks.push(e)},u.prototype.writeBytes=function(e){r.isBuffer(e)&&(e=Array.prototype.map.bind(e,function(e){return e})()),e.length<n.map.OP_PUSHDATA1?this.buffer.push(e.length):e.length<=255?(this.buffer.push(n.map.OP_PUSHDATA1),this.buffer.push(e.length)):e.length<=65535?(this.buffer.push(n.map.OP_PUSHDATA2),this.buffer.push(255&e.length),this.buffer.push(e.length>>>8&255)):(this.buffer.push(n.map.OP_PUSHDATA4),this.buffer.push(255&e.length),this.buffer.push(e.length>>>8&255),this.buffer.push(e.length>>>16&255),this.buffer.push(e.length>>>24&255)),this.buffer=this.buffer.concat(e),this.chunks.push(e)},u.createOutputScript=function(e){var t=new u;return e=new a(e),e.version==s.mainnet.p2shVersion||e.version==s.testnet.p2shVersion?(t.writeOp(n.map.OP_HASH160),t.writeBytes(e.hash),t.writeOp(n.map.OP_EQUAL)):(t.writeOp(n.map.OP_DUP),t.writeOp(n.map.OP_HASH160),t.writeBytes(e.hash),t.writeOp(n.map.OP_EQUALVERIFY),t.writeOp(n.map.OP_CHECKSIG)),t},u.prototype.extractPubkeys=function(){return this.chunks.filter(function(e){return 4==e[0]&&65==e.length||e[0]<4&&33==e.length})},u.createMultiSigOutputScript=function(e,t){var r=new u;t=t.sort(),r.writeOp(n.map.OP_1+e-1);for(var i=0;i<t.length;++i)r.writeBytes(t[i]);return r.writeOp(n.map.OP_1+t.length-1),r.writeOp(n.map.OP_CHECKMULTISIG),r},u.createInputScript=function(e,t){var r=new u;return r.writeBytes(e),r.writeBytes(t),r},u.createMultiSigInputScript=function(e,t){t=new u(t);var r=t.chunks[0][0];if(e.length<r)return!1;var i=new u;return i.writeOp(n.map.OP_0),e.map(function(e){i.writeBytes(e)}),i.writeBytes(t.buffer),i},u.prototype.clone=function(){return new u(this.buffer)},t.exports=u}).call(this,e("buffer").Buffer)},{"./address":54,"./convert":57,"./network":66,"./opcode":67,"./util":70,buffer:5}],69:[function(e,t){var r=e("./jsbn/jsbn"),n=e("./script"),i=e("./util"),o=e("./convert"),a=e("./eckey").ECKey,s=e("./ecdsa"),u=e("./address"),c=e("crypto-js/sha256"),f=function(e){return this instanceof f?(this.version=1,this.locktime=0,this.ins=[],this.outs=[],this.defaultSequence=[255,255,255,255],void(e&&(("string"==typeof e||Array.isArray(e))&&(e=f.deserialize(e)),e.hash&&(this.hash=e.hash),e.version&&(this.version=e.version),e.locktime&&(this.locktime=e.locktime),e.ins&&e.ins.length&&e.ins.forEach(function(e){this.addInput(new d(e))},this),e.outs&&e.outs.length&&e.outs.forEach(function(e){this.addOutput(new y(e))},this),this.hash=this.hash||this.getHash()))):new f(e)};f.prototype.addInput=function(e,t){if(arguments[0]instanceof d)this.ins.push(arguments[0]);else{if(arguments[0].length>65){var r=arguments[0].split(":");return this.addInput(r[0],r[1])}var i="string"==typeof e?e:e.hash;i=Array.isArray(i)?o.bytesToHex(i):i,this.ins.push(new d({outpoint:{hash:i,index:t},script:new n,sequence:this.defaultSequence}))}},f.prototype.addOutput=function(e,t){if(arguments[0]instanceof y)return void this.outs.push(arguments[0]);if(arguments[0].indexOf(":")>=0){var r=arguments[0].split(":");e=r[0],t=parseInt(r[1])}this.outs.push(new y({value:t,script:n.createOutputScript(e)}))},f.prototype.serialize=function(){var e=[];return e=e.concat(o.numToBytes(parseInt(this.version),4)),e=e.concat(o.numToVarInt(this.ins.length)),this.ins.forEach(function(t){e=e.concat(o.hexToBytes(t.outpoint.hash).reverse()),e=e.concat(o.numToBytes(parseInt(t.outpoint.index),4));var r=t.script.buffer;e=e.concat(o.numToVarInt(r.length)),e=e.concat(r),e=e.concat(t.sequence)}),e=e.concat(o.numToVarInt(this.outs.length)),this.outs.forEach(function(t){e=e.concat(o.numToBytes(t.value,8));var r=t.script.buffer;e=e.concat(o.numToVarInt(r.length)),e=e.concat(r)}),e=e.concat(o.numToBytes(parseInt(this.locktime),4))},f.prototype.serializeHex=function(){return o.bytesToHex(this.serialize())};var l=1,h=2,p=80;f.prototype.hashTransactionForSignature=function(e,t,r){var i=this.clone();i.ins.forEach(function(e){e.script=new n}),i.ins[t].script=e,(31&r)==h&&(i.outs=[],i.ins.forEach(function(e,r){r!=t&&(i.ins[r].sequence=0)})),r&p&&(i.ins=[i.ins[t]]);var a=i.serialize();return a=a.concat(o.numToBytes(parseInt(r),4)),a=o.bytesToWordArray(a),o.wordArrayToBytes(c(c(a)))},f.prototype.getHash=function(){var e=o.bytesToWordArray(this.serialize());return o.wordArrayToBytes(c(c(e))).reverse()},f.prototype.clone=function(){var e=new f;return e.version=this.version,e.locktime=this.locktime,this.ins.forEach(function(t){e.addInput(t.clone())}),this.outs.forEach(function(t){e.addOutput(t.clone())}),e},f.deserialize=function(e){"string"==typeof e&&(e=o.hexToBytes(e));var t=0,r=function(n){return 0===n?0:(t++,e[t-1]+256*r(n-1))},i=function(){var r=e.slice(t,t+9),n=o.varIntToNum(r);return t+=n.bytes.length,n.number},a=function(r){return t+=r,e.slice(t-r,t)},s=function(){var e=i();return a(e)},u={ins:[],outs:[]};u.version=r(4);var c,l=i();for(c=0;l>c;c++)u.ins.push({outpoint:{hash:o.bytesToHex(a(32).reverse()),index:r(4)},script:new n(s()),sequence:a(4)});var h=i();for(c=0;h>c;c++)u.outs.push({value:o.bytesToNum(a(8)),script:new n(s())});return u.locktime=r(4),new f(u)},f.prototype.sign=function(e,t,r){r=r||l,t=new a(t);var o=t.getPub().toBytes(),s=i.sha256ripe160(o),c=n.createOutputScript(new u(s)),f=this.hashTransactionForSignature(c,e,r),h=t.sign(f).concat([r]);this.ins[e].script=n.createInputScript(h,o)},f.prototype.signWithKeys=function(e,t,r){r=r||l;var n=e.map(function(e){return e=new a(e),{key:e,address:e.getAddress().toString()}}),i={};t.forEach(function(e){i[e.output]=e});for(var o=0;o<this.ins.length;o++){var s=this.ins[o].outpoint.hash+":"+this.ins[o].outpoint.index,u=i[s];if(u){var c=n.filter(function(e){return e.address==u.address});0!==c.length&&this.sign(o,c[0].key)}}},f.prototype.p2shsign=function(e,t,r,i){t=new n(t),r=new a(r),i=i||l;var o=this.hashTransactionForSignature(t,e,i),s=r.sign(o).concat([i]);return s},f.prototype.multisign=f.prototype.p2shsign,f.prototype.applyMultisigs=function(e,t,r){this.ins[e].script=n.createMultiSigInputScript(r,t)},f.prototype.validateSig=function(e,t,r,i){t=new n(t);var a=this.hashTransactionForSignature(t,e,1);return s.verify(a,o.coerceToBytes(r),o.coerceToBytes(i))},f.feePerKb=2e4,f.prototype.estimateFee=function(e){var t=180,r=34,n=34;void 0==e&&(e=f.feePerKb);var i=this.ins.length*t+this.outs.length*r+n;return e*Math.ceil(i/1e3)};var d=function(e){this.outpoint="string"==typeof e?{hash:e.split(":")[0],index:e.split(":")[1]}:e.outpoint?e.outpoint:{hash:e.hash,index:e.index},this.script=e.scriptSig?n.fromScriptSig(e.scriptSig):e.script?e.script:new n(e.script),this.sequence=e.sequence||this.defaultSequence};d.prototype.clone=function(){return new d({outpoint:{hash:this.outpoint.hash,index:this.outpoint.index},script:this.script.clone(),sequence:this.sequence})};var y=function(e){this.script=e.script instanceof n?e.script.clone():Array.isArray(e.script)?new n(e.script):"string"==typeof e.script?new n(o.hexToBytes(e.script)):e.scriptPubKey?n.fromScriptSig(e.scriptPubKey):e.address?n.createOutputScript(e.address):new n,this.script.buffer.length>0&&(this.address=this.script.getToAddress()),this.value=Array.isArray(e.value)?o.bytesToNum(e.value):"string"==typeof e.value?parseInt(e.value):e.value instanceof r?parseInt(e.value.toString()):e.value};y.prototype.clone=function(){var e=new y({script:this.script.clone(),value:this.value});return e},y.prototype.scriptPubKey=function(){return o.bytesToHex(this.script.buffer)},t.exports={Transaction:f,TransactionIn:d,TransactionOut:y}},{"./address":54,"./convert":57,"./ecdsa":58,"./eckey":59,"./jsbn/jsbn":63,"./script":68,"./util":70,"crypto-js/sha256":47}],70:[function(e,t,r){var n=e("./convert.js"),i=e("crypto-js"),o=i.RIPEMD160,a=i.SHA256;r.sha256ripe160=function(e){var t=o(a(n.bytesToWordArray(e)));return n.wordArrayToBytes(t)},r.error=function(e){throw new Error(e)}},{"./convert.js":57,"crypto-js":27}],71:[function(e,t){(function(r){function n(e,t){function u(e){var t=e.receive.split(":");return{hash:t[0],hashLittleEndian:i.reverseEndian(t[0]),outputIndex:parseInt(t[1]),address:e.address,value:e.value}}function c(e){var t=e.hash||i.reverseEndian(e.hashLittleEndian),r=t+":"+e.outputIndex;return{receive:r,address:e.address,value:e.value}}function f(e){var t;l(e.hash)&&l(e.hashLittleEndian)&&(t="hash(or hashLittleEndian)");var r=["outputIndex","address","value"];if(r.forEach(function(r){l(e[r])&&(t=r)}),t){var n=["Invalid unspent output: key",t,"is missing.","A valid unspent output must contain"];throw n.push(r.join(", ")),n.push("and hash(or hashLittleEndian)"),new Error(n.join(" "))}}function l(e){return void 0==e}function h(e){return e<=F.dustThreshold}function p(e){if(l(e)||h(e))throw new Error("Value must be above dust threshold")}function d(){var e=[];for(var t in F.outputs){var r=F.outputs[t];r.spend||e.push(r)}var n=e.sort(function(e,t){return t.value-e.value});return n}function y(e){var t=e.clone();return t.addOutput(g(),0),t.estimateFee()}function g(){return 0===F.changeAddresses.length&&F.generateChangeAddress(),F.changeAddresses[F.changeAddresses.length-1]}function v(e,t,r){if(t+r>e)throw new Error("Not enough money to send funds including transaction fee. Have: "+e+", needed: "+(t+r))}function B(e){return F.addresses.indexOf(e)>-1}function m(e){return F.changeAddresses.indexOf(e)>-1}function P(e){return B(e)||m(e)}if(!(this instanceof n))return new n(e,t);var t=t||{},b=t.network||"mainnet",w=null,F=this,_=null,S=null,k=null;this.addresses=[],this.changeAddresses=[],this.outputs={},this.newMasterKey=function(e,t){e||(e=s(32,{array:!0})),w=new a(e,t),_=w.derivePrivate(0),k=_.derive(0),S=_.derive(1),F.addresses=[],F.changeAddresses=[],F.outputs={}},this.newMasterKey(e,b),this.generateAddress=function(){var e=k.derive(this.addresses.length);return this.addresses.push(e.getAddress().toString()),this.addresses[this.addresses.length-1]},this.generateChangeAddress=function(){var e=S.derive(this.changeAddresses.length);return this.changeAddresses.push(e.getAddress().toString()),this.changeAddresses[this.changeAddresses.length-1]},this.getBalance=function(){return this.getUnspentOutputs().reduce(function(e,t){return e+t.value},0)},this.getUnspentOutputs=function(){var e=[];for(var t in this.outputs){var r=this.outputs[t];r.spend||e.push(u(r))}return e},this.setUnspentOutputs=function(e){var t={};e.forEach(function(e){f(e);var r=c(e);t[r.receive]=r}),this.outputs=t},this.setUnspentOutputsAsync=function(e,t){var n=null;try{this.setUnspentOutputs(e)}catch(i){n=i}finally{r.nextTick(function(){t(n)})}},this.processTx=function(e){var t=i.bytesToHex(e.getHash());e.outs.forEach(function(e,r){var n=e.address.toString();if(P(n)){var i=t+":"+r;F.outputs[i]={receive:i,value:e.value,address:n}}}),e.ins.forEach(function(e,r){var n=e.outpoint,i=F.outputs[n.hash+":"+n.index];i&&(i.spend=t+":"+r)})},this.createTx=function(e,t,r){p(t);var n=new o;n.addOutput(e,t);for(var i=d(t),a=0,s=0;s<i.length;s++){var u=i[s];if(n.addInput(u.receive),a+=u.value,!(t>a)){var c=void 0==r?y(n):r;if(!(t+c>a)){var f=a-t-c;f>0&&!h(f)&&n.addOutput(g(),f);break}}}return v(a,t,c),this.sign(n),n},this.createTxAsync=function(e,t,n,i){n instanceof Function&&(i=n,n=void 0);var o=null,a=null;try{o=this.createTx(e,t,n)}catch(s){a=s}finally{r.nextTick(function(){i(a,o)})}},this.dustThreshold=5430,this.sign=function(e){return e.ins.forEach(function(t,r){var n=F.outputs[t.outpoint.hash+":"+t.outpoint.index];n&&e.sign(r,F.getPrivateKeyForAddress(n.address))}),e},this.getMasterKey=function(){return w},this.getAccountZero=function(){return _},this.getInternalAccount=function(){return S},this.getExternalAccount=function(){return k},this.getPrivateKey=function(e){return k.derive(e).priv},this.getInternalPrivateKey=function(e){return S.derive(e).priv},this.getPrivateKeyForAddress=function(e){var t;if((t=this.addresses.indexOf(e))>-1)return this.getPrivateKey(t);if((t=this.changeAddresses.indexOf(e))>-1)return this.getInternalPrivateKey(t);throw new Error("Unknown address. Make sure the address is from the keychain and has been generated.")}}var i=e("./convert"),o=e("./transaction").Transaction,a=e("./hdwallet.js"),s=e("secure-random");t.exports=n}).call(this,e("FWaASH"))},{"./convert":57,"./hdwallet.js":60,"./transaction":69,FWaASH:15,"secure-random":53}]},{},[61])(61)}),function e(t,r,n){function i(a,s){if(!r[a]){if(!t[a]){var u="function"==typeof require&&require;if(!s&&u)return u(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return i(r?r:e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var o="function"==typeof require&&require,a=0;a<n.length;a++)i(n[a]);return i}({1:[function(e,t){t.exports.RTCSessionDescription=window.RTCSessionDescription||window.mozRTCSessionDescription,t.exports.RTCPeerConnection=window.RTCPeerConnection||window.mozRTCPeerConnection||window.webkitRTCPeerConnection,t.exports.RTCIceCandidate=window.RTCIceCandidate||window.mozRTCIceCandidate},{}],2:[function(e,t){function r(e,t,a){return this instanceof r?(i.call(this),this.options=n.extend({serialization:"binary",reliable:!1},a),this.open=!1,this.type="data",this.peer=e,this.provider=t,this.id=this.options.connectionId||r._idPrefix+n.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),void o.startConnection(this,this.options._payload||{originator:!0})):new r(e,t,a)}var n=e("./util"),i=e("eventemitter3"),o=e("./negotiator"),a=e("reliable");n.inherits(r,i),r._idPrefix="dc_",r.prototype.initialize=function(e){this._dc=this.dataChannel=e,this._configureDataChannel()},r.prototype._configureDataChannel=function(){var e=this;n.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){n.log("Data channel connection success"),e.open=!0,e.emit("open")},!n.supports.sctp&&this.reliable&&(this._reliable=new a(this._dc,n.debug)),this._reliable?this._reliable.onmessage=function(t){e.emit("data",t)}:this._dc.onmessage=function(t){e._handleDataMessage(t)},this._dc.onclose=function(){n.log("DataChannel closed for:",e.peer),e.close()}},r.prototype._handleDataMessage=function(e){var t=this,r=e.data,i=r.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(i===Blob)return void n.blobToArrayBuffer(r,function(e){r=n.unpack(e),t.emit("data",r)});if(i===ArrayBuffer)r=n.unpack(r);else if(i===String){var o=n.binaryStringToArrayBuffer(r);r=n.unpack(o)}}else"json"===this.serialization&&(r=JSON.parse(r));if(r.__peerData){var a=r.__peerData,s=this._chunkedData[a]||{data:[],count:0,total:r.total};return s.data[r.n]=r.data,s.count+=1,s.total===s.count&&(delete this._chunkedData[a],r=new Blob(s.data),this._handleDataMessage({data:r})),void(this._chunkedData[a]=s)}this.emit("data",r)},r.prototype.close=function(){this.open&&(this.open=!1,o.cleanup(this),this.emit("close"))},r.prototype.send=function(e,t){if(!this.open)return void this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));if(this._reliable)return void this._reliable.send(e);var r=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(e));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var i=n.pack(e),o=n.chunkedBrowsers[this._peerBrowser]||n.chunkedBrowsers[n.browser];if(o&&!t&&i.size>n.chunkedMTU)return void this._sendChunks(i);n.supports.sctp?n.supports.binaryBlob?this._bufferedSend(i):n.blobToArrayBuffer(i,function(e){r._bufferedSend(e)}):n.blobToBinaryString(i,function(e){r._bufferedSend(e)})}else this._bufferedSend(e)},r.prototype._bufferedSend=function(e){(this._buffering||!this._trySend(e))&&(this._buffer.push(e),this.bufferSize=this._buffer.length)},r.prototype._trySend=function(e){try{this._dc.send(e)}catch(t){this._buffering=!0;var r=this;return setTimeout(function(){r._buffering=!1,r._tryBuffer()},100),!1}return!0},r.prototype._tryBuffer=function(){if(0!==this._buffer.length){var e=this._buffer[0];this._trySend(e)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},r.prototype._sendChunks=function(e){for(var t=n.chunk(e),r=0,i=t.length;i>r;r+=1){var e=t[r];this.send(e,!0)}},r.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":this._peerBrowser=t.browser,o.handleSDP(e.type,this,t.sdp);break;case"CANDIDATE":o.handleCandidate(this,t.candidate);break;default:n.warn("Unrecognized message type:",e.type,"from peer:",this.peer)
}},t.exports=r},{"./negotiator":5,"./util":8,eventemitter3:9,reliable:12}],3:[function(e){return"undefined"==typeof window?!1:(window.Socket=e("./socket"),window.MediaConnection=e("./mediaconnection"),window.DataConnection=e("./dataconnection"),window.Peer=e("./peer"),window.RTCPeerConnection=e("./adapter").RTCPeerConnection,window.RTCSessionDescription=e("./adapter").RTCSessionDescription,window.RTCIceCandidate=e("./adapter").RTCIceCandidate,window.Negotiator=e("./negotiator"),window.util=e("./util"),void(window.BinaryPack=e("js-binarypack")))},{"./adapter":1,"./dataconnection":2,"./mediaconnection":4,"./negotiator":5,"./peer":6,"./socket":7,"./util":8,"js-binarypack":10}],4:[function(e,t){function r(e,t,a){return this instanceof r?(i.call(this),this.options=n.extend({},a),this.open=!1,this.type="media",this.peer=e,this.provider=t,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||r._idPrefix+n.randomToken(),void(this.localStream&&o.startConnection(this,{_stream:this.localStream,originator:!0}))):new r(e,t,a)}var n=e("./util"),i=e("eventemitter3"),o=e("./negotiator");n.inherits(r,i),r._idPrefix="mc_",r.prototype.addStream=function(e){n.log("Receiving stream",e),this.remoteStream=e,this.emit("stream",e)},r.prototype.handleMessage=function(e){var t=e.payload;switch(e.type){case"ANSWER":o.handleSDP(e.type,this,t.sdp),this.open=!0;break;case"CANDIDATE":o.handleCandidate(this,t.candidate);break;default:n.warn("Unrecognized message type:",e.type,"from peer:",this.peer)}},r.prototype.answer=function(e){if(this.localStream)return void n.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this.options._payload._stream=e,this.localStream=e,o.startConnection(this,this.options._payload);for(var t=this.provider._getMessages(this.id),r=0,i=t.length;i>r;r+=1)this.handleMessage(t[r]);this.open=!0},r.prototype.close=function(){this.open&&(this.open=!1,o.cleanup(this),this.emit("close"))},t.exports=r},{"./negotiator":5,"./util":8,eventemitter3:9}],5:[function(e,t){var r=e("./util"),n=e("./adapter").RTCPeerConnection,i=e("./adapter").RTCSessionDescription,o=e("./adapter").RTCIceCandidate,a={pcs:{data:{},media:{}},queue:[]};a._idPrefix="pc_",a.startConnection=function(e,t){var n=a._getPeerConnection(e,t);if("media"===e.type&&t._stream&&n.addStream(t._stream),e.pc=e.peerConnection=n,t.originator){if("data"===e.type){var i={};r.supports.sctp||(i={reliable:t.reliable});var o=n.createDataChannel(e.label,i);e.initialize(o)}r.supports.onnegotiationneeded||a._makeOffer(e)}else a.handleSDP("OFFER",e,t.sdp)},a._getPeerConnection=function(e,t){a.pcs[e.type]||r.error(e.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),a.pcs[e.type][e.peer]||(a.pcs[e.type][e.peer]={});{var n;a.pcs[e.type][e.peer]}return t.pc&&(n=a.pcs[e.type][e.peer][t.pc]),n&&"stable"===n.signalingState||(n=a._startPeerConnection(e)),n},a._startPeerConnection=function(e){r.log("Creating RTCPeerConnection.");var t=a._idPrefix+r.randomToken(),i={};"data"!==e.type||r.supports.sctp?"media"===e.type&&(i={optional:[{DtlsSrtpKeyAgreement:!0}]}):i={optional:[{RtpDataChannels:!0}]};var o=new n(e.provider.options.config,i);return a.pcs[e.type][e.peer][t]=o,a._setupListeners(e,o,t),o},a._setupListeners=function(e,t){var n=e.peer,i=e.id,o=e.provider;r.log("Listening for ICE candidates."),t.onicecandidate=function(t){t.candidate&&(r.log("Received ICE candidates for:",e.peer),o.socket.send({type:"CANDIDATE",payload:{candidate:t.candidate,type:e.type,connectionId:e.id},dst:n}))},t.oniceconnectionstatechange=function(){switch(t.iceConnectionState){case"disconnected":case"failed":r.log("iceConnectionState is disconnected, closing connections to "+n),e.close();break;case"completed":t.onicecandidate=r.noop}},t.onicechange=t.oniceconnectionstatechange,r.log("Listening for `negotiationneeded`"),t.onnegotiationneeded=function(){r.log("`negotiationneeded` triggered"),"stable"==t.signalingState?a._makeOffer(e):r.log("onnegotiationneeded triggered when not stable. Is another connection being established?")},r.log("Listening for data channel"),t.ondatachannel=function(e){r.log("Received data channel");var t=e.channel,a=o.getConnection(n,i);a.initialize(t)},r.log("Listening for remote stream"),t.onaddstream=function(e){r.log("Received remote stream");var t=e.stream,a=o.getConnection(n,i);"media"===a.type&&a.addStream(t)}},a.cleanup=function(e){r.log("Cleaning up PeerConnection to "+e.peer);var t=e.pc;!t||"closed"===t.readyState&&"closed"===t.signalingState||(t.close(),e.pc=null)},a._makeOffer=function(e){var t=e.pc;t.createOffer(function(n){r.log("Created offer."),!r.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,function(){r.log("Set localDescription: offer","for:",e.peer),e.provider.socket.send({type:"OFFER",payload:{sdp:n,type:e.type,label:e.label,connectionId:e.id,reliable:e.reliable,serialization:e.serialization,metadata:e.metadata,browser:r.browser},dst:e.peer})},function(t){e.provider.emitError("webrtc",t),r.log("Failed to setLocalDescription, ",t)})},function(t){e.provider.emitError("webrtc",t),r.log("Failed to createOffer, ",t)},e.options.constraints)},a._makeAnswer=function(e){var t=e.pc;t.createAnswer(function(n){r.log("Created answer."),!r.supports.sctp&&"data"===e.type&&e.reliable&&(n.sdp=Reliable.higherBandwidthSDP(n.sdp)),t.setLocalDescription(n,function(){r.log("Set localDescription: answer","for:",e.peer),e.provider.socket.send({type:"ANSWER",payload:{sdp:n,type:e.type,connectionId:e.id,browser:r.browser},dst:e.peer})},function(t){e.provider.emitError("webrtc",t),r.log("Failed to setLocalDescription, ",t)})},function(t){e.provider.emitError("webrtc",t),r.log("Failed to create answer, ",t)})},a.handleSDP=function(e,t,n){n=new i(n);var o=t.pc;r.log("Setting remote description",n),o.setRemoteDescription(n,function(){r.log("Set remoteDescription:",e,"for:",t.peer),"OFFER"===e&&a._makeAnswer(t)},function(e){t.provider.emitError("webrtc",e),r.log("Failed to setRemoteDescription, ",e)})},a.handleCandidate=function(e,t){var n=t.candidate,i=t.sdpMLineIndex;e.pc.addIceCandidate(new o({sdpMLineIndex:i,candidate:n})),r.log("Added ICE candidate for:",e.peer)},t.exports=a},{"./adapter":1,"./util":8}],6:[function(e,t){function r(e,t){return this instanceof r?(i.call(this),e&&e.constructor==Object?(t=e,e=void 0):e&&(e=e.toString()),t=n.extend({debug:0,host:n.CLOUD_HOST,port:n.CLOUD_PORT,key:"peerjs",path:"/",token:n.randomToken(),config:n.defaultConfig},t),this.options=t,"/"===t.host&&(t.host=window.location.hostname),"/"!==t.path[0]&&(t.path="/"+t.path),"/"!==t.path[t.path.length-1]&&(t.path+="/"),void 0===t.secure&&t.host!==n.CLOUD_HOST&&(t.secure=n.isSecure()),t.logFunction&&n.setLogFunction(t.logFunction),n.setLogLevel(t.debug),n.supports.audioVideo||n.supports.data?n.validateId(e)?n.validateKey(t.key)?t.secure&&"0.peerjs.com"===t.host?void this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS."):(this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={},this._initializeServerConnection(),void(e?this._initialize(e):this._retrieveId())):void this._delayedAbort("invalid-key",'API KEY "'+t.key+'" is invalid'):void this._delayedAbort("invalid-id",'ID "'+e+'" is invalid'):void this._delayedAbort("browser-incompatible","The current browser does not support WebRTC")):new r(e,t)}var n=e("./util"),i=e("eventemitter3"),o=e("./socket"),a=e("./mediaconnection"),s=e("./dataconnection");n.inherits(r,i),r.prototype._initializeServerConnection=function(){var e=this;this.socket=new o(this.options.secure,this.options.host,this.options.port,this.options.path,this.options.key),this.socket.on("message",function(t){e._handleMessage(t)}),this.socket.on("error",function(t){e._abort("socket-error",t)}),this.socket.on("disconnected",function(){e.disconnected||(e.emitError("network","Lost connection to server."),e.disconnect())}),this.socket.on("close",function(){e.disconnected||e._abort("socket-closed","Underlying socket is already closed.")})},r.prototype._retrieveId=function(){var e=this,t=new XMLHttpRequest,r=this.options.secure?"https://":"http://",i=r+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/id",o="?ts="+(new Date).getTime()+Math.random();i+=o,t.open("get",i,!0),t.onerror=function(t){n.error("Error retrieving ID",t);var r="";"/"===e.options.path&&e.options.host!==n.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),e._abort("server-error","Could not get an ID from the server."+r)},t.onreadystatechange=function(){return 4===t.readyState?200!==t.status?void t.onerror():void e._initialize(t.responseText):void 0},t.send(null)},r.prototype._initialize=function(e){this.id=e,this.socket.start(this.id,this.options.token)},r.prototype._handleMessage=function(e){var t,r=e.type,i=e.payload,o=e.src;switch(r){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",i.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":n.log("Received leave message from",o),this._cleanupPeer(o);break;case"EXPIRE":this.emitError("peer-unavailable","Could not connect to peer "+o);break;case"OFFER":var u=i.connectionId;if(t=this.getConnection(o,u))n.warn("Offer received for existing Connection ID:",u);else{if("media"===i.type)t=new a(o,this,{connectionId:u,_payload:i,metadata:i.metadata}),this._addConnection(o,t),this.emit("call",t);else{if("data"!==i.type)return void n.warn("Received malformed connection type:",i.type);t=new s(o,this,{connectionId:u,_payload:i,metadata:i.metadata,label:i.label,serialization:i.serialization,reliable:i.reliable}),this._addConnection(o,t),this.emit("connection",t)}for(var c=this._getMessages(u),f=0,l=c.length;l>f;f+=1)t.handleMessage(c[f])}break;default:if(!i)return void n.warn("You received a malformed message from "+o+" of type "+r);var h=i.connectionId;t=this.getConnection(o,h),t&&t.pc?t.handleMessage(e):h?this._storeMessage(h,e):n.warn("You received an unrecognized message:",e)}},r.prototype._storeMessage=function(e,t){this._lostMessages[e]||(this._lostMessages[e]=[]),this._lostMessages[e].push(t)},r.prototype._getMessages=function(e){var t=this._lostMessages[e];return t?(delete this._lostMessages[e],t):[]},r.prototype.connect=function(e,t){if(this.disconnected)return n.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");var r=new s(e,this,t);return this._addConnection(e,r),r},r.prototype.call=function(e,t,r){if(this.disconnected)return n.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emitError("disconnected","Cannot connect to new Peer after disconnecting from server.");if(!t)return void n.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");r=r||{},r._stream=t;var i=new a(e,this,r);return this._addConnection(e,i),i},r.prototype._addConnection=function(e,t){this.connections[e]||(this.connections[e]=[]),this.connections[e].push(t)},r.prototype.getConnection=function(e,t){var r=this.connections[e];if(!r)return null;for(var n=0,i=r.length;i>n;n++)if(r[n].id===t)return r[n];return null},r.prototype._delayedAbort=function(e,t){var r=this;n.setZeroTimeout(function(){r._abort(e,t)})},r.prototype._abort=function(e,t){n.error("Aborting!"),this._lastServerId?this.disconnect():this.destroy(),this.emitError(e,t)},r.prototype.emitError=function(e,t){n.error("Error:",t),"string"==typeof t&&(t=new Error(t)),t.type=e,this.emit("error",t)},r.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},r.prototype._cleanup=function(){if(this.connections)for(var e=Object.keys(this.connections),t=0,r=e.length;r>t;t++)this._cleanupPeer(e[t]);this.emit("close")},r.prototype._cleanupPeer=function(e){for(var t=this.connections[e],r=0,n=t.length;n>r;r+=1)t[r].close()},r.prototype.disconnect=function(){var e=this;n.setZeroTimeout(function(){e.disconnected||(e.disconnected=!0,e.open=!1,e.socket&&e.socket.close(),e.emit("disconnected",e.id),e._lastServerId=e.id,e.id=null)})},r.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)n.log("Attempting reconnection to server with ID "+this._lastServerId),this.disconnected=!1,this._initializeServerConnection(),this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(this.disconnected||this.open)throw new Error("Peer "+this.id+" cannot reconnect because it is not disconnected from the server!");n.error("In a hurry? We're still trying to make the initial connection!")}},r.prototype.listAllPeers=function(e){e=e||function(){};var t=this,r=new XMLHttpRequest,i=this.options.secure?"https://":"http://",o=i+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/peers",a="?ts="+(new Date).getTime()+Math.random();o+=a,r.open("get",o,!0),r.onerror=function(){t._abort("server-error","Could not get peers from the server."),e([])},r.onreadystatechange=function(){if(4===r.readyState){if(401===r.status){var i="";throw i=t.options.host!==n.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",e([]),new Error("It doesn't look like you have permission to list peers IDs. "+i)}e(200!==r.status?[]:JSON.parse(r.responseText))}},r.send(null)},t.exports=r},{"./dataconnection":2,"./mediaconnection":4,"./socket":7,"./util":8,eventemitter3:9}],7:[function(e,t){function r(e,t,n,o,a){if(!(this instanceof r))return new r(e,t,n,o,a);i.call(this),this.disconnected=!1,this._queue=[];var s=e?"https://":"http://",u=e?"wss://":"ws://";this._httpUrl=s+t+":"+n+o+a,this._wsUrl=u+t+":"+n+o+"peerjs?key="+a}var n=e("./util"),i=e("eventemitter3");n.inherits(r,i),r.prototype.start=function(e,t){this.id=e,this._httpUrl+="/"+e+"/"+t,this._wsUrl+="&id="+e+"&token="+t,this._startXhrStream(),this._startWebSocket()},r.prototype._startWebSocket=function(){var e=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(t){try{var r=JSON.parse(t.data)}catch(i){return void n.log("Invalid server message",t.data)}e.emit("message",r)},this._socket.onclose=function(){n.log("Socket closed."),e.disconnected=!0,e.emit("disconnected")},this._socket.onopen=function(){e._timeout&&(clearTimeout(e._timeout),setTimeout(function(){e._http.abort(),e._http=null},5e3)),e._sendQueuedMessages(),n.log("Socket open")})},r.prototype._startXhrStream=function(e){try{var t=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=e||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onerror=function(){clearTimeout(t._timeout),t.emit("disconnected")},this._http.onreadystatechange=function(){2==this.readyState&&this.old?(this.old.abort(),delete this.old):this.readyState>2&&200===this.status&&this.responseText&&t._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(r){n.log("XMLHttpRequest not available; defaulting to WebSockets")}},r.prototype._handleStream=function(e){var t=e.responseText.split("\n");if(e._buffer)for(;e._buffer.length>0;){var r=e._buffer.shift(),i=t[r];try{i=JSON.parse(i)}catch(o){e._buffer.shift(r);break}this.emit("message",i)}var a=t[e._index];if(a)if(e._index+=1,e._index===t.length)e._buffer||(e._buffer=[]),e._buffer.push(e._index-1);else{try{a=JSON.parse(a)}catch(o){return void n.log("Invalid server message",a)}this.emit("message",a)}},r.prototype._setHTTPTimeout=function(){var e=this;this._timeout=setTimeout(function(){var t=e._http;e._wsOpen()?t.abort():(e._startXhrStream(t._streamIndex+1),e._http.old=t)},25e3)},r.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},r.prototype._sendQueuedMessages=function(){for(var e=0,t=this._queue.length;t>e;e+=1)this.send(this._queue[e])},r.prototype.send=function(e){if(!this.disconnected){if(!this.id)return void this._queue.push(e);if(!e.type)return void this.emit("error","Invalid message");var t=JSON.stringify(e);if(this._wsOpen())this._socket.send(t);else{var r=new XMLHttpRequest,n=this._httpUrl+"/"+e.type.toLowerCase();r.open("post",n,!0),r.setRequestHeader("Content-Type","application/json"),r.send(t)}}},r.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)},t.exports=r},{"./util":8,eventemitter3:9}],8:[function(e,t){var r={iceServers:[{url:"stun:stun.l.google.com:19302"}]},n=1,i=e("js-binarypack"),o=e("./adapter").RTCPeerConnection,a={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(e){var t=parseInt(e,10);a.logLevel=isNaN(parseInt(e,10))?e?3:0:t,a.log=a.warn=a.error=a.noop,a.logLevel>0&&(a.error=a._printWith("ERROR")),a.logLevel>1&&(a.warn=a._printWith("WARNING")),a.logLevel>2&&(a.log=a._print)},setLogFunction:function(e){e.constructor!==Function?a.warn("The log function you passed in is not a function. Defaulting to regular logs."):a._print=e},_printWith:function(e){return function(){var t=Array.prototype.slice.call(arguments);t.unshift(e),a._print.apply(a,t)}},_print:function(){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var r=0,n=t.length;n>r;r++)t[r]instanceof Error&&(t[r]="("+t[r].name+") "+t[r].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)},defaultConfig:r,browser:function(){return window.mozRTCPeerConnection?"Firefox":window.webkitRTCPeerConnection?"Chrome":window.RTCPeerConnection?"Supported":"Unsupported"}(),supports:function(){if("undefined"==typeof o)return{};var e,t,n=!0,i=!0,s=!1,u=!1,c=!!window.webkitRTCPeerConnection;try{e=new o(r,{optional:[{RtpDataChannels:!0}]})}catch(f){n=!1,i=!1}if(n)try{t=e.createDataChannel("_PEERJSTEST")}catch(f){n=!1}if(n){try{t.binaryType="blob",s=!0}catch(f){}var l=new o(r,{});try{var h=l.createDataChannel("_PEERJSRELIABLETEST",{});u=h.reliable}catch(f){}l.close()}if(i&&(i=!!e.addStream),!c&&n){var p=new o(r,{optional:[{RtpDataChannels:!0}]});p.onnegotiationneeded=function(){c=!0,a&&a.supports&&(a.supports.onnegotiationneeded=!0)},p.createDataChannel("_PEERJSNEGOTIATIONTEST"),setTimeout(function(){p.close()},1e3)}return e&&e.close(),{audioVideo:i,data:n,binaryBlob:s,binary:u,reliable:u,sctp:u,onnegotiationneeded:c}}(),validateId:function(e){return!e||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},validateKey:function(e){return!e||/^[A-Za-z0-9_-]+(?:[ _-][A-Za-z0-9]+)*$/.exec(e)},debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},pack:i.pack,unpack:i.unpack,log:function(){if(a.debug){var e=!1,t=Array.prototype.slice.call(arguments);t.unshift("PeerJS: ");for(var r=0,n=t.length;n>r;r++)t[r]instanceof Error&&(t[r]="("+t[r].name+") "+t[r].message,e=!0);e?console.error.apply(console,t):console.log.apply(console,t)}},setZeroTimeout:function(e){function t(t){n.push(t),e.postMessage(i,"*")}function r(t){t.source==e&&t.data==i&&(t.stopPropagation&&t.stopPropagation(),n.length&&n.shift()())}var n=[],i="zero-timeout-message";return e.addEventListener?e.addEventListener("message",r,!0):e.attachEvent&&e.attachEvent("onmessage",r),t}(window),chunk:function(e){for(var t=[],r=e.size,i=index=0,o=Math.ceil(r/a.chunkedMTU);r>i;){var s=Math.min(r,i+a.chunkedMTU),u=e.slice(i,s),c={__peerData:n,n:index,data:u,total:o};t.push(c),i=s,index+=1}return n+=1,t},blobToArrayBuffer:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};t.exports=a},{"./adapter":1,"js-binarypack":10}],9:[function(e,t){"use strict";function r(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function n(){}n.prototype._events=void 0,n.prototype.listeners=function(e){if(!this._events||!this._events[e])return[];for(var t=0,r=this._events[e].length,n=[];r>t;t++)n.push(this._events[e][t].fn);return n},n.prototype.emit=function(e,t,r,n,i,o){if(!this._events||!this._events[e])return!1;var a,s,u,c=this._events[e],f=c.length,l=arguments.length,h=c[0];if(1===f){switch(h.once&&this.removeListener(e,h.fn,!0),l){case 1:return h.fn.call(h.context),!0;case 2:return h.fn.call(h.context,t),!0;case 3:return h.fn.call(h.context,t,r),!0;case 4:return h.fn.call(h.context,t,r,n),!0;case 5:return h.fn.call(h.context,t,r,n,i),!0;case 6:return h.fn.call(h.context,t,r,n,i,o),!0}for(s=1,a=new Array(l-1);l>s;s++)a[s-1]=arguments[s];h.fn.apply(h.context,a)}else for(s=0;f>s;s++)switch(c[s].once&&this.removeListener(e,c[s].fn,!0),l){case 1:c[s].fn.call(c[s].context);break;case 2:c[s].fn.call(c[s].context,t);break;case 3:c[s].fn.call(c[s].context,t,r);break;default:if(!a)for(u=1,a=new Array(l-1);l>u;u++)a[u-1]=arguments[u];c[s].fn.apply(c[s].context,a)}return!0},n.prototype.on=function(e,t,n){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(new r(t,n||this)),this},n.prototype.once=function(e,t,n){return this._events||(this._events={}),this._events[e]||(this._events[e]=[]),this._events[e].push(new r(t,n||this,!0)),this},n.prototype.removeListener=function(e,t,r){if(!this._events||!this._events[e])return this;var n=this._events[e],i=[];if(t)for(var o=0,a=n.length;a>o;o++)n[o].fn!==t&&n[o].once!==r&&i.push(n[o]);return this._events[e]=i.length?i:null,this},n.prototype.removeAllListeners=function(e){return this._events?(e?this._events[e]=null:this._events={},this):this},n.prototype.off=n.prototype.removeListener,n.prototype.addListener=n.prototype.on,n.prototype.setMaxListeners=function(){return this},n.EventEmitter=n,n.EventEmitter2=n,n.EventEmitter3=n,"object"==typeof t&&t.exports&&(t.exports=n)},{}],10:[function(e,t){function r(e){this.index=0,this.dataBuffer=e,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new a}function i(e){var t=e.charCodeAt(0);return 2047>=t?"00":65535>=t?"000":2097151>=t?"0000":67108863>=t?"00000":"000000"}function o(e){return e.length>600?new Blob([e]).size:e.replace(/[^\u0000-\u007F]/g,i).length}var a=e("./bufferbuilder").BufferBuilder,s=e("./bufferbuilder").binaryFeatures,u={unpack:function(e){var t=new r(e);return t.unpack()},pack:function(e){var t=new n;t.pack(e);var r=t.getBuffer();return r}};t.exports=u,r.prototype.unpack=function(){var e=this.unpack_uint8();if(128>e){var t=e;return t}if(32>(224^e)){var r=(224^e)-32;return r}var n;if((n=160^e)<=15)return this.unpack_raw(n);if((n=176^e)<=15)return this.unpack_string(n);if((n=144^e)<=15)return this.unpack_array(n);if((n=128^e)<=15)return this.unpack_map(n);switch(e){case 192:return null;case 193:return void 0;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return void 0;case 213:return void 0;case 214:return void 0;case 215:return void 0;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}},r.prototype.unpack_uint8=function(){var e=255&this.dataView[this.index];return this.index++,e},r.prototype.unpack_uint16=function(){var e=this.read(2),t=256*(255&e[0])+(255&e[1]);return this.index+=2,t},r.prototype.unpack_uint32=function(){var e=this.read(4),t=256*(256*(256*e[0]+e[1])+e[2])+e[3];return this.index+=4,t},r.prototype.unpack_uint64=function(){var e=this.read(8),t=256*(256*(256*(256*(256*(256*(256*e[0]+e[1])+e[2])+e[3])+e[4])+e[5])+e[6])+e[7];return this.index+=8,t},r.prototype.unpack_int8=function(){var e=this.unpack_uint8();return 128>e?e:e-256},r.prototype.unpack_int16=function(){var e=this.unpack_uint16();return 32768>e?e:e-65536},r.prototype.unpack_int32=function(){var e=this.unpack_uint32();return e<Math.pow(2,31)?e:e-Math.pow(2,32)},r.prototype.unpack_int64=function(){var e=this.unpack_uint64();return e<Math.pow(2,63)?e:e-Math.pow(2,64)},r.prototype.unpack_raw=function(e){if(this.length<this.index+e)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+e+" "+this.length);var t=this.dataBuffer.slice(this.index,this.index+e);return this.index+=e,t},r.prototype.unpack_string=function(e){for(var t,r,n=this.read(e),i=0,o="";e>i;)t=n[i],128>t?(o+=String.fromCharCode(t),i++):32>(192^t)?(r=(192^t)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&t)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=e,o},r.prototype.unpack_array=function(e){for(var t=new Array(e),r=0;e>r;r++)t[r]=this.unpack();return t},r.prototype.unpack_map=function(e){for(var t={},r=0;e>r;r++){var n=this.unpack(),i=this.unpack();t[n]=i}return t},r.prototype.unpack_float=function(){var e=this.unpack_uint32(),t=e>>31,r=(e>>23&255)-127,n=8388607&e|8388608;return(0==t?1:-1)*n*Math.pow(2,r-23)},r.prototype.unpack_double=function(){var e=this.unpack_uint32(),t=this.unpack_uint32(),r=e>>31,n=(e>>20&2047)-1023,i=1048575&e|1048576,o=i*Math.pow(2,n-20)+t*Math.pow(2,n-52);return(0==r?1:-1)*o},r.prototype.read=function(e){var t=this.index;if(t+e<=this.length)return this.dataView.subarray(t,t+e);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(e){var t=typeof e;if("string"==t)this.pack_string(e);else if("number"==t)Math.floor(e)===e?this.pack_integer(e):this.pack_double(e);else if("boolean"==t)e===!0?this.bufferBuilder.append(195):e===!1&&this.bufferBuilder.append(194);else if("undefined"==t)this.bufferBuilder.append(192);else{if("object"!=t)throw new Error('Type "'+t+'" not yet supported');if(null===e)this.bufferBuilder.append(192);else{var r=e.constructor;if(r==Array)this.pack_array(e);else if(r==Blob||r==File)this.pack_bin(e);else if(r==ArrayBuffer)this.pack_bin(s.useArrayBufferView?new Uint8Array(e):e);else if("BYTES_PER_ELEMENT"in e)this.pack_bin(s.useArrayBufferView?new Uint8Array(e.buffer):e.buffer);else if(r==Object)this.pack_object(e);else if(r==Date)this.pack_string(e.toString());else{if("function"!=typeof e.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(e.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(e){var t=e.length||e.byteLength||e.size;if(15>=t)this.pack_uint8(160+t);else if(65535>=t)this.bufferBuilder.append(218),this.pack_uint16(t);else{if(!(4294967295>=t))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(t)}this.bufferBuilder.append(e)},n.prototype.pack_string=function(e){var t=o(e);if(15>=t)this.pack_uint8(176+t);else if(65535>=t)this.bufferBuilder.append(216),this.pack_uint16(t);else{if(!(4294967295>=t))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(t)}this.bufferBuilder.append(e)},n.prototype.pack_array=function(e){var t=e.length;if(15>=t)this.pack_uint8(144+t);else if(65535>=t)this.bufferBuilder.append(220),this.pack_uint16(t);else{if(!(4294967295>=t))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(t)}for(var r=0;t>r;r++)this.pack(e[r])},n.prototype.pack_integer=function(e){if(e>=-32&&127>=e)this.bufferBuilder.append(255&e);else if(e>=0&&255>=e)this.bufferBuilder.append(204),this.pack_uint8(e);else if(e>=-128&&127>=e)this.bufferBuilder.append(208),this.pack_int8(e);else if(e>=0&&65535>=e)this.bufferBuilder.append(205),this.pack_uint16(e);else if(e>=-32768&&32767>=e)this.bufferBuilder.append(209),this.pack_int16(e);else if(e>=0&&4294967295>=e)this.bufferBuilder.append(206),this.pack_uint32(e);else if(e>=-2147483648&&2147483647>=e)this.bufferBuilder.append(210),this.pack_int32(e);else if(e>=-0x8000000000000000&&0x8000000000000000>=e)this.bufferBuilder.append(211),this.pack_int64(e);else{if(!(e>=0&&0x10000000000000000>=e))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(e)}},n.prototype.pack_double=function(e){var t=0;0>e&&(t=1,e=-e);var r=Math.floor(Math.log(e)/Math.LN2),n=e/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),a=t<<31|r+1023<<20|i/o&1048575,s=i%o;this.bufferBuilder.append(203),this.pack_int32(a),this.pack_int32(s)},n.prototype.pack_object=function(e){var t=Object.keys(e),r=t.length;if(15>=r)this.pack_uint8(128+r);else if(65535>=r)this.bufferBuilder.append(222),this.pack_uint16(r);else{if(!(4294967295>=r))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(r)}for(var n in e)e.hasOwnProperty(n)&&(this.pack(n),this.pack(e[n]))},n.prototype.pack_uint8=function(e){this.bufferBuilder.append(e)},n.prototype.pack_uint16=function(e){this.bufferBuilder.append(e>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint32=function(e){var t=4294967295&e;this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint64=function(e){var t=e/Math.pow(2,32),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)},n.prototype.pack_int8=function(e){this.bufferBuilder.append(255&e)},n.prototype.pack_int16=function(e){this.bufferBuilder.append((65280&e)>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_int32=function(e){this.bufferBuilder.append(e>>>24&255),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_int64=function(e){var t=Math.floor(e/Math.pow(2,32)),r=e%Math.pow(2,32);this.bufferBuilder.append((4278190080&t)>>>24),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)}},{"./bufferbuilder":11}],11:[function(e,t){function r(){this._pieces=[],this._parts=[]
}var n={};n.useBlobBuilder=function(){try{return new Blob([]),!1}catch(e){return!0}}(),n.useArrayBufferView=!n.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(e){return!0}}(),t.exports.binaryFeatures=n;var i=t.exports.BlobBuilder;"undefined"!=typeof window&&(i=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder),r.prototype.append=function(e){"number"==typeof e?this._pieces.push(e):(this.flush(),this._parts.push(e))},r.prototype.flush=function(){if(this._pieces.length>0){var e=new Uint8Array(this._pieces);n.useArrayBufferView||(e=e.buffer),this._parts.push(e),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),n.useBlobBuilder){for(var e=new i,t=0,r=this._parts.length;r>t;t++)e.append(this._parts[t]);return e.getBlob()}return new Blob(this._parts)},t.exports.BufferBuilder=r},{}],12:[function(e,t){function r(e,t){return this instanceof r?(this._dc=e,n.debug=t,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],void this._setupDC()):new r(e)}var n=e("./util");r.prototype.send=function(e){var t=n.pack(e);return t.size<this._mtu?void this._handleSend(["no",t]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(t)},n.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),void(this._count+=1))},r.prototype._setupInterval=function(){var e=this;this._timeout=setInterval(function(){var t=e._queue.shift();if(t._multiple)for(var r=0,n=t.length;n>r;r+=1)e._intervalSend(t[r]);else e._intervalSend(t)},this._interval)},r.prototype._intervalSend=function(e){var t=this;e=n.pack(e),n.blobToBinaryString(e,function(e){t._dc.send(e)}),0===t._queue.length&&(clearTimeout(t._timeout),t._timeout=null)},r.prototype._processAcks=function(){for(var e in this._outgoing)this._outgoing.hasOwnProperty(e)&&this._sendWindowedChunks(e)},r.prototype._handleSend=function(e){for(var t=!0,r=0,n=this._queue.length;n>r;r+=1){var i=this._queue[r];i===e?t=!1:i._multiple&&-1!==i.indexOf(e)&&(t=!1)}t&&(this._queue.push(e),this._timeout||this._setupInterval())},r.prototype._setupDC=function(){var e=this;this._dc.onmessage=function(t){var r=t.data,i=r.constructor;if(i===String){var o=n.binaryStringToArrayBuffer(r);r=n.unpack(o),e._handleMessage(r)}}},r.prototype._handleMessage=function(e){var t,r=e[1],i=this._incoming[r],o=this._outgoing[r];switch(e[0]){case"no":var a=r;a&&this.onmessage(n.unpack(a));break;case"end":if(t=i,this._received[r]=e[2],!t)break;this._ack(r);break;case"ack":if(t=o){var s=e[2];t.ack=Math.max(s,t.ack),t.ack>=t.chunks.length?(n.log("Time: ",new Date-t.timer),delete this._outgoing[r]):this._processAcks()}break;case"chunk":if(t=i,!t){var u=this._received[r];if(u===!0)break;t={ack:["ack",r,0],chunks:[]},this._incoming[r]=t}var c=e[2],f=e[3];t.chunks[c]=new Uint8Array(f),c===t.ack[2]&&this._calculateNextAck(r),this._ack(r);break;default:this._handleSend(e)}},r.prototype._chunk=function(e){for(var t=[],r=e.size,i=0;r>i;){var o=Math.min(r,i+this._mtu),a=e.slice(i,o),s={payload:a};t.push(s),i=o}return n.log("Created",t.length,"chunks."),t},r.prototype._ack=function(e){var t=this._incoming[e].ack;this._received[e]===t[2]&&(this._complete(e),this._received[e]=!0),this._handleSend(t)},r.prototype._calculateNextAck=function(e){for(var t=this._incoming[e],r=t.chunks,n=0,i=r.length;i>n;n+=1)if(void 0===r[n])return void(t.ack[2]=n);t.ack[2]=r.length},r.prototype._sendWindowedChunks=function(e){n.log("sendWindowedChunks for: ",e);for(var t=this._outgoing[e],r=t.chunks,i=[],o=Math.min(t.ack+this._window,r.length),a=t.ack;o>a;a+=1)r[a].sent&&a!==t.ack||(r[a].sent=!0,i.push(["chunk",e,a,r[a].payload]));t.ack+this._window>=r.length&&i.push(["end",e,r.length]),i._multiple=!0,this._handleSend(i)},r.prototype._complete=function(e){n.log("Completed called for",e);var t=this,r=this._incoming[e].chunks,i=new Blob(r);n.blobToArrayBuffer(i,function(e){t.onmessage(n.unpack(e))}),delete this._incoming[e]},r.higherBandwidthSDP=function(e){var t=navigator.appVersion.match(/Chrome\/(.*?) /);if(t&&(t=parseInt(t[1].split(".").shift()),31>t)){var r=e.split("b=AS:30"),n="b=AS:102400";if(r.length>1)return r[0]+n+r[1]}return e},r.prototype.onmessage=function(){},t.exports.Reliable=r},{"./util":13}],13:[function(e,t){var r=e("js-binarypack"),n={debug:!1,inherits:function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},extend:function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r]);return e},pack:r.pack,unpack:r.unpack,log:function(){if(n.debug){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];e.unshift("Reliable: "),console.log.apply(console,e)}},setZeroTimeout:function(e){function t(t){n.push(t),e.postMessage(i,"*")}function r(t){t.source==e&&t.data==i&&(t.stopPropagation&&t.stopPropagation(),n.length&&n.shift()())}var n=[],i="zero-timeout-message";return e.addEventListener?e.addEventListener("message",r,!0):e.attachEvent&&e.attachEvent("onmessage",r),t}(this),blobToArrayBuffer:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsArrayBuffer(e)},blobToBinaryString:function(e,t){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.readAsBinaryString(e)},binaryStringToArrayBuffer:function(e){for(var t=new Uint8Array(e.length),r=0;r<e.length;r++)t[r]=255&e.charCodeAt(r);return t.buffer},randomToken:function(){return Math.random().toString(36).substr(2)}};t.exports=n},{"js-binarypack":10}]},{},[3]),!function(){var e,t,r,n;!function(){var i={},o={};e=function(e,t,r){i[e]={deps:t,callback:r}},n=r=t=function(e){function r(t){if("."!==t.charAt(0))return t;for(var r=t.split("/"),n=e.split("/").slice(0,-1),i=0,o=r.length;o>i;i++){var a=r[i];if(".."===a)n.pop();else{if("."===a)continue;n.push(a)}}return n.join("/")}if(n._eak_seen=i,o[e])return o[e];if(o[e]={},!i[e])throw new Error("Could not find module "+e);for(var a,s=i[e],u=s.deps,c=s.callback,f=[],l=0,h=u.length;h>l;l++)f.push("exports"===u[l]?a={}:t(r(u[l])));var p=c.apply(this,f);return o[e]=a||p}}(),e("promise/all",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to all.");return new t(function(t,r){function n(e){return function(t){o(e,t)}}function o(e,r){s[e]=r,0===--u&&t(s)}var a,s=[],u=e.length;0===u&&t([]);for(var c=0;c<e.length;c++)a=e[c],a&&i(a.then)?a.then(n(c),r):o(c,a)})}var n=e.isArray,i=e.isFunction;t.all=r}),e("promise/asap",["exports"],function(e){"use strict";function t(){return function(){process.nextTick(i)}}function r(){var e=0,t=new u(i),r=document.createTextNode("");return t.observe(r,{characterData:!0}),function(){r.data=e=++e%2}}function n(){return function(){c.setTimeout(i,1)}}function i(){for(var e=0;e<f.length;e++){var t=f[e],r=t[0],n=t[1];r(n)}f=[]}function o(e,t){var r=f.push([e,t]);1===r&&a()}var a,s="undefined"!=typeof window?window:{},u=s.MutationObserver||s.WebKitMutationObserver,c="undefined"!=typeof global?global:void 0===this?window:this,f=[];a="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?t():u?r():n(),e.asap=o}),e("promise/config",["exports"],function(e){"use strict";function t(e,t){return 2!==arguments.length?r[e]:void(r[e]=t)}var r={instrument:!1};e.config=r,e.configure=t}),e("promise/polyfill",["./promise","./utils","exports"],function(e,t,r){"use strict";function n(){var e;e="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var t="Promise"in e&&"resolve"in e.Promise&&"reject"in e.Promise&&"all"in e.Promise&&"race"in e.Promise&&function(){var t;return new e.Promise(function(e){t=e}),o(t)}();t||(e.Promise=i)}var i=e.Promise,o=t.isFunction;r.polyfill=n}),e("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(e,t,r,n,i,o,a,s){"use strict";function u(e){if(!b(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(e,this)}function c(e,t){function r(e){d(t,e)}function n(e){g(t,e)}try{e(r,n)}catch(i){n(i)}}function f(e,t,r,n){var i,o,a,s,u=b(r);if(u)try{i=r(n),a=!0}catch(c){s=!0,o=c}else i=n,a=!0;p(t,i)||(u&&a?d(t,i):s?g(t,o):e===T?d(t,i):e===C&&g(t,i))}function l(e,t,r,n){var i=e._subscribers,o=i.length;i[o]=t,i[o+T]=r,i[o+C]=n}function h(e,t){for(var r,n,i=e._subscribers,o=e._detail,a=0;a<i.length;a+=3)r=i[a],n=i[a+t],f(t,r,n,o);e._subscribers=null}function p(e,t){var r,n=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(P(t)&&(n=t.then,b(n)))return n.call(t,function(n){return r?!0:(r=!0,void(t!==n?d(e,n):y(e,n)))},function(t){return r?!0:(r=!0,void g(e,t))}),!0}catch(i){return r?!0:(g(e,i),!0)}return!1}function d(e,t){e===t?y(e,t):p(e,t)||y(e,t)}function y(e,t){e._state===E&&(e._state=D,e._detail=t,m.async(v,e))}function g(e,t){e._state===E&&(e._state=D,e._detail=t,m.async(B,e))}function v(e){h(e,e._state=T)}function B(e){h(e,e._state=C)}var m=e.config,P=(e.configure,t.objectOrFunction),b=t.isFunction,w=(t.now,r.all),F=n.race,_=i.resolve,S=o.reject,k=a.asap;m.async=k;var E=void 0,D=0,T=1,C=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var r=this,n=new this.constructor(function(){});if(this._state){var i=arguments;m.async(function(){f(r._state,n,i[r._state-1],r._detail)})}else l(this,n,e,t);return n},"catch":function(e){return this.then(null,e)}},u.all=w,u.race=F,u.resolve=_,u.reject=S,s.Promise=u}),e("promise/race",["./utils","exports"],function(e,t){"use strict";function r(e){var t=this;if(!n(e))throw new TypeError("You must pass an array to race.");return new t(function(t,r){for(var n,i=0;i<e.length;i++)n=e[i],n&&"function"==typeof n.then?n.then(t,r):t(n)})}var n=e.isArray;t.race=r}),e("promise/reject",["exports"],function(e){"use strict";function t(e){var t=this;return new t(function(t,r){r(e)})}e.reject=t}),e("promise/resolve",["exports"],function(e){"use strict";function t(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}e.resolve=t}),e("promise/utils",["exports"],function(e){"use strict";function t(e){return r(e)||"object"==typeof e&&null!==e}function r(e){return"function"==typeof e}function n(e){return"[object Array]"===Object.prototype.toString.call(e)}var i=Date.now||function(){return(new Date).getTime()};e.objectOrFunction=t,e.isFunction=r,e.isArray=n,e.now=i}),t("promise/polyfill").polyfill()}();var XBBCODE=function(){function e(t,r,n,i,o,c,f){f=f||[],n++;var l,h,p,d,y=new RegExp("(<bbcl="+n+" )("+s.join("|")+")([ =>])","gi"),g=new RegExp("(<bbcl="+n+" )("+s.join("|")+")([ =>])","i"),v=c.match(y)||[],B=a[t]||{};for(y.lastIndex=0,v||(c=""),p=0;p<v.length;p++)g.lastIndex=0,d=v[p].match(g)[2].toLowerCase(),B.restrictChildrenTo.length>0&&(B.validChildLookup[d]||(h='The tag "'+d+'" is not allowed as a child of the tag "'+t+'".',f.push(h))),l=a[d]||{},l.restrictParentsTo.length>0&&(l.validParentLookup[t]||(h='The tag "'+t+'" is not allowed as a parent of the tag "'+d+'".',f.push(h)));return c=c.replace(u,function(t,r,n,i,o){return f=e(n,t,r,n,i,o,f),t}),f}function t(e){return e=e.replace(/\<([^\>][^\>]*?)\>/gi,function(e,t){var r=t.match(/^bbcl=([0-9]+) /);return null===r?"<bbcl=0 "+t+">":"<"+t.replace(/^(bbcl=)([0-9]+)/,function(e,t,r){return t+(parseInt(r,10)+1)})+">"})}function r(e){return e.replace(/<bbcl=[0-9]+ \/\*>/gi,"").replace(/<bbcl=[0-9]+ /gi,"&#91;").replace(/>/gi,"&#93;")}function n(e){var t=e.text;return t=t.replace(u,B)}function i(e){for(e=e.replace(/\[(?!\*[ =\]]|list([ =][^\]]*)?\]|\/list[\]])/gi,"<"),e=e.replace(/\[(?=list([ =][^\]]*)?\]|\/list[\]])/gi,">");e!==(e=e.replace(/>list([ =][^\]]*)?\]([^>]*?)(>\/list])/gi,function(e){for(var t=e;t!==(t=t.replace(/\[\*\]([^\[]*?)(\[\*\]|>\/list])/i,function(e,t,r){r=">/list]"===r?"</*]</list]":"</*][*]";var n="<*]"+t+r;return n})););return t=t.replace(/>/g,"<")})););return e=e.replace(/</g,"[")}function o(e){for(;e!==(e=e.replace(c,function(e){return e=e.replace(/\[/g,"<"),e=e.replace(/\]/g,">"),t(e)})););return e}var a,s,u,c,f,l,h,p={},d=/^(?:https?|file|c):(?:\/{1,3}|\\{1})[-a-zA-Z0-9:@#%&()~_?\+=\/\\\.]*$/,y=/^(?:red|green|blue|orange|yellow|black|white|brown|gray|silver|purple|maroon|fushsia|lime|olive|navy|teal|aqua)$/,g=/^#?[a-fA-F0-9]{6}$/,v=[];a={b:{openTag:function(){return'<span class="xbbcode-b">'},closeTag:function(){return"</span>"}},bbcode:{openTag:function(){return""},closeTag:function(){return""}},code:{openTag:function(){return'<span class="xbbcode-code">'},closeTag:function(){return"</span>"},noParse:!0},color:{openTag:function(e){var t=e.substr(1)||"black";return y.lastIndex=0,g.lastIndex=0,y.test(t)||(g.test(t)?"#"!==t.substr(0,1)&&(t="#"+t):t="black"),'<span style="color:'+t+'">'},closeTag:function(){return"</span>"}},i:{openTag:function(){return'<span class="xbbcode-i">'},closeTag:function(){return"</span>"}},img:{openTag:function(e,t){var r=t;return d.lastIndex=0,d.test(r)||(r=""),'<img src="'+r+'" />'},closeTag:function(){return""},displayContent:!1},list:{openTag:function(){return"<ul>"},closeTag:function(){return"</ul>"},restrictChildrenTo:["*","li"]},noparse:{openTag:function(){return""},closeTag:function(){return""},noParse:!0},php:{openTag:function(){return'<span class="xbbcode-code">'},closeTag:function(){return"</span>"},noParse:!0},quote:{openTag:function(){return'<blockquote class="xbbcode-blockquote">'},closeTag:function(){return"</blockquote>"}},s:{openTag:function(){return'<span class="xbbcode-s">'},closeTag:function(){return"</span>"}},size:{openTag:function(e){var t=parseInt(e.substr(1),10)||0;return(4>t||t>40)&&(t=14),'<span class="xbbcode-size-'+t+'">'},closeTag:function(){return"</span>"}},table:{openTag:function(){return'<table class="xbbcode-table">'},closeTag:function(){return"</table>"},restrictChildrenTo:["tbody","thead","tfoot","tr"]},tbody:{openTag:function(){return"<tbody>"},closeTag:function(){return"</tbody>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},tfoot:{openTag:function(){return"<tfoot>"},closeTag:function(){return"</tfoot>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},thead:{openTag:function(){return'<thead class="xbbcode-thead">'},closeTag:function(){return"</thead>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},td:{openTag:function(){return'<td class="xbbcode-td">'},closeTag:function(){return"</td>"},restrictParentsTo:["tr"]},th:{openTag:function(){return'<td class="xbbcode-th">'},closeTag:function(){return"</td>"},restrictParentsTo:["tr"]},tr:{openTag:function(){return'<tr class="xbbcode-tr">'},closeTag:function(){return"</tr>"},restrictChildrenTo:["td","th"],restrictParentsTo:["table","tbody","tfoot","thead"]},u:{openTag:function(){return'<span class="xbbcode-u">'},closeTag:function(){return"</span>"}},url:{openTag:function(e,t){var r;return r=e?e.substr(1):t.replace(/<.*?>/g,""),d.lastIndex=0,d.test(r)||(r="#"),'<a href="'+r+'">'},closeTag:function(){return"</a>"}},"*":{openTag:function(){return"<li>"},closeTag:function(){return"</li>"},restrictParentsTo:["list"]}},s=[],function(){var e,t,r;for(e in a)if(a.hasOwnProperty(e)){for("*"===e?s.push("\\"+e):(s.push(e),a[e].noParse&&v.push(e)),a[e].validChildLookup={},a[e].validParentLookup={},a[e].restrictParentsTo=a[e].restrictParentsTo||[],a[e].restrictChildrenTo=a[e].restrictChildrenTo||[],r=a[e].restrictChildrenTo.length,t=0;r>t;t++)a[e].validChildLookup[a[e].restrictChildrenTo[t]]=!0;for(r=a[e].restrictParentsTo.length,t=0;r>t;t++)a[e].validParentLookup[a[e].restrictParentsTo[t]]=!0}}(),u=new RegExp("<bbcl=([0-9]+) ("+s.join("|")+")([ =][^>]*?)?>((?:.|[\\r\\n])*?)<bbcl=\\1 /\\2>","gi"),c=new RegExp("\\[("+s.join("|")+")([ =][^\\]]*?)?\\]([^\\[]*?)\\[/\\1\\]","gi"),f=new RegExp("\\[("+v.join("|")+")([ =][^\\]]*?)?\\]([\\s\\S]*?)\\[/\\1\\]","gi"),function(){for(var e=[],t=0;t<s.length;t++)"\\*"!==s[t]&&e.push("/"+s[t]);l=new RegExp("(\\[)((?:"+s.join("|")+")(?:[ =][^\\]]*?)?)(\\])","gi"),h=new RegExp("(\\[)("+e.join("|")+")(\\])","gi")}();var B=function(e,t,n,i,o){n=n.toLowerCase();var s=a[n].noParse?r(o):o.replace(u,B),c=a[n].openTag(i,s),f=a[n].closeTag(i,s);return a[n].displayContent===!1&&(s=""),c+s+f};return p.process=function(t){var r={html:"",error:!1},a=[];for(t.text=t.text.replace(/</g,"&lt;"),t.text=t.text.replace(/>/g,"&gt;"),t.text=t.text.replace(l,function(e,t,r){return"<"+r+">"}),t.text=t.text.replace(h,function(e,t,r){return"<"+r+">"}),t.text=t.text.replace(/\[/g,"&#91;"),t.text=t.text.replace(/\]/g,"&#93;"),t.text=t.text.replace(/</g,"["),t.text=t.text.replace(/>/g,"]");t.text!==(t.text=t.text.replace(f,function(e,t,r,n){return n=n.replace(/\[/g,"&#91;"),n=n.replace(/\]/g,"&#93;"),r=r||"",n=n||"","["+t+r+"]"+n+"[/"+t+"]"})););return t.text=i(t.text),t.text=o(t.text),a=e("bbcode",t.text,-1,"","",t.text),r.html=n(t),(-1!==r.html.indexOf("[")||-1!==r.html.indexOf("]"))&&a.push("Some tags appear to be misaligned."),t.removeMisalignedTags&&(r.html=r.html.replace(/\[.*?\]/g,"")),t.addInLineBreaks&&(r.html=r.html.replace(/\r\n/g,"\n"),r.html=r.html.replace(/(\r|\n)/g,"$1<br/>")),r.html=r.html.replace("&#91;","["),r.html=r.html.replace("&#93;","]"),r.error=0===a.length?!1:!0,r.errorQueue=a,r},p}();Boron={},Boron.persistent_merge=function(e,t){return t=t||[],(Array.isArray(t)||Array.isArray(t))&&Array.isArray(t)!==Array.isArray(e),Object.keys(t).reduce(function(e,r){return Boron.set_deep_value(e,r,t[r])},e)},Boron.set_deep_value=function(e,t,r){var n,i="___MAGIC___",o=new RegExp(i,"g"),t=t.replace(/\\\./g,i),a=t.split(".").map(function(e){return e.replace(o,".")}),s=a.pop(),u=n=Boron.shallow_copy(e);return a.forEach(function(e){n[e]=Boron.shallow_copy(n[e]),n=n[e]}),n[s]=r,u},Boron.shallow_copy=function(e){return Array.isArray(e)?e.slice():Object.keys(e||{}).reduce(function(t,r){return t[r]=e[r],t},{})},Boron.shallow_diff=function(e,t){return Object.keys(e).reduce(function(r,n){return JSON.stringify(e[n])!=JSON.stringify(t[n])&&(r[n]=t[n]),r},e.constructor())},Boron.deep_diff=function(e,t){return Object.keys(t).reduce(function(r,n){var i=typeof e[n],o=typeof t[n];if(i!=o)return r[n]=t[n],r;if("object"==i){var a=Boron.deep_diff(e[n],t[n]);return Object.keys(a).length&&(r[n]=a),r}return e[n]!==t[n]&&(r[n]=t[n]),r},t.constructor())},Boron.flatten=function(e,t){if(!Boron.proper_object(e))return{};var r={};t=t?t+".":"";for(var n in e)Boron.proper_object(e[n])?r=Boron.extend(r,Boron.flatten(e[n],t+n)):r[t+n]=e[n];return r},Boron.unflatten=function(e){return Boron.persistent_merge({},e)},Boron.proper_object=function(e){return"object"==typeof e&&!Array.isArray(e)&&!!e},Boron.extend=function(){var e={};return Array.prototype.slice.call(arguments).forEach(function(t){for(var r in t)e[r]=t[r]}),e},Boron.memoize=function(e){var t={};return function(){var r=Array.prototype.slice.call(arguments),n=r.toString();return t[n]?t[n]:t[n]=e.apply(null,r)}},FileFile={},FileFile.oldFile=null,FileFile.prepBlob=function(e,t){"string"!=typeof e&&(e=JSON.stringify(e));var r;return r="file"==t?FileFile.dataURItoBlob(e):new Blob([e],{type:"text/plain"}),navigator.appVersion.toString().indexOf(".NET")>0?r:(FileFile.oldFile&&window.URL.revokeObjectURL(FileFile.oldFile),FileFile.oldFile=window.URL.createObjectURL(r),FileFile.oldFile)},FileFile.openPuffFile=function(e){return FileFile.handleFileOpen(e)},FileFile.openTextFile=function(e){return FileFile.handleFileOpen(e)},FileFile.openBinaryFile=function(e){return FileFile.handleFileOpen(e,"asDataURI")},FileFile.handleFileOpen=function(e,t){return new Promise(function(r,n){var i=new FileReader;return i.onload=function(e){var t=e.target.result;r(t)},e.files[0]?void(t?i.readAsDataURL(e.files[0]):i.readAsText(e.files[0])):n("No file selected")})},FileFile.dataURItoBlob=function(e){var t;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var r=e.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(t.length),i=0;i<t.length;i++)n[i]=t.charCodeAt(i);return new Blob([n],{type:r})},Events={},Events.subs={},Events.pub=function(e,t){return setImmediate(function(){Events.start_pub(e,t)})},Events.sub=function(e,t){e=Events.scrub_path(e).join("/"),Events.subs[e]||(Events.subs[e]=[]),Events.subs[e].push(t)},Events.unsub=function(e,t){e=Events.scrub_path(e).join("/");var r=Events.subs[e];if(!r)return!1;var n=r.indexOf(t);return-1==n?!1:void r.splice(n,1)},Events.start_pub=function(e,t){var r=Events.scrub_path(e),n=r.join("/");Events.try_pub("*",t,n),r.reduce(function(e,r){var i=e+r+"/";return Events.try_pub(i+"*",t,n),i},""),Events.try_pub(n,t,n)},Events.try_pub=function(e,t,r){var n=Events.subs[e];return n&&n.length?void n.forEach(function(e){e(t,r)}):!1},Events.scrub_path=function(e){return e.replace(/^[^\w*-]+/,"").replace(/[^\w*-]+$/,"").split("/").map(function(e){return e.replace(/[^\w*-]/g,"")})},Gridbox={},Gridbox.getGridCoordBox=function(e,t,r,n,i){var o=function(e,t){return Math.min(e,t)},a=r/t,s=n/e,u=function(e,t){return e==t},c=Array.apply(0,Array(e)).map(function(){return Array.apply(0,Array(t)).map(function(){return 0})});return{get:function(){return c},set_eq:function(e){u=e},add:function(r,n,u,f,l,h,p){if(l=o(l||e-n,e-n),h=o(h||t-r,t-r),u=o(u||0,l),f=o(f||0,h),0>h||0>l)return PB.onError("Block is too big for the grid");e:for(var d=u;l>=d;d++)t:for(var y=f;h>=y;y++){for(var g=0;n>g;g++)for(var v=0;r>v;v++)if(c[d+g][y+v])continue t;break e}if(y==h+1&&d==l+1)return PB.onError("No room in the grid");if(null==y||null==d)return PB.onError("Block too big for the grid");for(var g=0;n>g;g++)for(var v=0;r>v;v++)c[d+g][y+v]=p||1;return{width:r*a,height:n*s,x:y*a,y:d*s+i/1.5}}}},Gridbox.findNeighbor=function(e,t,r){var n=Gridbox.findBoxInGrid(e,t);if(!n)return!1;var i=Gridbox.makeDirBox(n,r);return i?Gridbox.firstThingInBox(e,i[0],i[1]):!1},Gridbox.findBoxInGrid=function(e,t,r){r=r||function(e,t){return e===t},r=function(e,t){return e.sig===t.sig};e:for(var n=0,i=e.length;i>n;n++)for(var o=0,a=e[n].length;a>o;o++)if(r(e[n][o],t))break e;if(n==e.length&&o==e[0].length)return!1;for(var s=0,i=e.length-n;i>s&&r(e[n+s][o],t);s++);for(var u=0,a=e[n].length-o;a>u&&r(e[n][o+u],t);u++);return[[o,n],[o+u-1,n+s-1]]},Gridbox.firstThingInBox=function(e,t,r){for(var n=Math.max(t[1],0),i=Math.min(r[1],e.length-1);i>=n;n++)for(var o=Math.max(t[0],0),a=Math.min(r[0],e[0].length-1);a>=o;o++)if(e[n][o])return e[n][o]},Gridbox.makeDirBox=function(e,t){var r=e[0][1],n=e[0][0],i=e[1][1],o=e[1][0];return"up"==t?[[n,r-1],[o,r-1]]:"down"==t?[[n,i+1],[o,i+1]]:"left"==t?[[n-1,r],[n-1,i]]:"right"==t?[[o+1,r],[o+1,i]]:void 0},Dagoba={},Dagoba.G={},Dagoba.graph=function(e,t){var r=Object.create(Dagoba.G);return r.vertices=[],r.edges=[],r.vertexIndex={},e&&Array.isArray(e)&&r.addVertices(e),t&&Array.isArray(t)&&r.addEdges(t),r},Dagoba.G.v=function(){var e=Dagoba.query(this);return e.add(["vertex"].concat([].slice.call(arguments))),e},Dagoba.G.addVertex=function(e){e._id||(e._id=this.vertices.length+1),this.vertices.push(e),this.vertexIndex[e._id]=e,e._out=[],e._in=[]},Dagoba.G.addEdge=function(e){return e._label?(e._in=this.findVertexById(e._in),e._out=this.findVertexById(e._out),e._in&&e._out?(e._out._out.push(e),e._in._in.push(e),void this.edges.push(e)):!1):!1},Dagoba.G.addVertices=function(e){e.forEach(this.addVertex.bind(this))},Dagoba.G.addEdges=function(e){e.forEach(this.addEdge.bind(this))},Dagoba.G.findVertexById=function(e){return this.vertexIndex[e]},Dagoba.G.findVerticesByIds=function(e){return 1==e.length?[].concat(this.findVertexById(e[0])||[]):e.map(this.findVertexById.bind(this)).filter(Boolean)},Dagoba.G.findVertices=function(e){return"object"==typeof e[0]?this.searchVertices(e[0]):0==e.length?this.vertices.slice():this.findVerticesByIds(e)},Dagoba.G.searchVertices=function(e){return this.vertices.filter(function(t){return Object.keys(e).reduce(function(r,n){return r&&e[n]==t[n]},!0)})},Dagoba.G.findEdgeById=function(e){return Dagoba.find(this.edges,function(t){return t._id==e})},Dagoba.G.findOutEdges=function(e){return e._out},Dagoba.G.findInEdges=function(e){return e._in},Dagoba.G.toString=function(){return'{"V":'+JSON.stringify(this.vertices,Dagoba.cleanvertex)+',"E":'+JSON.stringify(this.edges,Dagoba.cleanedge)+"}"},Dagoba.fromString=function(e){var t=JSON.parse(e);return Dagoba.graph(t.V,t.E)},Dagoba.Q={},Dagoba.query=function(e){var t=Object.create(Dagoba.Q);return t.graph=e,t.state=[],t.program=[],t.gremlins=[],t},Dagoba.Q.run=function(){function e(e,i){var o=n[e],a=r[e]=r[e]||{};return Dagoba.QFuns[o[0]]?Dagoba.QFuns[o[0]](t,o.slice(1)||{},i,a):Dagoba.onError("Unrecognized function call: "+o[0])||i||"pull"}var t=this.graph,r=this.state,n=this.program,i=(this.gremlins,n.length-1),o=i,a=-1,s=[],u=!1;if(!n.length)return[];for(;i>a;){if(u=e(o,u),"pull"==u){if(u=!1,o-1>a){o--;continue}a=o}"done"==u&&(a=o,u=!1),o++,o>i&&(u&&s.push(u),u=!1,o--)}return s=s.map(function(e){return e.result?e.result:e.vertex}),s=Dagoba.firehooks("postquery",this,s)[0]},Dagoba.Q.add=function(e){return this.program.push(e),this},Dagoba.addQFun=function(e,t){Dagoba.QFuns[e]=t,Dagoba.Q[e]=function(){return this.add([e].concat([].slice.apply(arguments)))}},Dagoba.QFuns={},Dagoba.addQFun("vertex",function(e,t,r,n){if(n.vertices||(n.vertices=e.findVertices(t)),!n.vertices.length)return"done";var i=n.vertices.pop();return Dagoba.make_gremlin(i)}),Dagoba.addQFun("out",function(e,t,r,n){if(!(r||n.edges&&n.edges.length))return"pull";if(n.edges&&n.edges.length||(n.edges=e.findOutEdges(r.vertex).filter(Dagoba.filterThings(t[0]))),!n.edges.length)return"pull";var i=n.edges.pop()._in,o=Dagoba.make_gremlin(i);return o}),Dagoba.addQFun("outAllN",function(e,t,r,n){var i=t[0],o=t[1]-1;if(!n.edgeList){if(!r)return"pull";n.edgeList=[],n.current=0,n.edgeList[0]=e.findOutEdges(r.vertex).filter(Dagoba.filterThings(i))}if(!n.edgeList[n.current].length){if(n.current>=o||!n.edgeList[n.current+1]||!n.edgeList[n.current+1].length)return n.edgeList=!1,"pull";n.current++,n.edgeList[n.current+1]=[]}var a=n.edgeList[n.current].pop()._in;n.current<o&&(n.edgeList[n.current+1]||(n.edgeList[n.current+1]=[]),n.edgeList[n.current+1]=n.edgeList[n.current+1].concat(e.findOutEdges(a).filter(Dagoba.filterThings(i))));var s=Dagoba.make_gremlin(a);return s}),Dagoba.addQFun("inAllN",function(e,t,r,n){var i=t[0],o=t[1]-1;if(!n.edgeList){if(!r)return"pull";n.edgeList=[],n.current=0,n.edgeList[0]=e.findInEdges(r.vertex).filter(Dagoba.filterThings(i))}if(!n.edgeList[n.current].length){if(n.current>=o||!n.edgeList[n.current+1]||!n.edgeList[n.current+1].length)return n.edgeList=!1,"pull";n.current++,n.edgeList[n.current+1]=[]}var a=n.edgeList[n.current].pop()._out;n.current<o&&(n.edgeList[n.current+1]||(n.edgeList[n.current+1]=[]),n.edgeList[n.current+1]=n.edgeList[n.current+1].concat(e.findInEdges(a).filter(Dagoba.filterThings(i))));var s=Dagoba.make_gremlin(a);return s}),Dagoba.addQFun("in",function(e,t,r,n){if(!(r||n.edges&&n.edges.length))return"pull";if(n.edges&&n.edges.length||(n.edges=e.findInEdges(r.vertex).filter(Dagoba.filterThings(t[0]))),!n.edges.length)return"pull";var i=n.edges.pop()._out,o=Dagoba.make_gremlin(i);return o}),Dagoba.addQFun("property",function(e,t,r){return r?(r.result=r.vertex[t[0]],r):"pull"}),Dagoba.addQFun("unique",function(e,t,r,n){return r?n[r.vertex._id]?"pull":(n[r.vertex._id]=!0,r):"pull"}),Dagoba.addQFun("filter",function(e,t,r){return r?"function"!=typeof t[0]?Dagoba.onError("Filter arg is not a function: "+t[0])||r:t[0](r.vertex)?r:"pull":"pull"}),Dagoba.addQFun("take",function(e,t,r,n){return n.taken=n.taken?n.taken:0,n.taken==t[0]?(n.taken=0,"done"):r?(n.taken++,r):"pull"}),Dagoba.hooks={},Dagoba.addhook=function(e,t){Dagoba.hooks[e]||(Dagoba.hooks[e]=[]),Dagoba.hooks[e].push(t)},Dagoba.firehooks=function(e,t){var r=[].slice.call(arguments,2);return((Dagoba.hooks||{})[e]||[]).reduce(function(e,r){return r.apply(t,e)},r)},Dagoba.make_gremlin=function(e,t){return{vertex:e,state:t}},Dagoba.filterThings=function(e){return function(t){return e?e+""===e?t._label==e:Array.isArray(e)?!!~e.indexOf(t._label):Dagoba.objFilter(t,e):!0}},Dagoba.objFilter=function(e,t){for(var r in t)if(e[r]!=t[r])return!1;return!0},Dagoba.find=function(e,t){for(var r=0,n=e.length;n>r;r++)if(t(e[r],r,e))return e[r]},Dagoba.cleanvertex=function(e,t){return"_in"==e||"_out"==e?void 0:t},Dagoba.cleanedge=function(e,t){return"_in"==e?t._id:"_out"==e?t._id:t},Dagoba.uniqueify=function(e){return[e.filter(function(e,t,r){return r.indexOf(e)==t})]},Dagoba.cleanclone=function(e){return[e.map(function(e){return JSON.parse(JSON.stringify(e,function(e,t){return"_"==e[0]?void 0:t}))})]},Dagoba.onError=function(e){return console.log(e),!1},"undefined"==typeof PB&&(PB={}),PB.CONFIG||(PB.CONFIG={}),PB.Modules={},PB.M=PB.Modules,PB.version="0.7.3",PB.init=function(e){function t(t,r){PB.CONFIG[t]=e[t]||PB.CONFIG[t]||r}function r(){var e=PB.Persist.get("CONFIG");return e?(PB.CONFIG.mods=e,void Object.keys(PB.CONFIG.mods).forEach(function(t){PB.CONFIG[t]=e[t]})):!1}e=e||{},t("zone",""),t("puffApi","https://i.cx/api/puffs/api.php"),t("userApi","https://i.cx/api/users/api.php"),t("eventsApi","https://i.cx/api/puffs/api.php"),t("enableP2P",!1),t("pageBatchSize",10),t("initLoadGiveup",200),t("networkTimeout",2e4),t("noLocalStorage",!1),t("netblockSuffix","local"),t("cryptoworkerURL",""),t("ephemeralKeychain",!1),t("initLoadBatchSize",20),t("inMemoryShellLimit",1e4),t("globalBigBatchLimit",2e3),t("inMemoryMemoryLimit",3e8),t("anonPrivateAdminKey","5KdVjQwjhMchrZudFVfeRiiPMdrN6rc4CouNh7KPZmh8iHEiWMx"),t("disableSendToServer",!1),t("disableReceivePublic",!1),t("disableCloudIdentity",!1),t("supportedContentTypes",!1),t("shellContentThreshold",1e3),t("localStorageShellLimit",1e3),t("localStorageMemoryLimit",3e6),PB.Users.init(e),PB.Data.init(e),PB.Net.init(e);var n=Object.keys(PB.M);n.forEach(function(t){PB.M[t].init&&PB.M[t].init(e)}),r(),PB.buildCryptoworker(e)},PB.getPuffBySig=function(e){var t=PB.Data.getCachedShellBySig(e);return t||(t=PB.Data.getDecryptedLetterBySig(e)),t?PB.Data.getPuffFromShell(t):PB.Data.getPuffBySig(e)},PB.postPublicMessage=function(e,t){t=t||"text";var r=PB.getCurrentUsername();if(!r)return PB.emptyPromise("You must have a current identity to post a public message");var n=PB.simpleBuildPuff(t,e);return PB.addPuffToSystem(n)},PB.postPrivateMessage=function(e,t,r){r=r||"text";var n=PB.getCurrentUsername();if(!n)return PB.emptyPromise("You must have a current identity to post a private message");t=t||[],Array.isArray(t)||(t=[t]),t.push(n),t=PB.uniquify(t);var i=PB.Users.usernamesToUserRecordsPromise(t);return i.then(function(n){var i=PB.simpleBuildPuff(r,e,null,t,n);return PB.addPuffToSystem(i)})},PB.postAnonymousPrivateMessage=function(){},PB.postParanoidPrivateMessage=function(){},PB.createPrivatePuff=function(e,t){var r,n={},t=t||"file",i=["local"],o=PB.getCurrentUserRecord(),a=[o];return r=PB.simpleBuildPuff(t,e,n,i,a)},PB.getMyMessages=!0,PB.createIdentity=function(e,t){var r=e+t,n=PB.Crypto.passphraseToPrivateKeyWif(r),i=PB.registerTopLevelUser(e,n,n,n);return i.then(function(){var r=1;PB.addAlias(e,e,r,n,n,n,{passphrase:t}),PB.switchIdentityTo(e)}),i},PB.registerTopLevelUser=function(e,t,r,n){var i=PB.Crypto.privateToPublic(t),o=PB.Crypto.privateToPublic(r),a=PB.Crypto.privateToPublic(n),s={requestedUsername:e,rootKey:i,adminKey:o,defaultKey:a},u=[],c="requestUsername",f="updateUserRecord",l=PB.buildPuff(e,r,u,f,c,s),h=PB.Net.updateUserRecord(l);return h},PB.registerSubuser=function(e,t,r,n){var i,o=PB.getCurrentUsername();return PB.useSecureInfo(function(a,a,a,s){i=PB.registerSubuserForUser(o,s,e,t,r,n)}),i},PB.updatePrivateKey=function(e,t,r){var n=PB.getCurrentUsername(),i=PB.Crypto.privateToPublic(t);if(-1==["defaultKey","adminKey","rootKey"].indexOf(e))return PB.emptyPromise("That is not a valid key to modify");
var o={},a=[],s="modifyUserKey",u="updateUserRecord";o.keyToModify=e,o.newKey=i,o.time=Date.now();var c=new Promise(function(i,c){var f;PB.useSecureInfo(function(t,t,r,i){var l="privateRootKey",h=r;return"defaultKey"==e&&(l="privateAdminKey",h=i),h?void(f=PB.buildPuff(n,h,a,u,s,o)):c(PB.makeError("You need the "+l+" to change the "+e+" key."))});var l=PB.Net.updateUserRecord(f);l.then(function(n){return"defaultKey"==e&&PB.useSecureInfo(function(e,i,o,a){PB.addAlias(i,i,n.capa,o,a,t,r)}),"adminKey"==e&&PB.useSecureInfo(function(e,i,o,e,a){PB.addAlias(i,i,n.capa,o,t,a,r)}),"rootKey"==e&&PB.useSecureInfo(function(e,i,e,o,a){PB.addAlias(i,i,n.capa,t,o,a,r)}),i(n)}).catch(function(e){return c(PB.makeError(e))})});return c},PB.getProfilePuff=function(e){var t=PB.Data.profiles[e];if(t)return Promise.resolve(t);var r=PB.Net.getProfilePuff(e);return r=r.then(function(t){var r=t[0];return r||(r={payload:{}}),PB.Data.profiles[PB.Users.justUsername(r.username||e)]=r,r})},PB.handlers={},PB.addHandler=function(e,t){PB.handlers[e]||(PB.handlers[e]=[]),PB.handlers[e].push(t)},PB.runHandlers=function(e){var t=[].slice.call(arguments,1);return(PB.handlers[e]||[]).reduce(function(e,r){return r.apply(null,null==e?t:Array.isArray(e)?e:[e])},t)},PB.makeHandlerHandler=function(e){return function(t){return PB.addHandler(e,t)}},PB.addErrorHandler=PB.makeHandlerHandler("error"),PB.addNewPuffHandler=PB.makeHandlerHandler("newPuffs"),PB.addDHTErrorHandler=PB.makeHandlerHandler("DHTError"),PB.addRelationshipHandler=PB.makeHandlerHandler("relationship"),PB.addTimeoutErrorHandler=PB.makeHandlerHandler("timeoutError"),PB.addNetworkErrorHandler=PB.makeHandlerHandler("networkError"),PB.addNewPuffReportHandler=PB.makeHandlerHandler("newPuffReport"),PB.addIdentityUpdateHandler=PB.makeHandlerHandler("identityUpdate"),PB.addNetworkResponseHandler=PB.makeHandlerHandler("networkresponse"),PB.addPayloadModifierHandler=PB.makeHandlerHandler("payloadModifier"),PB.addBeforeSwitchIdentityHandler=PB.makeHandlerHandler("beforeSwitchIdentity"),PB.addAfterSwitchIdentityHandler=PB.makeHandlerHandler("afterSwitchIdentity"),PB.simpleBuildPuff=function(e,t,r,n,i,o){var a;return r=PB.runHandlers("payloadModifier",r),PB.useSecureInfo(function(s,u,c,f,l){var h=!1,p=PB.getCurrentVersionedUsername();a=PB.buildPuff(p,l,n,e,t,r,h,i,o)}),a},PB.buildPuff=function(e,t,r,n,i,o,a,s,u){var c=PB.Data.packagePuffStructure(e,r,n,i,o,a);return c.sig=PB.Crypto.signPuff(c,t),s&&(c=PB.Data.encryptPuff(c,t,s,u)),c},PB.addPuffToSystem=function(e){return PB.Data.getCachedShellBySig(e.sig)?!1:(PB.Data.addShellsThenMakeAvailable(e),PB.Net.distributePuff(e),e)},PB.decryptPuffForReals=function(e,t,r,n){if(!e.keys)return!1;var i=e.keys[r],o=PB.Crypto.decryptPrivateMessage(i,t,n),a=e.payload.content,s=PB.Crypto.decryptWithAES(a,o),u=PB.tryDecodeURIComponent(escape(s));return PB.parseJSON(u)},PB.login=function(e,t){return userprom=PB.Users.getUserRecordNoCache(e),userprom.then(function(r){if(!r)return PB.onError("Could not access user record");var n=r.identity;if(n){var i=PB.Users.getIdentityPuff(r,t);return i.then(function(e){return e&&e.payload&&e.payload.content?PB.loginWithIdentityFile(e.payload.content):PB.throwError("Invalid password")},function(){return PB.catchError("Could not access identity file")})}var o=PB.Crypto.privateToPublic(t);if(r.defaultKey!=o&&r.adminKey!=o&&r.rootKey!=o)return PB.onError("That user record has no identity file, and the public key provided does not match");var a={};return PB.addAlias(e,e,r.capa,t,t,t,a),PB.switchIdentityTo(e),PB.storeIdentityFileInCloud(),!0})},PB.loginWithIdentityFile=function(e){var t=e.username,r=e.aliases,n=e.preferences;return t&&r&&n?(PB.currentIdentityHash=PB.Crypto.createMessageHash(JSON.stringify(e)),PB.addIdentity(t,r,n),PB.switchIdentityTo(t)):PB.onError("That is not a valid identity object")},PB.loginWithPassphrase=function(e,t,r){var n=r?t:e+t,i=PB.Crypto.passphraseToPrivateKeyWif(n),o=PB.Crypto.privateToPublic(i),a=PB.Users.getUserRecordNoCache(e);return a.then(function(n){return n?n.defaultKey!=o&&n.adminKey!=o&&n.rootKey!=o?r?!1:PB.loginWithPassphrase(e,t,!0):PB.login(e,i):PB.onError("Could not access user record")})},PB.storeIdentityFileInCloud=function(){!PB.currentIdentityHash;var e=PB.formatIdentityFile();if(!e)return!1;var t=PB.Crypto.createMessageHash(JSON.stringify(e));if(PB.currentIdentityHash==t)return!1;PB.currentIdentityHash=t;var r={},n=[],i="identity",o=PB.getCurrentUserRecord(),a=[o];if(!o)return!1;var s=PB.simpleBuildPuff(i,e,r,n,a);if(!s)return!1;PB.Net.distributePuff(s);var u,r={},n=[],i="updateUserRecord",e="setIdentity";if(r.identity=s.sig,PB.useSecureInfo(function(t,o,t,a){return a?void(u=PB.buildPuff(o,a,n,i,e,r)):PB.onError("You must have an administrative key to upload your identity file")}),!u)return!1;var c=PB.Net.updateUserRecord(u);return c},PB.formatIdentityFile=function(e){if(e=e||PB.getCurrentUsername(),!e)return!1;var t={};return PB.useSecureInfo(function(r){var n=r[e];t.username=e,t.aliases=n.aliases,t.preferences=n.preferences,t.version="1.1"}),t},PB.registerSubuserForUser=function(e,t,r,n,i,o){var a={requestedUsername:r,defaultKey:o,adminKey:i,rootKey:n,time:Date.now()},s=[],u="requestUsername",c="updateUserRecord",f=PB.buildPuff(e,t,s,c,u,a);return PB.Net.updateUserRecord(f)},PB.buildCryptoworker=function(e){var t=e.cryptoworkerURL||PB.CONFIG.cryptoworkerURL;return t?(PB.cryptoworker=new Worker(t),void PB.cryptoworker.addEventListener("message",PB.workerreceive)):!1},PB.workerqueue=[],PB.workerautoid=0,PB.workerreceive=function(e){var t=e.data.id;if(!t)return!1;var r=PB.workerqueue[t];return r?(r(e.data.evaluated),void delete PB.workerqueue[t]):!1},PB.workersend=function(e,t,r){PB.workerautoid+=1,PB.workerqueue[PB.workerautoid]=r,Array.isArray(t)||(t=[t]),PB.cryptoworker.postMessage({fun:e,args:t,id:PB.workerautoid})},PB.implementSecureInterface=function(e,t,r,n,i,o,a){"function"==typeof e&&(PB.useSecureInfo=function(t){return e(function(e,r,n,i,o){var a=JSON.parse(JSON.stringify(e));t(a,r,n,i,o)})}),"function"==typeof t&&(PB.addIdentity=t),"function"==typeof r&&(PB.addAlias=r),"function"==typeof n&&(PB.setPrimaryAlias=n),"function"==typeof i&&(PB.setPreference=i),"function"==typeof o&&(PB.switchIdentityTo=function(e){PB.runHandlers("beforeSwitchIdentity",e);var t=o(e);return PB.runHandlers("afterSwitchIdentity",e),t}),"function"==typeof a&&(PB.removeIdentity=a),PB.getCurrentUsername=function(){var e;return PB.useSecureInfo(function(t,r){e=r}),e},PB.getCurrentCapa=function(){var e;return PB.useSecureInfo(function(t,r){e=((t[r]||{}).primary||{}).capa||0}),e},PB.getCurrentVersionedUsername=function(){var e=PB.getCurrentUsername();return e?PB.Users.makeVersioned(e,PB.getCurrentCapa()):PB.onError("No current user in wardrobe")},PB.getCurrentUserRecord=function(){var e=PB.getCurrentVersionedUsername();if(!e)return!1;var t=PB.Users.records[e];return t?t:PB.onError("That user does not exist in our records")},PB.getAllIdentityUsernames=function(){var e;return PB.useSecureInfo(function(t){e=Object.keys(t)}),e}},PB.validateUsername=function(e){return e?e.length>256?PB.onError("Usernames must be shorter than 256 characters",e):e!=e.toLowerCase()?PB.onError("Usernames must be lowercase",e):/^[0-9a-z.]+$/.test(e)?!0:PB.onError("Usernames must be alphanumeric",e):PB.onError("Username is required",e)},PB.isValidShell=function(e){return e.sig&&e.routes&&e.username?"object"!=typeof e.payload?!1:e.payload.type?!0:!1:!1},PB.isGoodPuff=function(e){if(!PB.M.Forum.contentTypes[shell.payload.type])return Events.pub("track/unsupported-content-type",{type:shell.payload.type,sig:shell.sig}),!1;var t=PB.Users.getUserRecordPromise(e.username);return t.then(function(t){return PB.Crypto.verifyPuffSig(e,t.defaultKey)})},PB.onError=function(e,t,r){var n={msg:e,obj:t};return PB.runHandlers("error",n),r&&PB.runHandlers(r,n),!1},PB.catchError=function(e){return function(t){throw PB.onError(e,t),t}},PB.throwError=function(e,t){var r=t?Error(t):"";throw PB.makeError(e,r)},PB.makeError=function(e,t,r){return PB.onError(e,t,r),Error(e)},PB.emptyPromise=function(e){return e&&PB.onError(e),Promise.reject(e)},PB.throwNetError=function(e,t){var r="networkError",n=t?Error(t):"";throw PB.makeError(e,n,r)},PB.throwDHTError=function(e,t){var r="DHTError",n=t?Error(t):"";throw PB.makeError(e,n,r)},PB.parseJSON=function(e){try{return JSON.parse(e)}catch(t){return PB.onError("Invalid JSON string",t)}},PB.stringifyJSON=function(e){try{return JSON.stringify(e)}catch(t){return PB.onError("Invalid object",t)}},PB.tryDecodeURIComponent=function(e){try{return decodeURIComponent(e)}catch(t){return PB.onError("Invalid URI string",t)}},PB.promisesPending={},PB.promiseMemoize=function(e,t){return t||(t=PB.removePromisePending),function(){var r=JSON.stringify([e.toString(),arguments]);if(PB.promisesPending[r])return PB.promisesPending[r];var n=e.apply(e,arguments);return n=n.then(function(e){return t(r,e),e},function(e){throw t(r,e),e}),PB.promisesPending[r]=n,n}},PB.removePromisePending=function(e){delete PB.promisesPending[e]},~function(){function e(e){return r.push(e),i&&(i=!1,window.postMessage(n,"*")),!1}function t(e){if(e.data!=n)return!1;e.stopPropagation(),i=!0;var t=r;r=[];for(var o=0,a=t.length;a>o;o++)t[o]()}var r=[],n=12345,i=!0;"undefined"!=typeof window&&(window.addEventListener("message",t,!0),window.setImmediate=e)}(),PB.queuer=function(){var e=[],t=function(r){r(function(){return e.length?(e.shift()(),void t(r)):!1})},r=function(r,n){return e.push(n),e.length>1?!1:void t(r)};return r},PB.once=function(){var e=[],t=function(){var t=e;e=[];for(var r=0,n=t.length;n>r;r++)t[r]()},r=function(r,n){return~e.indexOf(n)?!1:(e.push(n),e.length>1?!1:void r(t))};return r},~function(){if("undefined"!=typeof window){window.queueImmediate=PB.queuer().bind(null,setImmediate),window.onceImmediate=PB.once().bind(null,setImmediate),window.queueRAF=PB.queuer().bind(null,requestAnimationFrame),window.onceRAF=PB.once().bind(null,requestAnimationFrame);var e={};window.onceInAwhile=function(t,r){return e[t]?!1:void(e[t]=setTimeout(function(){t(),e[t]=!1},r))}}}(),PB.prop=function(e,t){return arguments.length<2?function(t){return t[e]}:t[e]},PB.uniquify=function(e){return e.filter(PB.unique)},PB.unique=function(e,t,r){return r.indexOf(e)==t},PB.Net={},PB.Net.init=function(){PB.Net.P2P.init()},PB.Net.getPuffBySig=function(e){var t=PB.CONFIG.puffApi,r={type:"getPuffBySig",sig:e};return PB.Net.PBgetJSON(t,r)},PB.Net.getKidSigs=function(e){var t=PB.CONFIG.puffApi,r={type:"getChildrenBySig",sig:e};return PB.Net.PBgetJSON(t,r)},PB.Net.getKidSigs=Boron.memoize(PB.Net.getKidSigs),PB.Net.getStarShells=function(){var e=PB.CONFIG.puffApi,t={type:"getPuffs",contentType:"star",numb:PB.CONFIG.globalBigBatchLimit};return PB.Net.PBgetJSON(e,t)},PB.Net.getConversationPuffs=function(e,t,r){e=e.replace("&",",");var n=PB.CONFIG.puffApi,i={type:"getPuffs",contentType:"encryptedpuff",conversationPartners:e,numb:t,offset:r};return PB.Net.PBgetJSON(n,i)},PB.Net.getMyPrivatePuffs=function(e,t,r,n){if(!e)return PB.emptyPromise();t=t||PB.CONFIG.globalBigBatchLimit;var i=PB.CONFIG.puffApi,o={route:e,username:e,fromAndTo:1,type:"getPuffs",contentType:"encryptedpuff",fullOrShell:n||"full",numb:t,offset:r};return PB.Net.PBgetJSON(i,o)},PB.Net.getProfilePuff=function(e){var t=PB.CONFIG.puffApi,r={username:e,fullOrShell:"full",contentType:"profile",type:"getPuffs",sort:"DESC",numb:1};return PB.Net.PBgetJSON(t,r)},PB.Net.getProfilePuff=PB.promiseMemoize(PB.Net.getProfilePuff),PB.Net.getSomeShells=function(e,t,r,n){var i=e.mode;if("ancestors"==i)return PB.Net.getAncestors([e.focus],r);if("descendants"==i)return PB.Net.getDescendants([e.focus],r);var o=PB.CONFIG.puffApi,a={type:"getPuffs",contentType:"plain"};r&&(a.numb=r),n&&(a.offset=n),e.sort&&(a.sort=e.sort),t.users&&(a.username=t.users),t.routes&&(a.route=t.routes),t.tags&&(a.tags=t.tags),t.types&&(a.contentType=t.types),e.ancestors&&(a.maxParents=e.ancestors);var s=JSON.stringify(t.types),u='["profile"]'==s;return PB.CONFIG.disableReceivePublic&&!u?PB.emptyPromise().then(function(){return[]}):PB.Net.PBgetJSON(o,a).then(function(e){return e||[]},function(){return[]})},PB.Net.getAncestors=function(e,t){function r(e,t,n){if(!e.length)return!1;if(!n)return!1;var i=e[0];if(~t.indexOf(i))return r(e.slice(1),t,n);var o=PB.Data.getPuffBySig(i);if(o)return r(e.slice(1).concat(o.payload.parents),t.concat(i),n);n--;var a=PB.Data.pendingPuffPromises[i];a.then(function(o){r(e.slice(1).concat(((o[0]||{}).payload||{}).parents),t.concat(i),n)})}return r(e,[],t),PB.emptyPromise()},PB.Net.getDescendants=function(e,t){function r(e,t,n){if(!e.length)return!1;if(!n)return!1;var i=e[0];if(~t.indexOf(i))return r(e.slice(1),t,n);var o=PB.Data.getCachedShellBySig(i);o||(PB.Data.getPuffBySig(i),n--);var a=PB.Net.getKidSigs(i);return a.then(function(o){r(e.slice(1).concat(o),t.concat(i),n)})}return r(e,[],t),PB.emptyPromise()},PB.Net.getSiblings=function(){return PB.emptyPromise()},PB.Net.distributePuff=function(e){if(PB.CONFIG.disableSendToServer)return!1;if(PB.CONFIG.netblockSuffix){var t=[e.username];e.keys&&(t=t.concat(Object.keys(e.keys))),t=t.map(PB.Users.justUsername);var r=t.map(function(e){var t=e.split(".");return t[t.length-1]});if(r.indexOf(PB.CONFIG.netblockSuffix)>-1)return!1}PB.Net.sendPuffToServer(e),PB.Net.P2P.sendPuffToPeers(e)},PB.Net.sendPuffToServer=function(e){var t={type:"addPuff",puff:JSON.stringify(e)};return PB.Net.PBpost(PB.CONFIG.puffApi,t).catch(PB.catchError("Could not send puff to server"))},PB.Net.getUserRecord=function(e,t){var r=PB.CONFIG.userApi,n=PB.Users.makeVersioned(e,t);e=PB.Users.justUsername(n),0!==t&&(t=PB.Users.justCapa(n));var i={type:"getUser",username:e};return t&&(i.capa=t),PB.Net.PBgetJSON(r,i)},PB.Net.updateUserRecord=function(e){var t={type:"updateUsingPuff",puff:e},r=PB.Net.PBpost(PB.CONFIG.userApi,t);return r.catch(PB.catchError("Sending user record modification puff failed")).then(JSON.parse).then(function(e){return PB.Users.process(e)||PB.throwError("Invalid user record",JSON.stringify(e))})},PB.Net.xhr=function(e,t,r){return new Promise(function(n,i){var o=new XMLHttpRequest;o.open(t.method||"GET",e),Object.keys(t.headers||{}).forEach(function(e){o.setRequestHeader(e,t.headers[e])});var a=new FormData;Object.keys(r||{}).forEach(function(e){var t="object"==typeof r[e]?PB.stringifyJSON(r[e]):r[e];a.append(e,t)}),t&&t.type&&(o.responseType=t.type),o.onload=function(){return 200!=o.status?i(PB.makeError(o.statusText)):"json"==o.responseType&&null===o.response?i(PB.makeError("Invalid JSON in response",o.response)):void n(o.responseType!=t.type&&"json"==t.type?PB.parseJSON(o.response):o.response)},o.onerror=function(e){i(PB.makeError("Network Error",e,"networkError"))},o.ontimeout=function(e){i(PB.makeError("Timeout Error",e,"timeoutError"))},o.timeout=PB.CONFIG.networkTimeout,o.send(a)})},PB.Net.getJSON=function(e,t){var r={headers:{Accept:"application/json"},method:"GET",type:"json"},t=t||{},n=function(e){return e||0===e?encodeURIComponent(e):""},i=Object.keys(t).reduce(function(e,r){return e+n(r)+"="+n(t[r])+"&"},"?");return PB.Net.xhr(e+i,r)},PB.Net.post=function(e,t){var r={headers:{},method:"POST"};return PB.Net.xhr(e,r,t)},PB.Net.PBxhr=function(e,t,r){var n=PB.Net.xhr(e,t,r);return n.then(function(e){return e.FAIL?PB.throwDHTError(e.FAIL):"string"==typeof e&&'{"FAIL'==e.slice(0,6)?PB.throwDHTError((PB.parseJSON(e)||{}).FAIL):(PB.runHandlers("networkresponse",e),e)})},PB.Net.PBpost=function(e,t){var r={headers:{},method:"POST"};return PB.Net.PBxhr(e,r,t)},PB.Net.PBgetJSON=function(e,t){var r={headers:{Accept:"application/json"},method:"GET",type:"json"},t=t||{},n=function(e){return e||0===e?encodeURIComponent(e):""},i=Object.keys(t).reduce(function(e,r){return e+n(r)+"="+n(t[r])+"&"},"?");return PB.Net.PBxhr(e+i,r)},PB.Net.P2P={},PB.Net.P2P.peers={},PB.Net.P2P.init=function(){return PB.CONFIG.enableP2P?(PB.Net.P2P.Peer=new Peer({host:"162.219.162.56",port:9e3,path:"/",debug:1}),PB.Net.P2P.Peer.on("open",PB.Net.P2P.openPeerConnection),void PB.Net.P2P.Peer.on("connection",PB.Net.P2P.connection)):!1},PB.Net.P2P.reloadPeers=function(){return PB.Net.P2P.Peer.listAllPeers(PB.Net.P2P.handlePeers)},PB.Net.P2P.openPeerConnection=function(){return PB.Net.P2P.Peer.listAllPeers(PB.Net.P2P.handlePeers)},PB.Net.P2P.connection=function(e){return PB.Net.P2P.reloadPeers(),e.on("data",function(e){PB.Data.addShellsThenMakeAvailable(e)})},PB.Net.P2P.handlePeers=function(e){e.forEach(function(e){return PB.Net.P2P.peers[e]?!1:void(PB.Net.P2P.peers[e]=PB.Net.P2P.Peer.connect(e))})},PB.Net.P2P.sendPuffToPeers=function(e){for(var t in PB.Net.P2P.peers)PB.Net.P2P.peers[t].send(e)},PB.Data={},PB.Data.bonii={},PB.Data.shells=[],PB.Data.shellSort={},PB.Data.pendingPuffPromises={},PB.Data.profiles={},PB.Data.init=function(){PB.addBeforeSwitchIdentityHandler(PB.Data.removeAllPrivateShells)},PB.Data.addSigAsVertex=function(e){var t=PB.Data.graph.v(e).run();return t.length?!1:PB.Data.graph.addVertex({_id:e,name:e,type:"shell"})||!0},PB.Data.addShellAsVertex=function(e){var t=PB.Data.graph.v(e.sig).run();if(!t.length)return PB.Data.graph.addVertex({_id:e.sig,name:e.sig,shell:e,type:"shell"})||!0;var r=t[0];return r.shell?!1:r.shell=e},PB.Data.addShellUsernameAsVertex=function(e){var t=e.username,r=PB.Data.graph.v(t).run(),n=r[0];if(n){if(PB.Data.graph.v(e.sig).out("author").property("name").run()[0]==t)return!1}else n=PB.Data.graph.addVertex({_id:t,name:t,type:"username"});PB.Data.graph.addEdge({_out:e.sig,_in:e.username,_label:"author"})},PB.Data.graph=Dagoba.graph(),PB.Data.addToGraph=function(e){e.forEach(PB.Data.addShellAsVertex),e.forEach(PB.Data.addShellUsernameAsVertex),PB.runHandlers("relationship",e)},PB.Data.getAllMyShells=function(){var e=PB.Data.getPublicShells(),t=PB.Data.getCurrentDecryptedLetters();return e.concat(t)},PB.Data.getShells=function(){return PB.Data.shells},PB.Data.getPublicShells=function(){var e=PB.Data.getShells();return e.filter(function(e){return!e.keys})},PB.Data.getCachedShellBySig=function(e){return PB.Data.shellSort[e]},PB.Data.addBonus=function(e,t,r){var n=e.sig;PB.Data.bonii[n]||(PB.Data.bonii[n]={}),PB.Data.bonii[n][t]=r},PB.Data.getBonus=function(e,t){var r=e.sig,n=PB.Data.bonii[r];return n&&n[t]},PB.Data.addStar=function(e,t,r){var n={sig:e},i=PB.Data.getBonus(n,"starStats")||{score:0,from:{}};i.from[t]=r,i.score=PB.Data.scoreStars(Object.keys(i.from)),PB.Data.addBonus(n,"starStats",i)},PB.Data.removeStar=function(e,t){var r={sig:e},n=PB.Data.getBonus(r,"starStats")||{score:0,from:{}};delete n.from[t],n.score=PB.Data.scoreStars(Object.keys(n.from)),PB.Data.addBonus(r,"starStats",n)},PB.Data.scoreStars=function(){return 0},PB.Data.addShellsThenMakeAvailable=function(e){function t(e){return function(t){return!e(t)}}var r={counts:{}};return e=Array.isArray(e)?e:[e],r.counts.delivered=e.length,e=e.filter(PB.isValidShell),r.counts.valid=e.length,r.meta=PB.Data.handleMetaPuffs(e),e=e.filter(t(PB.Data.isMetaPuff)),r.counts.nonmeta=e.length,r.private_promise=PB.Data.handlePrivatePuffs(e),e=e.filter(t(PB.Data.isPrivatePuff)),r.counts.public=e.length,e=PB.Data.handleAndFilterExistingShells(e),r.counts.new_public=r.counts.public-e.length,PB.Data.handleNewPublicShells(e),e=PB.Data.handleAndFilterByGC(e),r.counts.gc=r.counts.new_public-e.length,r.public_puff_sigs=e.map(PB.prop("sig")),PB.runHandlers("newPuffs",e),PB.runHandlers("newPuffReport",r),r},PB.Data.handleMetaPuffs=function(e){var t=e.filter(PB.Data.isMetaPuff);return t.forEach(function(e){var t=e.payload.content;PB.Data.addStar(t,e.username,e.sig)}),{stars:t.length}},PB.Data.isMetaPuff=function(e){return"star"==e.payload.type},PB.Data.handlePrivatePuffs=function(e){var t=e.filter(PB.Data.isPrivatePuff);return PB.Data.ingestEncryptedShells(t)},PB.Data.isPrivatePuff=function(e){return"encryptedpuff"==e.payload.type},PB.Data.handleAndFilterExistingShells=function(e){return e.filter(function(e){var t=PB.Data.getCachedShellBySig(e.sig);return t?t.payload.content?!1:void 0===e.payload.content?!1:(t.payload.content=e.payload.content,!0):!0})},PB.Data.handleNewPublicShells=function(e){e.forEach(function(e){PB.Data.shells.push(e),PB.Data.shellSort[e.sig]=e}),PB.Data.addToGraph(e),PB.Data.rateSomePuffs(e),PB.Data.persistShells()},PB.Data.handleAndFilterByGC=function(e){var t=PB.Data.garbageCompactor();return t?e.map(PB.prop("sig")).map(PB.Data.getCachedShellBySig).filter(Boolean):e},PB.Data.persistShells=function(e){return PB.CONFIG.noLocalStorage?!1:(e||(e=function(){return PB.Data.getShellsForLocalStorage()}),void PB.Persist.save("shells",e))},PB.Data.getConversationPuffs=function(e,t,r){t=t||0,r=r||PB.CONFIG.pageBatchSize||10;var n;return n=PB.Net.getConversationPuffs(e,r,t),n=n.then(PB.Data.addShellsThenMakeAvailable)},PB.Data.getConversationPuffs=PB.promiseMemoize(PB.Data.getConversationPuffs,function(e,t){t.private_promise.then(function(){PB.removePromisePending(e)})}),PB.Data.importShells=function(){PB.Data.importLocalShells(),PB.Data.importRemoteShells()},PB.Data.importLocalShells=function(){var e=PB.Persist.get("shells")||[];PB.Data.addShellsThenMakeAvailable(e)},PB.Data.importAllStars=function(){var e=PB.Net.getStarShells();e.then(PB.Data.addShellsThenMakeAvailable)},PB.Data.horridStash={},PB.Data.isBadEnvelope=function(e){return PB.Data.horridStash[e]},PB.Data.addBadEnvelope=function(e){PB.Data.horridStash[e]=!0},PB.Data.currentDecryptedLetters=[],PB.Data.currentDecryptedLetterMap={},PB.Data.getCurrentDecryptedLetters=function(){return PB.Data.currentDecryptedLetters},PB.Data.getDecryptedLetterBySig=function(e){return PB.Data.currentDecryptedLetterMap[e]?PB.Data.currentDecryptedLetterMap[e]:void 0},PB.Data.addDecryptedLetter=function(e,t){var r=PB.Data.getDecryptedLetterBySig(t.sig);return r?!1:"identity"==e.payload.type?!1:(PB.Data.currentDecryptedLetters.push(e),PB.Data.currentDecryptedLetterMap[t.sig]=e,PB.Data.currentDecryptedLetterMap[e.sig]=e,PB.Data.addBonus(e,"envelope",t),PB.Data.addToGraph([e]),!0)},PB.Data.removeAllPrivateShells=function(){PB.Data.currentDecryptedLetters.forEach(function(e){PB.Data.removeShellFromCache(e.sig)}),PB.Data.currentDecryptedLetterMap={},PB.Data.currentDecryptedLetters=[]},PB.Data.encryptPuff=function(e,t,r,n){var i=PB.Crypto.getRandomKey(),o=PB.Crypto.encryptWithAES(JSON.stringify(e),i),a=e.username;n&&(t=n.default,a=PB.Users.makeVersioned(n.username,n.capa));var s=PB.Data.packagePuffStructure(a,e.routes,"encryptedpuff",o,{},e.previous);return s.keys=PB.Crypto.createKeyPairs(i,t,r),s.sig=PB.Crypto.signPuff(s,t),s},PB.Data.extractLetterFromEnvelope=function(e){if(PB.Data.isBadEnvelope(e.sig))return Promise.reject("Bad envelope");var t=PB.Data.getDecryptedLetterBySig(e.sig);if(t)return Promise.resolve(t);var r=PB.Data.getDecryptedPuffPromise(e);return r.catch(function(){return!1}).then(function(t){return t?t:(PB.Data.addBadEnvelope(e.sig),PB.throwError("Invalid envelope"))})},PB.Data.getDecryptedPuffPromise=function(e){if(!e||!e.keys)return PB.emptyPromise("Envelope does not contain an encrypted letter");var t=e.username,r=PB.Users.getUserRecordPromise(t),n=r.catch(PB.catchError("User record acquisition failed")).then(function(t){var r;return PB.useSecureInfo(function(n,i){var o=n[i],a=o.aliases,s="";e:for(var u in e.keys)for(var c=0;c<a.length;c++){var f=a[c];if(f.username==u){s=f.username;break e}var l=PB.Users.makeVersioned(f.username,f.capa);if(l==u){s=l;break e}}if(!s)return PB.throwError("No key found for current user");var h=f.privateDefaultKey,p=t.defaultKey;r=PB.Data.decryptPuffAlmostForReals(e,p,s,h)}),r});return n},PB.Data.decryptPuffAlmostForReals=function(e,t,r,n){return new Promise(function(i,o){return PB.cryptoworker?PB.workersend("decryptPuffForReals",[e,t,r,n],i,o):i(PB.decryptPuffForReals(e,t,r,n))})},PB.Data.packagePuffStructure=function(e,t,r,n,i,o){i=i||{},i.content=n,i.type=r,t=t||[],o=o||!1;var a={username:e,routes:t,previous:o,version:"0.1.0",payload:i};return a},PB.Data.getMorePrivatePuffs=function(e,t,r){e||(e=PB.getCurrentUsername()),t=t||0,r=r||PB.CONFIG.pageBatchSize||10;var n;return n=PB.Net.getMyPrivatePuffs(PB.getCurrentUsername(),r,t),n=n.then(PB.Data.addShellsThenMakeAvailable)},PB.Data.updatePrivateShells=function(e){var t=PB.getCurrentUsername(),r=1,n="full";e=e||0,PB.Net.getMyPrivatePuffs(t,r,e,n).then(function(t){var r=t[0];if(!r)return!1;var n=PB.Data.ingestAnEncryptedShell(r);n.then(function(t){t&&PB.Data.updatePrivateShells(1+e)})})},PB.Data.ingestEncryptedShells=function(e){var t=e.map(PB.Data.ingestAnEncryptedShell);return new Promise(function(e){function r(){i.bad++,--n||e(i)}var n=t.length,i={good:0,bad:0,goodsigs:[]};t.forEach(function(t){t.then(function(t){return t?(i.good++,i.goodsigs.push(t.sig),void(--n||e(i))):r()},r)})})},PB.Data.ingestAnEncryptedShell=function(e){var t=PB.Data.extractLetterFromEnvelope(e);return t=t.then(function(t){if(!t)return!1;var r=PB.Data.addDecryptedLetter(t,e);return r?(PB.runHandlers("newPuffs",[t]),t):!1})},PB.Data.slotLocker={},PB.Data.importRemoteShells=function(){function e(a){if(a){var s=PB.Data.addShellsThenMakeAvailable(a);s!=n&&(i=!1)}if(t>r&&(i=!1),!i)return PB.Data.slotLocker[o]=1,!1;var u=PB.Net.getSomeShells({},{},n,t);u.then(e),t+=n}var t=0,r=PB.CONFIG.initLoadGiveup,n=PB.CONFIG.initLoadBatchSize,i=!0,o='[{"sort":"DESC"},{"tags":[],"types":[],"users":[],"routes":[]}]';PB.Data.slotLocker[o]=-1,e()},PB.Data.fillSomeSlotsPlease=function(e,t,r,n){if(t>=e)return!1;var i=[r,n],o=JSON.stringify(i),a=PB.Data.slotLocker[o]||0;if(0>a)return!1;PB.Data.slotLocker[o]=-1;var s=e,u=PB.Net.getSomeShells(r,n,s,r.offset);return u.then(PB.Data.addShellsThenMakeAvailable).then(function(e){PB.Data.slotLocker[o]=e?1:-1}),!0},PB.Data.getPuffFromShell=function(e){return e?e.payload&&void 0!==e.payload.content?e:PB.Data.getPuffBySig(e.sig):!1},PB.Data.getPuffBySig=function(e){function t(t){if(!t.length){var r={sig:e};if(!PB.Data.getBonus(r,"envelope"))return PB.Data.removeShellFromCache(e),PB.onError("Content can not be found for shell '"+e+"'")}return t}var r=PB.Data.getCachedShellBySig(e);return r&&r.payload&&"undefined"!=typeof r.payload.content?r:PB.Data.pendingPuffPromises[e]?!1:(PB.Data.pendingPuffPromises[e]=PB.Net.getPuffBySig(e),PB.Data.pendingPuffPromises[e].then(t).then(PB.Data.addShellsThenMakeAvailable).then(function(){setTimeout(function(){delete PB.Data.pendingPuffPromises[e]},1e4)}),!1)},PB.Data.removeShellFromCache=function(e){var t=PB.Data.getCachedShellBySig(e);PB.Data.shells.splice(PB.Data.shells.indexOf(t),1),delete PB.Data.shellSort[e],delete PB.Data.bonii[e],PB.Data.purgeShellFromGraph(e),PB.Data.removeCachedPuffScore(t)},PB.Data.purgeShellFromGraph=function(e){var t=PB.Data.graph.v(e).run()[0];t&&(t.type="purged",t.shell=void 0)},PB.Data.getMyPuffChain=function(e){var t=PB.Data.getShells();return t.filter(function(t){return t&&t.username==e})},PB.Data.runningSizeTally=0,PB.Data.scoreSort={},PB.Data.heuristics=[],PB.Data.addHeuristics=function(e){PB.Data.heuristics.push(e)},PB.Data.addHeuristics(function(e){return 100*parseFloat((PB.Data.getBonus(e,"starStats")||{}).score||0)}),PB.Data.rateMyPuff=function(e){var t=PB.Data.heuristics.map(function(t){return t(e)}),r=t.reduce(function(e,t){return e+(t||0)},0);return r},PB.Data.rateSomePuffs=function(e){e.forEach(function(e){var t=PB.Data.rateMyPuff(e);PB.Data.doStuffWithScore(e,t),PB.Data.doStuffWithPuff(e)})},PB.Data.doStuffWithScore=function(e,t){PB.Data.removeCachedPuffScore(e),PB.Data.addBonus(e,"rating",t),PB.Data.cachePuffScore(e,t)},PB.Data.doStuffWithPuff=function(e){var t=JSON.stringify(e).length;PB.Data.addBonus(e,"size",t),PB.Data.runningSizeTally+=t||0},PB.Data.cachePuffScore=function(e,t){var r=PB.Data.convertScoreToKey(t);PB.Data.scoreSort[r]=PB.Data.scoreSort[r]||[],PB.Data.scoreSort[r].push(e)},PB.Data.removeCachedPuffScore=function(e){if(!e)return!1;var t=PB.Data.getBonus(e,"score"),r=PB.Data.convertScoreToKey(t),n=PB.Data.scoreSort[r];if(!n)return!1;if(!n.length)return!1;for(var i=n.length-1;i>=0;i--)if(n[i].sig==e.sig){n.splice(i,1);var o=PB.Data.getBonus(e,"size");return PB.Data.runningSizeTally-=o||0,!1}},PB.Data.getCachedPuffs=function(e,t){for(var r=[],n=Object.keys(PB.Data.scoreSort).map(parseFloat).sort(),i=0;i<n.length;i++){var o=n[i],a=PB.Data.scoreSort[o];a.reduce(function(n,i){return n>e==!!t&&r.push(i),n+1},0)}return r},PB.Data.convertScoreToKey=function(e){return Math.floor(e/10)||0},PB.Data.getTopPuffs=function(e){return PB.Data.getCachedPuffs(e)},PB.Data.getNotTopPuffs=function(e){return PB.Data.getCachedPuffs(e,"bottom")},PB.Data.garbageCompactor=function(){var e=PB.CONFIG.inMemoryShellLimit,t=PB.CONFIG.inMemoryMemoryLimit,r=PB.CONFIG.shellContentThreshold,n=!1;if(PB.Data.shells.length>e&&(n=!0,PB.Data.shells.slice(e).map(PB.prop("sig")).forEach(PB.Data.removeShellFromCache)),PB.Data.runningSizeTally>t){n=!0;for(var i=PB.Data.shells.length-1;i>=0;i--){var o=PB.Data.shells[i],a=(o.payload.content||"").toString().length;if(a>r&&(delete o.payload.content,total-=a+13,t>=total))break}}return n},PB.Data.getShellsForLocalStorage=function(){var e=PB.CONFIG.localStorageShellLimit,t=PB.CONFIG.localStorageMemoryLimit,r=PB.CONFIG.shellContentThreshold,n=PB.Data.getTopPuffs(e),i=n.reduce(function(e,t){return e+(PB.Data.getBonus(t,"size")||0)},0);if(t>=i)return n;for(var o=n.length-1;o>=0;o--){var a=n[o],s=(a.payload.content||"").toString().length;if(s>r){var u=PB.Data.compactPuff(a);if(n[o]=u,i-=s+13,t>=i)break}}if(t>=i)return n;for(var o=n.length-1;o>=0;o--){var s=JSON.stringify(a).length;if(i-=s,t>=i)break}return n=n.slice(0,Math.max(o,1))},PB.Data.compactPuff=function(e){var t=Boron.extend(e),r={};for(var n in e.payload)"content"!=n&&(r[n]=e.payload[n]);return t.payload=r,t},PB.Users={},PB.Users.records={},PB.Users.promises={},PB.Users.init=function(){PB.Users.depersist()},PB.Users.process=function(e){return(e=PB.Users.build(e.username,e.defaultKey,e.adminKey,e.rootKey,e.latest,e.created,e.updated,e.profile,e.identity,e.capa))?(PB.Users.cache(e),e):PB.onError("That is not an acceptable user record",e)},PB.Users.getCachedUserRecord=function(e){return PB.Users.makeVersioned(e)==e?PB.Users.records[e]:PB.Users.findFreshest(e)},PB.Users.getUserRecordPromise=function(e,t){var r=PB.Users.makeVersioned(e,t),n=PB.Users.getCachedUserRecord(r);if(n)return Promise.resolve(n);var i=PB.Users.promises[r];return i?i:PB.Users.getUserRecordNoCache(r)},PB.Users.getUserRecordNoCache=function(e,t){t=t||0;var r=PB.Net.getUserRecord(e,t);r=r.then(function(e){var e=PB.Users.process(e);return e||PB.throwError("Invalid user record returned"),e},PB.catchError("Unable to access user information from the DHT"));var n=PB.Users.makeVersioned(e,t);return PB.Users.promises[n]=r,r},PB.Users.doesUserExist=function(e){return PB.Net.getUserRecord(e).then(function(e){if(!e||e.FAIL)throw"User does not exist";return!0},PB.catchError("Unable to access user information from the DHT"))},PB.Users.userRecordToVersionedUsername=function(e){return PB.Users.makeVersioned(e.username,e.capa)},PB.Users.justUsername=function(e){var t=PB.Users.breakVersionedUsername(e);return t.username},PB.Users.justCapa=function(e){var t=PB.Users.breakVersionedUsername(e);return t.capa},PB.Users.makeVersioned=function(e,t){function r(e,t){return t=t||1,e+":"+t}return e&&e.indexOf?t?r(e,t):e.indexOf(":")>0?e:r(e):""},PB.Users.breakVersionedUsername=function(e){var t=(e||"").split(":");return{username:t[0],capa:t[1]||1}},PB.Users.build=function(e,t,r,n,i,o,a,s,u,c){return i=i||"",a=a||"",s=s||"",u=u||"",c=c||1,PB.validateUsername(e)?{username:e,capa:c,rootKey:n,adminKey:r,defaultKey:t,created:o,latest:i,updated:a,profile:s,identity:u}:!1},PB.Users.usernamesToUserRecordsPromise=function(e){if(!e||!e.length)return Promise.resolve([]);Array.isArray(e)||(e=[e]);var t=e.map(PB.Users.getCachedUserRecord).filter(Boolean);if(t.length==e.length)return Promise.resolve(t);var r=Promise.resolve(),n=t.map(function(e){return e.username});return e.forEach(function(e){~n.indexOf(e)||(r=r.then(function(){return PB.Users.getUserRecordNoCache(e).then(function(e){t.push(e)
})}))}),r.then(function(){return t})},PB.Users.cache=function(e){var t=PB.Users.userRecordToVersionedUsername(e);return PB.Users.records[t]=e,delete PB.Users.promises[t],PB.Persist.save("userRecords",PB.Users.records),e},PB.Users.depersist=function(){PB.Users.records=PB.Persist.get("userRecords")||{}},PB.Users.findFreshest=function(e){e=PB.Users.justUsername(e);var t=Object.keys(PB.Users.records),r=0;t.filter(function(t){return PB.Users.justUsername(t)==e}).forEach(function(e){var t=+PB.Users.justCapa(e);t>r&&(r=t)});var n=PB.Users.makeVersioned(e,r);return PB.Users.records[n]},PB.Users.getIdentityPuff=function(e,t){return e&&e.defaultKey&&e.username?e.identity?(puffprom=PB.Net.getPuffBySig(e.identity),puffprom.then(function(r){var n=r[0];if(!n||!n.sig)return PB.throwError("Invalid identity puff");var i=e.defaultKey,o=PB.Users.makeVersioned(e.username,e.capa),a=t;return PB.Data.decryptPuffAlmostForReals(n,i,o,a)})):PB.emptyPromise("User record has no identity"):PB.emptyPromise("Invalid user record")},PB.Users.getUpToDateUserAtAnyCost=function(){var e=PB.getCurrentUsername();if(e)return PB.Users.getUserRecordNoCache(e,0);var t=PB.Users.addNewAnonUser();return t.then(function(e){return PB.switchIdentityTo(e.username),console.log("Setting current user to "+e.username),e})},PB.Users.generateRandomUsername=function(e){e&&e==Math.round(e)||(e=10);for(var t="",r="abcdefghijklmnopqrstuvwxyz0123456789",n=0;10>n;n++)t+=PB.Crypto.getRandomItem(r);return t},PB.Users.addNewAnonUser=function(e){var t="anon."+PB.Users.generateRandomUsername(12);if(void 0!==typeof e&&e)var r=t+e,n=PB.Crypto.passphraseToPrivateKeyWif(r);else var n=PB.Crypto.generatePrivateKey();var i=PB.Crypto.privateToPublic(n),o=PB.Crypto.privateToPublic(n),a=PB.Crypto.privateToPublic(n),s={requestedUsername:t,defaultKey:a,adminKey:o,rootKey:i,time:Date.now()},u=[],c="requestUsername",f="updateUserRecord",l=PB.buildPuff("anon",PB.CONFIG.anonPrivateAdminKey,u,f,c,s);return PB.Net.updateUserRecord(l)},PB.Users.createAnonUserAndMakeCurrent=function(){var e="anon."+PB.Users.generateRandomUsername(12),t=PB.Crypto.generatePrivateKey().slice(-12),r=e+t,n=PB.Crypto.passphraseToPrivateKeyWif(r),i=PB.Crypto.privateToPublic(n),o={requestedUsername:e,defaultKey:i,adminKey:i,rootKey:i,time:Date.now()},a=[],s="requestUsername",u="updateUserRecord",c=PB.buildPuff("anon",PB.CONFIG.anonPrivateAdminKey,a,u,s,o),f=PB.Net.updateUserRecord(c);return f.then(function(e){return PB.addAlias(e.username,e.username,1,n,n,n,{passphrase:t}),PB.switchIdentityTo(e.username),e})},PB.Crypto={},PB.Crypto.generatePrivateKey=function(){var e=(new Bitcoin.ECKey).toWif();return PB.Crypto.wifToPriKey(e)?e:PB.Crypto.generatePrivateKey()},PB.Crypto.privateToPublic=function(e){if(!e)return PB.onError("That private key contained no data");try{return PB.Crypto.wifToPriKey(e).getPub(!0).toWif()}catch(t){return PB.onError("Invalid private key: could not convert to public key",[e,t])}},PB.Crypto.signPuff=function(e,t){var r=PB.Crypto.wifToPriKey(t),n=PB.Crypto.puffToSiglessString(e),i=PB.Crypto.createMessageHash(n);try{return Bitcoin.base58.encode(r.sign(i))}catch(o){return PB.onError("Could not properly encode signature",[r,i,o])}},PB.Crypto.verifyPuffSig=function(e,t){var r=PB.Crypto.puffToSiglessString(e);return PB.Crypto.verifyMessage(r,e.sig,t)},PB.Crypto.verifyMessage=function(e,t,r){try{var n=PB.Crypto.wifToPubKey(r),i=Bitcoin.base58.decode(t).toJSON();i=i.data||i;var o=PB.Crypto.createMessageHash(e);return n.verify(o,i)}catch(a){return PB.onError("Invalid key or sig: could not verify message",[o,t,r,a])}},PB.Crypto.createMessageHash=function(e){return Bitcoin.Crypto.SHA256(e).toString()},PB.Crypto.wifToPriKey=function(e){if(!e)return PB.onError("That private key wif contains no data");try{return new Bitcoin.ECKey(e,!0)}catch(t){return PB.onError("Invalid private key: are you sure it is properly WIFfed?",[e,t])}},PB.Crypto.wifToPubKey=function(e){if(!e)return PB.onError("That public key wif contains no data");try{var t=Bitcoin.base58check.decode(e).payload.toJSON();return t=t.data||t,new Bitcoin.ECPubKey(t,!0)}catch(r){return PB.onError("Invalid public key: are you sure it is properly WIFfed?",[e,r])}},PB.Crypto.puffToSiglessString=function(e){return JSON.stringify(e,function(e,t){return"sig"==e?void 0:t})},PB.Crypto.passphraseToPrivateKeyWif=function(e){var t=Bitcoin.Crypto.SHA256(e).toString(),r=Bitcoin.convert.hexToBytes(t);return Bitcoin.ECKey(r).toWif()},PB.Crypto.encryptWithAES=function(e,t){var r=Bitcoin.Crypto.AES.encrypt(e,t);return Bitcoin.Crypto.format.OpenSSL.stringify(r)},PB.Crypto.decryptWithAES=function(e,t){if(!t||!e)return!1;var r=Bitcoin.Crypto.format.OpenSSL.parse(e),n=Bitcoin.Crypto.AES.decrypt(r,t),i=Bitcoin.convert.wordsToBytes(n.words),o=/[\u0000-\u0010]+$/g;return i.map(function(e){return String.fromCharCode(e)}).join("").replace(o,"")},PB.Crypto.getOurSharedSecret=function(e,t){var r=PB.Crypto.wifToPubKey(e),n=PB.Crypto.wifToPriKey(t);if(!r||!n)return!1;var i=r.multiply(n).toWif(),o=Bitcoin.Crypto.SHA256(i).toString();return o},PB.Crypto.encryptPrivateMessage=function(e,t,r){var n=PB.Crypto.getOurSharedSecret(t,r);if(!n)return!1;var i=PB.Crypto.encryptWithAES(e,n);return i},PB.Crypto.decryptPrivateMessage=function(e,t,r){var n=PB.Crypto.getOurSharedSecret(t,r);if(!n||!e)return!1;var i=PB.Crypto.decryptWithAES(e,n);return i},PB.Crypto.random=function(){var e=PB.Crypto.getRandomValues(2,32),t=e[0]*Math.pow(2,20)+(e[1]>>12),r=t*Math.pow(2,-52);return r},PB.Crypto.getRandomInteger=function(e,t){t=Math.floor(t||0),e=Math.floor(e||2147483647);var r=e-t,n=PB.Crypto.random();return Math.floor(n*r+t)},PB.Crypto.getRandomItem=function(e){var t=PB.Crypto.getRandomInteger(e.length);return e[t]},PB.Crypto.getRandomKey=function(e){e=e||32;var t=PB.Crypto.getRandomValues(e,8);return Bitcoin.convert.bytesToBase64(t)},PB.Crypto.getRandomValues=function(e,t){if(window.crypto&&window.crypto.getRandomValues){var r;return r=32==t?new Uint32Array(t):new Uint8Array(t),window.crypto.getRandomValues(r)}return PB.Crypto.getRandomValuesShim(e,t)},PB.Crypto.getRandomValuesShim=function(e,t){for(var r,n=[],i=function(e){var e=e,t=987654321,r=4294967295;return function(){t=36969*(65535&t)+(t>>16)&r,e=18e3*(65535&e)+(e>>16)&r;var n=(t<<16)+e&r;return n/=4294967296,n+=.5,n*(Math.random()>.5?1:-1)}},o=0;e>o;o+=4){var a=i(4294967296*(r||Math.random()));if(r=987654071*a(),32==t)n.push(Math.abs(4294967296*a()|0));else{var s=4294967296*a()|0;n.push(Math.abs(4278190080&s)>>24),n.push(Math.abs(16711680&s)>>16),n.push(Math.abs(65280&s)>>8),n.push(Math.abs(255&s))}}return n},PB.Crypto.createKeyPairs=function(e,t,r){return Array.isArray(r)?r.reduce(function(r,n){var i=PB.Users.userRecordToVersionedUsername(n);return r[i]=PB.Crypto.encryptPrivateMessage(e,n.defaultKey,t),r},{}):PB.throwError("Invalid userRecords")},PB.Persist={},PB.Persist.todo={},PB.Persist.todoflag=!1,PB.Persist.save=function(e,t){null==t&&(t=!1),PB.Persist.todo[e]=t,PB.Persist.todoflag||onceInAwhile(function(){for(var e in PB.Persist.todo){var t="PUFF::"+e,r=PB.Persist.todo[e];"function"==typeof r&&(r=r());var n=JSON.stringify(r);localStorage.setItem(t,n)}PB.Persist.todo={},PB.Persist.todoflag=!1},100),PB.Persist.todoflag=!0},PB.Persist.get=function(e){var t="PUFF::"+e,r=localStorage.getItem(t);return r?PB.parseJSON(r):!1},PB.Persist.remove=function(e){var t="PUFF::"+e;localStorage.removeItem(t)},PB.Spec={},PB.Spec.isValidUsername=function(e){return PB.Spec.isValidUsername.rulesStatement="Usernames can only contain lowercase letters, numbers, and periods. They cannot be longer than 255 characters, or begin or end with a period.",e?e.length>255?!1:e.match(/^[a-z0-9.]+$/)?"."==e.slice(0,1)?!1:"."==e.slice(-1)?!1:!0:!1:!1},PB.Spec.sanitizeUsername=function(e){return e=e.trim(),e=e.toLowerCase(),"."==e.slice(0,1)&&(e=e.slice(1)),"."==e.slice(-1)&&(e=e.slice(0,-1)),e=e.replace(/[^a-z0-9.]+/g,"")},PB.Spec.isValidPublicKey=function(e){return isset(e)?!0:!1},PB.Spec.isValidPrivateKey=function(e){return isset(e)?!0:!1},PB.Spec.isValidCapa=function(e){PB.Spec.isValidCapa.rulesStatement="capa must be a natural number.",e=e.toString();var t=Math.abs(n),r=parseInt(n,10);return 1>r?!1:!isNaN(t)&&r===t&&t.toString()===n},PB.M.Forum={},PB.M.Forum.contentTypes={},PB.M.Forum.init=function(){PB.addRelationshipHandler(PB.M.Forum.addFamilialEdges),PB.addBeforeSwitchIdentityHandler(PB.M.Forum.clearPuffContentStash),PB.addPayloadModifierHandler(PB.M.Forum.addTimestamp)},PB.M.Forum.addTimestamp=function(e){return e=e||{},e.time=Date.now(),e},PB.M.Forum.filterByFilters=function(e){return e?function(t){if(e.routes&&e.routes.length>0){for(var r=!1,n=0;n<e.routes.length;n++)t.routes.indexOf(e.routes[n])>-1&&(r=!0);if(!r)return!1}if(e.tags&&e.tags.length>0){if(!t.payload.tags||!t.payload.tags.length)return!1;for(var i=!1,n=0;n<e.tags.length;n++)t.payload.tags.indexOf(e.tags[n])>-1&&(i=!0);if(!i)return!1}if(e.types&&e.types.length>0&&!~e.types.indexOf(t.payload.type))return!1;if(e.users&&e.users.length>0&&!~e.users.indexOf(PB.Users.justUsername(t.username)))return!1;if(e.roots&&(t.payload.parents||[]).length)return!1;if(e.ancestors&&e.focus){var o=PB.getPuffBySig(e.focus);if(o.payload&&!~o.payload.parents.indexOf(t.sig))return!1}return e.descendants&&e.focus&&!~t.payload.parents.indexOf(e.focus)?!1:e.type&&e.type.length&&!~e.type.indexOf(t.payload.type)?!1:!0}:function(){return!0}},PB.M.Forum.sortByPayload=function(e,t){return"DESC"==puffworldprops.view.query.sort?t.payload.time-e.payload.time:e.payload.time-t.payload.time},PB.M.Forum.getParentCount=function(e){if(!e)return 0;var t=e.sig||e;return PB.Data.graph.v(t).out("parent").run().length},PB.M.Forum.getChildCount=function(e){if(!e)return 0;var t=e.sig||e;return PB.Data.graph.v(t).out("child").run().length},PB.M.Forum.getPuffList=function(e,t,r){r=r||1/0;var n=+e.offset||0,i=PB.Data.getAllMyShells(),o=i.filter(PB.M.Forum.filterByFilters(Boron.extend({},e,t))).sort(PB.M.Forum.sortByPayload),a=o.slice(n,n+r),s=a.map(PB.Data.getPuffFromShell).filter(Boolean),u=a.length;return u>=r?s:(PB.Data.fillSomeSlotsPlease(r,u,e,t),s)},PB.M.Forum.addPost=function(e,t,r,n,i,o){if(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(PB.getPuffBySig).filter(function(e){return null!=e}).length!=r.length)return PB.emptyPromise("Those are not good parents");r=PB.uniquify(r);var a=r.map(function(e){return PB.getPuffBySig(e).username});n.routes&&(a=n.routes,delete n.routes),a=PB.uniquify(a);var s=PB.M.Forum.partiallyApplyPuffMaker(e,t,r,n,a,i,o),u=PB.Users.getUpToDateUserAtAnyCost(),c=u.catch(PB.catchError("Failed to add post: could not access or create a valid user")).then(s).catch(PB.catchError("Posting failed"));return c},PB.M.Forum.partiallyApplyPuffMaker=function(e,t,r,n,i,o,a){var s=n||{};s.parents=s.parents||r,s.time=n.time||Date.now(),s.tags=n.tags||[];var e=e||"text",i=i?i:[];return i=i.concat(PB.CONFIG.zone),function(r){var n=(r.latest,PB.simpleBuildPuff(e,t,s,i,o,a));return PB.addPuffToSystem(n)}},PB.M.Forum.addFamilialEdges=function(e){e.forEach(PB.M.Forum.addFamilialEdgesForShell)},PB.M.Forum.addFamilialEdgesForShell=function(e){var t=PB.M.Forum.addFamilialEdgesForParent(e);(e.payload.parents||[]).forEach(t)},PB.M.Forum.addFamilialEdgesForParent=function(e){var t=PB.Data.graph.v(e.sig).out("parent").property("shell").run().map(PB.prop("sig"));return function(r){return~t.indexOf(r)?!1:(PB.Data.addSigAsVertex(r),PB.Data.graph.addEdge({_label:"parent",_in:r,_out:e.sig}),void PB.Data.graph.addEdge({_label:"child",_out:r,_in:e.sig}))}},PB.M.Forum.processContent=function(e,t,r){var n=PB.M.Forum.contentTypes[e];return n||(n=PB.M.Forum.contentTypes.text),n.toHtml(t,r)},PB.M.Forum.puffContentStash={},PB.M.Forum.clearPuffContentStash=function(){PB.M.Forum.puffContentStash={}},PB.M.Forum.getProcessedPuffContent=function(e){if(PB.M.Forum.puffContentStash[e.sig])return PB.M.Forum.puffContentStash[e.sig];var t=PB.M.Forum.processContent(e.payload.type,e.payload.content,e);return PB.M.Forum.puffContentStash[e.sig]=t,t},PB.M.Forum.addContentType=function(e,t){return e?PB.CONFIG.supportedContentTypes&&-1==PB.CONFIG.supportedContentTypes.indexOf(e)?PB.onError("Unsupported content type: "+e):t.toHtml?void(PB.M.Forum.contentTypes[e]=t):PB.onError("Invalid content type: object is missing toHtml method",e):PB.onError("Invalid content type name")},PB.M.Forum.addContentType("text",{toHtml:function(e){var t=XBBCODE.process({text:e});return t.html=t.html.replace(/\n/g,"</br>"),"<span>"+t.html+"</span>"}}),PB.M.Forum.addContentType("bbcode",{toHtml:function(e){var t=XBBCODE.process({text:e}),r=t.html.replace(/\n/g,"<br />");return r}}),PB.M.Forum.addContentType("image",{toHtml:function(e){return"tableView"==puffworldprops.view.mode?"<img src="+e+" />":'<img class="imgInBox" src='+e+" />"}}),PB.M.Forum.addContentType("markdown",{toHtml:function(e){var t=new Markdown.Converter;return"<span>"+t.makeHtml(e)+"</span>"}}),PB.M.Forum.addContentType("PGN",{toHtml:function(e){return chessBoard(e)}}),PB.M.Forum.addContentType("identity",{toHtml:function(){return""}}),PB.M.Forum.addContentType("profile",{toHtml:function(e){return"tableView"==puffworldprops.view.mode?"<img src="+e+" />":'<img class="imgInBox" src='+e+" />"}}),PB.M.Forum.addContentType("file",{toHtml:function(e,t){return t.payload.filename}}),PB.M.Forum.flagPuff=function(e){var t,r={},n=[],i="flagPuff",o=e;r.time=Date.now(),PB.useSecureInfo(function(e,a,s,u){return a?u?void(t=PB.buildPuff(a,u,n,i,o,r)):(alert("You must first set your private admin key before you can flag content"),!1):(alert("You must first set your username before you can flag content"),!1)});var a={type:"flagPuff",puff:t},s=PB.Net.PBpost(PB.CONFIG.puffApi,a);return s=s.then(function(e){var t=PB.Persist.get("flagged")||[];return t.push(o),PB.Persist.save("flagged",t),Events.pub("ui/flag",{}),e})},PB.M.Forum.metaFields=[],PB.M.Forum.context={},PB.M.Forum.addMetaFields=function(e,t,r){if(!e.name)return console.log("Invalid meta field name.");if(!e.type)return console.log("Invalid meta field type.");if(e.validator&&"function"==typeof e.validator||(e.validator=!1),t=t||Object.keys(PB.M.Forum.contentTypes),"string"==typeof t)t=[t];else if(!Array.isArray(t))return PB.onError("Invalid context.");if(r=r||[],"string"==typeof r)r=[r];else if(!Array.isArray(r))return PB.onError("Invalid context.");PB.M.Forum.metaFields.push(e);for(var n=0;n<t.length;n++)if(-1==r.indexOf(t[n])){var i=PB.M.Forum.context[t[n]]||[];i.push(e.name),PB.M.Forum.context[t[n]]=i}},PB.M.Forum.addMetaFields({name:"reply privacy",type:"pulldown","enum":["","public","private","anonymous","invisible"],defaultValue:""}),PB.M.Forum.addMetaFields({name:"content license",type:"pulldown","enum":["","CreativeCommonsAttribution","GNUPublicLicense","Publicdomain","Rights-managed","Royalty-free"],defaultValue:""}),PB.M.Forum.addMetaFields({name:"tags",type:"array",validator:function(e){return/^[a-z0-9]+$/i.test(e)}},!1,"profile"),PB.M.Forum.addMetaFields({name:"language",type:"text",defaultValue:function(){return puffworldprops.view.language}}),PB.M.Forum.addMetaFields({name:"name",type:"text"},"profile"),PB.M.Wardrobe={},~function(){function e(){PB.implementSecureInterface(c,f,l,h,p,d,y),PB.addIdentityUpdateHandler(function(){PB.CONFIG.disableCloudIdentity||PB.storeIdentityFileInCloud()});var e=PB.CONFIG.disableCloudIdentity;PB.CONFIG.disableCloudIdentity=!0;var t=PB.Persist.get("identities")||{};Object.keys(t).forEach(function(e){var r=t[e];f(e,r.aliases,r.preferences,!0)}),PB.CONFIG.disableCloudIdentity=e;var r=PB.Persist.get("currentUsername");r&&PB.switchIdentityTo(r)}function t(e,t){for(var r=0,n=!1,i=0,o=e.aliases.length;o>i;i++){var a=e.aliases[i];a.username==t&&a.capa>r&&(n=a,r=a.capa)}return n}function r(e,t){for(var r=0,n=e.aliases.length;n>r;r++){var i=e.aliases[r];if(t.username==i.username&&t.capa==i.capa)return i}}function n(){PB.CONFIG.ephemeralKeychain||PB.Persist.save("identities",a),PB.Persist.save("currentUsername",u),PB.runHandlers("identityUpdate")}function i(){return o(u)}function o(e){if(!e)return!1;var t=a[e];return t?t:!1}var a={},s={},u=!1;PB.M.Wardrobe.init=e;var c=function(e){var t=i()||{},r=t.primary||{};return e(a,u,r.privateRootKey,r.privateAdminKey,r.privateDefaultKey),!0},f=function(e,t,r,i){var o={username:e,primary:{},aliases:[],preferences:r||{}};return a[e]=o,Array.isArray(t)||(t=t?[t]:[]),t.forEach(function(t){l(e,t.username,t.capa,t.privateRootKey,t.privateAdminKey,t.privateDefaultKey,t.secrets)}),i||n(),!0},l=function(e,t,i,a,u,c,l){var h={username:t,capa:i||1,privateRootKey:a||!1,privateAdminKey:u||!1,privateDefaultKey:c||!1,secrets:l||{}},p=o(e);p||(f(e),p=o(e));var d=r(p,h);if(d){h.secrets=Boron.extend(d.secrets,h.secrets);for(var y in h)h[y]&&(d[y]=h[y])}else p.aliases.push(h);return t==e&&h.capa>=(p.capa||0)&&(p.primary=h),s[t]=p,n(),!0},h=function(e,r){var n=o(e);if(!n)return PB.onError("Primary alias can only be set for known identities");var i=t(n,r);return i?(n.username=r,n.primary=i,delete a[e],a[r]=n,e==u&&d(r),!0):PB.onError("That alias is not associated with that identity")},p=function(e,t){var r=i();return r?(r.preferences[e]=t,void n()):PB.onError("Preferences can only be set for an active identity")},d=function(e){if(e){var t=o(e);if(!t)return PB.onError('No identity found with username "'+e+'"')}return u=e||!1,PB.currentIdentityHash||(PB.currentIdentityHash=PB.Crypto.createMessageHash(JSON.stringify(PB.formatIdentityFile()))),n(),e&&t&&t.primary&&PB.Users.getUserRecordPromise(e,t.primary.capa),!0},y=function(e){var t=o(e);return t?(delete a[e],u==e&&(u=!1),void n()):PB.onError("Could not find that identity for removal")}}();