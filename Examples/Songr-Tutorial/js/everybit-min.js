!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;"undefined"!=typeof window?e=window:"undefined"!=typeof global?e=global:"undefined"!=typeof self&&(e=self),e.Bitcoin=t()}}(function(){var t;return function e(t,r,n){function i(s,a){if(!r[s]){if(!t[s]){var u="function"==typeof require&&require;if(!a&&u)return u(s,!0);if(o)return o(s,!0);throw new Error("Cannot find module '"+s+"'")}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r?r:e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var o="function"==typeof require&&require,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(t,e){function r(t,e){return l.isUndefined(e)?""+e:!l.isNumber(e)||!isNaN(e)&&isFinite(e)?l.isFunction(e)||l.isRegExp(e)?e.toString():e:e.toString()}function n(t,e){return l.isString(t)?t.length<e?t:t.slice(0,e):t}function i(t){return n(JSON.stringify(t.actual,r),128)+" "+t.operator+" "+n(JSON.stringify(t.expected,r),128)}function o(t,e,r,n,i){throw new g.AssertionError({message:r,actual:t,expected:e,operator:n,stackStartFunction:i})}function s(t,e){t||o(t,!0,e,"==",g.ok)}function a(t,e){if(t===e)return!0;if(l.isBuffer(t)&&l.isBuffer(e)){if(t.length!=e.length)return!1;for(var r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}return l.isDate(t)&&l.isDate(e)?t.getTime()===e.getTime():l.isRegExp(t)&&l.isRegExp(e)?t.source===e.source&&t.global===e.global&&t.multiline===e.multiline&&t.lastIndex===e.lastIndex&&t.ignoreCase===e.ignoreCase:l.isObject(t)||l.isObject(e)?c(t,e):t==e}function u(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function c(t,e){if(l.isNullOrUndefined(t)||l.isNullOrUndefined(e))return!1;if(t.prototype!==e.prototype)return!1;if(u(t))return u(e)?(t=p.call(t),e=p.call(e),a(t,e)):!1;try{var r,n,i=y(t),o=y(e)}catch(s){return!1}if(i.length!=o.length)return!1;for(i.sort(),o.sort(),n=i.length-1;n>=0;n--)if(i[n]!=o[n])return!1;for(n=i.length-1;n>=0;n--)if(r=i[n],!a(t[r],e[r]))return!1;return!0}function f(t,e){return t&&e?"[object RegExp]"==Object.prototype.toString.call(e)?e.test(t):t instanceof e?!0:e.call({},t)===!0?!0:!1:!1}function h(t,e,r,n){var i;l.isString(r)&&(n=r,r=null);try{e()}catch(s){i=s}if(n=(r&&r.name?" ("+r.name+").":".")+(n?" "+n:"."),t&&!i&&o(i,r,"Missing expected exception"+n),!t&&f(i,r)&&o(i,r,"Got unwanted exception"+n),t&&i&&r&&!f(i,r)||!t&&i)throw i}var l=t("util/"),p=Array.prototype.slice,d=Object.prototype.hasOwnProperty,g=e.exports=s;g.AssertionError=function(t){this.name="AssertionError",this.actual=t.actual,this.expected=t.expected,this.operator=t.operator,t.message?(this.message=t.message,this.generatedMessage=!1):(this.message=i(this),this.generatedMessage=!0);var e=t.stackStartFunction||o;if(Error.captureStackTrace)Error.captureStackTrace(this,e);else{var r=new Error;if(r.stack){var n=r.stack,s=e.name,a=n.indexOf("\n"+s);if(a>=0){var u=n.indexOf("\n",a+1);n=n.substring(u+1)}this.stack=n}}},l.inherits(g.AssertionError,Error),g.fail=o,g.ok=s,g.equal=function(t,e,r){t!=e&&o(t,e,r,"==",g.equal)},g.notEqual=function(t,e,r){t==e&&o(t,e,r,"!=",g.notEqual)},g.deepEqual=function(t,e,r){a(t,e)||o(t,e,r,"deepEqual",g.deepEqual)},g.notDeepEqual=function(t,e,r){a(t,e)&&o(t,e,r,"notDeepEqual",g.notDeepEqual)},g.strictEqual=function(t,e,r){t!==e&&o(t,e,r,"===",g.strictEqual)},g.notStrictEqual=function(t,e,r){t===e&&o(t,e,r,"!==",g.notStrictEqual)},g.throws=function(){h.apply(this,[!0].concat(p.call(arguments)))},g.doesNotThrow=function(){h.apply(this,[!1].concat(p.call(arguments)))},g.ifError=function(t){if(t)throw t};var y=Object.keys||function(t){var e=[];for(var r in t)d.call(t,r)&&e.push(r);return e}},{"util/":3}],2:[function(t,e){e.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},{}],3:[function(t,e,r){(function(e,n){function i(t,e){var n={seen:[],stylize:s};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(e)?n.showHidden=e:e&&r._extend(n,e),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=o),u(n,t,n.depth)}function o(t,e){var r=i.styles[e];return r?"["+i.colors[r][0]+"m"+t+"["+i.colors[r][1]+"m":t}function s(t){return t}function a(t){var e={};return t.forEach(function(t){e[t]=!0}),e}function u(t,e,n){if(t.customInspect&&e&&k(e.inspect)&&e.inspect!==r.inspect&&(!e.constructor||e.constructor.prototype!==e)){var i=e.inspect(n,t);return m(i)||(i=u(t,i,n)),i}var o=c(t,e);if(o)return o;var s=Object.keys(e),g=a(s);if(t.showHidden&&(s=Object.getOwnPropertyNames(e)),S(e)&&(s.indexOf("message")>=0||s.indexOf("description")>=0))return f(e);if(0===s.length){if(k(e)){var y=e.name?": "+e.name:"";return t.stylize("[Function"+y+"]","special")}if(F(e))return t.stylize(RegExp.prototype.toString.call(e),"regexp");if(_(e))return t.stylize(Date.prototype.toString.call(e),"date");if(S(e))return f(e)}var v="",B=!1,P=["{","}"];if(d(e)&&(B=!0,P=["[","]"]),k(e)){var b=e.name?": "+e.name:"";v=" [Function"+b+"]"}if(F(e)&&(v=" "+RegExp.prototype.toString.call(e)),_(e)&&(v=" "+Date.prototype.toUTCString.call(e)),S(e)&&(v=" "+f(e)),0===s.length&&(!B||0==e.length))return P[0]+v+P[1];if(0>n)return F(e)?t.stylize(RegExp.prototype.toString.call(e),"regexp"):t.stylize("[Object]","special");t.seen.push(e);var w;return w=B?h(t,e,n,g,s):s.map(function(r){return l(t,e,n,g,r,B)}),t.seen.pop(),p(w,v,P)}function c(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var r="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(r,"string")}return B(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}function f(t){return"["+Error.prototype.toString.call(t)+"]"}function h(t,e,r,n,i){for(var o=[],s=0,a=e.length;a>s;++s)o.push(C(e,String(s))?l(t,e,r,n,String(s),!0):"");return i.forEach(function(i){i.match(/^\d+$/)||o.push(l(t,e,r,n,i,!0))}),o}function l(t,e,r,n,i,o){var s,a,c;if(c=Object.getOwnPropertyDescriptor(e,i)||{value:e[i]},c.get?a=c.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),C(n,i)||(s="["+i+"]"),a||(t.seen.indexOf(c.value)<0?(a=y(r)?u(t,c.value,null):u(t,c.value,r-1),a.indexOf("\n")>-1&&(a=o?a.split("\n").map(function(t){return"  "+t}).join("\n").substr(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n"))):a=t.stylize("[Circular]","special")),b(s)){if(o&&i.match(/^\d+$/))return a;s=JSON.stringify(""+i),s.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(s=s.substr(1,s.length-2),s=t.stylize(s,"name")):(s=s.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),s=t.stylize(s,"string"))}return s+": "+a}function p(t,e,r){var n=0,i=t.reduce(function(t,e){return n++,e.indexOf("\n")>=0&&n++,t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0);return i>60?r[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+r[1]:r[0]+e+" "+t.join(", ")+" "+r[1]}function d(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function y(t){return null===t}function v(t){return null==t}function B(t){return"number"==typeof t}function m(t){return"string"==typeof t}function P(t){return"symbol"==typeof t}function b(t){return void 0===t}function F(t){return w(t)&&"[object RegExp]"===D(t)}function w(t){return"object"==typeof t&&null!==t}function _(t){return w(t)&&"[object Date]"===D(t)}function S(t){return w(t)&&("[object Error]"===D(t)||t instanceof Error)}function k(t){return"function"==typeof t}function E(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||"undefined"==typeof t}function D(t){return Object.prototype.toString.call(t)}function A(t){return 10>t?"0"+t.toString(10):t.toString(10)}function T(){var t=new Date,e=[A(t.getHours()),A(t.getMinutes()),A(t.getSeconds())].join(":");return[t.getDate(),U[t.getMonth()],e].join(" ")}function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var x=/%[sdj%]/g;r.format=function(t){if(!m(t)){for(var e=[],r=0;r<arguments.length;r++)e.push(i(arguments[r]));return e.join(" ")}for(var r=1,n=arguments,o=n.length,s=String(t).replace(x,function(t){if("%%"===t)return"%";if(r>=o)return t;switch(t){case"%s":return String(n[r++]);case"%d":return Number(n[r++]);case"%j":try{return JSON.stringify(n[r++])}catch(e){return"[Circular]"}default:return t}}),a=n[r];o>r;a=n[++r])s+=y(a)||!w(a)?" "+a:" "+i(a);return s},r.deprecate=function(t,i){function o(){if(!s){if(e.throwDeprecation)throw new Error(i);e.traceDeprecation?console.trace(i):console.error(i),s=!0}return t.apply(this,arguments)}if(b(n.process))return function(){return r.deprecate(t,i).apply(this,arguments)};if(e.noDeprecation===!0)return t;var s=!1;return o};var O,I={};r.debuglog=function(t){if(b(O)&&(O=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!I[t])if(new RegExp("\\b"+t+"\\b","i").test(O)){var n=e.pid;I[t]=function(){var e=r.format.apply(r,arguments);console.error("%s %d: %s",t,n,e)}}else I[t]=function(){};return I[t]},r.inspect=i,i.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},i.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},r.isArray=d,r.isBoolean=g,r.isNull=y,r.isNullOrUndefined=v,r.isNumber=B,r.isString=m,r.isSymbol=P,r.isUndefined=b,r.isRegExp=F,r.isObject=w,r.isDate=_,r.isError=S,r.isFunction=k,r.isPrimitive=E,r.isBuffer=t("./support/isBuffer");var U=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];r.log=function(){console.log("%s - %s",T(),r.format.apply(r,arguments))},r.inherits=t("inherits"),r._extend=function(t,e){if(!e||!w(e))return t;for(var r=Object.keys(e),n=r.length;n--;)t[r[n]]=e[r[n]];return t}}).call(this,t("FWaASH"),"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":2,FWaASH:15,inherits:14}],4:[function(){},{}],5:[function(t,e,r){function n(t,e,r){if(!(this instanceof n))return new n(t,e,r);var i=typeof t;if("base64"===e&&"string"===i)for(t=D(t);t.length%4!==0;)t+="=";var o;if("number"===i)o=T(t);else if("string"===i)o=n.byteLength(t,e);else{if("object"!==i)throw new Error("First argument needs to be a number, array or string.");o=T(t.length)}var s;n._useTypedArrays?s=n._augment(new Uint8Array(o)):(s=this,s.length=o,s._isBuffer=!0);var a;if(n._useTypedArrays&&"number"==typeof t.byteLength)s._set(t);else if(x(t))if(n.isBuffer(t))for(a=0;o>a;a++)s[a]=t.readUInt8(a);else for(a=0;o>a;a++)s[a]=(t[a]%256+256)%256;else if("string"===i)s.write(t,0,e);else if("number"===i&&!n._useTypedArrays&&!r)for(a=0;o>a;a++)s[a]=0;return s}function i(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;q(o%2===0,"Invalid hex string"),n>o/2&&(n=o/2);for(var s=0;n>s;s++){var a=parseInt(e.substr(2*s,2),16);q(!isNaN(a),"Invalid hex string"),t[r+s]=a}return s}function o(t,e,r,n){var i=R(I(e),t,r,n);return i}function s(t,e,r,n){var i=R(U(e),t,r,n);return i}function a(t,e,r,n){return s(t,e,r,n)}function u(t,e,r,n){var i=R(N(e),t,r,n);return i}function c(t,e,r,n){var i=R(M(e),t,r,n);return i}function f(t,e,r){return K.fromByteArray(0===e&&r===t.length?t:t.slice(e,r))}function h(t,e,r){var n="",i="";r=Math.min(t.length,r);for(var o=e;r>o;o++)t[o]<=127?(n+=H(i)+String.fromCharCode(t[o]),i=""):i+="%"+t[o].toString(16);return n+H(i)}function l(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;r>i;i++)n+=String.fromCharCode(t[i]);return n}function p(t,e,r){return l(t,e,r)}function d(t,e,r){var n=t.length;(!e||0>e)&&(e=0),(!r||0>r||r>n)&&(r=n);for(var i="",o=e;r>o;o++)i+=O(t[o]);return i}function g(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function y(t,e,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==e&&null!==e,"missing offset"),q(e+1<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o;return r?(o=t[e],i>e+1&&(o|=t[e+1]<<8)):(o=t[e]<<8,i>e+1&&(o|=t[e+1])),o}}function v(t,e,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==e&&null!==e,"missing offset"),q(e+3<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o;return r?(i>e+2&&(o=t[e+2]<<16),i>e+1&&(o|=t[e+1]<<8),o|=t[e],i>e+3&&(o+=t[e+3]<<24>>>0)):(i>e+1&&(o=t[e+1]<<16),i>e+2&&(o|=t[e+2]<<8),i>e+3&&(o|=t[e+3]),o+=t[e]<<24>>>0),o}}function B(t,e,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==e&&null!==e,"missing offset"),q(e+1<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o=y(t,e,r,!0),s=32768&o;return s?-1*(65535-o+1):o}}function m(t,e,r,n){n||(q("boolean"==typeof r,"missing or invalid endian"),q(void 0!==e&&null!==e,"missing offset"),q(e+3<t.length,"Trying to read beyond buffer length"));var i=t.length;if(!(e>=i)){var o=v(t,e,r,!0),s=2147483648&o;return s?-1*(4294967295-o+1):o}}function P(t,e,r,n){return n||(q("boolean"==typeof r,"missing or invalid endian"),q(e+3<t.length,"Trying to read beyond buffer length")),V.read(t,e,r,23,4)}function b(t,e,r,n){return n||(q("boolean"==typeof r,"missing or invalid endian"),q(e+7<t.length,"Trying to read beyond buffer length")),V.read(t,e,r,52,8)}function F(t,e,r,n,i){i||(q(void 0!==e&&null!==e,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+1<t.length,"trying to write beyond buffer length"),L(e,65535));var o=t.length;if(!(r>=o)){for(var s=0,a=Math.min(o-r,2);a>s;s++)t[r+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s);return r+2}}function w(t,e,r,n,i){i||(q(void 0!==e&&null!==e,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<t.length,"trying to write beyond buffer length"),L(e,4294967295));var o=t.length;if(!(r>=o)){for(var s=0,a=Math.min(o-r,4);a>s;s++)t[r+s]=e>>>8*(n?s:3-s)&255;return r+4}}function _(t,e,r,n,i){i||(q(void 0!==e&&null!==e,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+1<t.length,"Trying to write beyond buffer length"),j(e,32767,-32768));var o=t.length;if(!(r>=o))return e>=0?F(t,e,r,n,i):F(t,65535+e+1,r,n,i),r+2}function S(t,e,r,n,i){i||(q(void 0!==e&&null!==e,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<t.length,"Trying to write beyond buffer length"),j(e,2147483647,-2147483648));var o=t.length;if(!(r>=o))return e>=0?w(t,e,r,n,i):w(t,4294967295+e+1,r,n,i),r+4}function k(t,e,r,n,i){i||(q(void 0!==e&&null!==e,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+3<t.length,"Trying to write beyond buffer length"),z(e,3.4028234663852886e38,-3.4028234663852886e38));var o=t.length;if(!(r>=o))return V.write(t,e,r,n,23,4),r+4}function E(t,e,r,n,i){i||(q(void 0!==e&&null!==e,"missing value"),q("boolean"==typeof n,"missing or invalid endian"),q(void 0!==r&&null!==r,"missing offset"),q(r+7<t.length,"Trying to write beyond buffer length"),z(e,1.7976931348623157e308,-1.7976931348623157e308));var o=t.length;if(!(r>=o))return V.write(t,e,r,n,52,8),r+8}function D(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function A(t,e,r){return"number"!=typeof t?r:(t=~~t,t>=e?e:t>=0?t:(t+=e,t>=0?t:0))}function T(t){return t=~~Math.ceil(+t),0>t?0:t}function C(t){return(Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)})(t)}function x(t){return C(t)||n.isBuffer(t)||t&&"object"==typeof t&&"number"==typeof t.length}function O(t){return 16>t?"0"+t.toString(16):t.toString(16)}function I(t){for(var e=[],r=0;r<t.length;r++){var n=t.charCodeAt(r);if(127>=n)e.push(n);else{var i=r;n>=55296&&57343>=n&&r++;for(var o=encodeURIComponent(t.slice(i,r+1)).substr(1).split("%"),s=0;s<o.length;s++)e.push(parseInt(o[s],16))}}return e}function U(t){for(var e=[],r=0;r<t.length;r++)e.push(255&t.charCodeAt(r));return e}function M(t){for(var e,r,n,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),r=e>>8,n=e%256,i.push(n),i.push(r);return i}function N(t){return K.toByteArray(t)}function R(t,e,r,n){for(var i=0;n>i&&!(i+r>=e.length||i>=t.length);i++)e[i+r]=t[i];return i}function H(t){try{return decodeURIComponent(t)}catch(e){return String.fromCharCode(65533)}}function L(t,e){q("number"==typeof t,"cannot write a non-number as a number"),q(t>=0,"specified a negative value for writing an unsigned value"),q(e>=t,"value is larger than maximum value for type"),q(Math.floor(t)===t,"value has a fractional component")}function j(t,e,r){q("number"==typeof t,"cannot write a non-number as a number"),q(e>=t,"value larger than maximum allowed value"),q(t>=r,"value smaller than minimum allowed value"),q(Math.floor(t)===t,"value has a fractional component")}function z(t,e,r){q("number"==typeof t,"cannot write a non-number as a number"),q(e>=t,"value larger than maximum allowed value"),q(t>=r,"value smaller than minimum allowed value")}function q(t,e){if(!t)throw new Error(e||"Failed assertion")}var K=t("base64-js"),V=t("ieee754");r.Buffer=n,r.SlowBuffer=n,r.INSPECT_MAX_BYTES=50,n.poolSize=8192,n._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&"function"==typeof e.subarray}catch(r){return!1}}(),n.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"raw":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},n.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},n.byteLength=function(t,e){var r;switch(t=t.toString(),e||"utf8"){case"hex":r=t.length/2;break;case"utf8":case"utf-8":r=I(t).length;break;case"ascii":case"binary":case"raw":r=t.length;break;case"base64":r=N(t).length;break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":r=2*t.length;break;default:throw new Error("Unknown encoding")}return r},n.concat=function(t,e){if(q(C(t),"Usage: Buffer.concat(list[, length])"),0===t.length)return new n(0);if(1===t.length)return t[0];var r;if(void 0===e)for(e=0,r=0;r<t.length;r++)e+=t[r].length;var i=new n(e),o=0;for(r=0;r<t.length;r++){var s=t[r];s.copy(i,o),o+=s.length}return i},n.compare=function(t,e){q(n.isBuffer(t)&&n.isBuffer(e),"Arguments must be Buffers");for(var r=t.length,i=e.length,o=0,s=Math.min(r,i);s>o&&t[o]===e[o];o++);return o!==s&&(r=t[o],i=e[o]),i>r?-1:r>i?1:0},n.prototype.write=function(t,e,r,n){if(isFinite(e))isFinite(r)||(n=r,r=void 0);else{var f=n;n=e,e=r,r=f}e=Number(e)||0;var h=this.length-e;r?(r=Number(r),r>h&&(r=h)):r=h,n=String(n||"utf8").toLowerCase();var l;switch(n){case"hex":l=i(this,t,e,r);break;case"utf8":case"utf-8":l=o(this,t,e,r);break;case"ascii":l=s(this,t,e,r);break;case"binary":l=a(this,t,e,r);break;case"base64":l=u(this,t,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":l=c(this,t,e,r);break;default:throw new Error("Unknown encoding")}return l},n.prototype.toString=function(t,e,r){var n=this;if(t=String(t||"utf8").toLowerCase(),e=Number(e)||0,r=void 0===r?n.length:Number(r),r===e)return"";var i;switch(t){case"hex":i=d(n,e,r);break;case"utf8":case"utf-8":i=h(n,e,r);break;case"ascii":i=l(n,e,r);break;case"binary":i=p(n,e,r);break;case"base64":i=f(n,e,r);break;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":i=g(n,e,r);break;default:throw new Error("Unknown encoding")}return i},n.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}},n.prototype.equals=function(t){return q(n.isBuffer(t),"Argument must be a Buffer"),0===n.compare(this,t)},n.prototype.compare=function(t){return q(n.isBuffer(t),"Argument must be a Buffer"),n.compare(this,t)},n.prototype.copy=function(t,e,r,i){var o=this;if(r||(r=0),i||0===i||(i=this.length),e||(e=0),i!==r&&0!==t.length&&0!==o.length){q(i>=r,"sourceEnd < sourceStart"),q(e>=0&&e<t.length,"targetStart out of bounds"),q(r>=0&&r<o.length,"sourceStart out of bounds"),q(i>=0&&i<=o.length,"sourceEnd out of bounds"),i>this.length&&(i=this.length),t.length-e<i-r&&(i=t.length-e+r);var s=i-r;if(100>s||!n._useTypedArrays)for(var a=0;s>a;a++)t[a+e]=this[a+r];else t._set(this.subarray(r,r+s),e)}},n.prototype.slice=function(t,e){var r=this.length;if(t=A(t,r,0),e=A(e,r,r),n._useTypedArrays)return n._augment(this.subarray(t,e));for(var i=e-t,o=new n(i,void 0,!0),s=0;i>s;s++)o[s]=this[s+t];return o},n.prototype.get=function(t){return console.log(".get() is deprecated. Access using array indexes instead."),this.readUInt8(t)},n.prototype.set=function(t,e){return console.log(".set() is deprecated. Access using array indexes instead."),this.writeUInt8(t,e)},n.prototype.readUInt8=function(t,e){return e||(q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"Trying to read beyond buffer length")),t>=this.length?void 0:this[t]},n.prototype.readUInt16LE=function(t,e){return y(this,t,!0,e)},n.prototype.readUInt16BE=function(t,e){return y(this,t,!1,e)},n.prototype.readUInt32LE=function(t,e){return v(this,t,!0,e)},n.prototype.readUInt32BE=function(t,e){return v(this,t,!1,e)},n.prototype.readInt8=function(t,e){if(e||(q(void 0!==t&&null!==t,"missing offset"),q(t<this.length,"Trying to read beyond buffer length")),!(t>=this.length)){var r=128&this[t];return r?-1*(255-this[t]+1):this[t]}},n.prototype.readInt16LE=function(t,e){return B(this,t,!0,e)},n.prototype.readInt16BE=function(t,e){return B(this,t,!1,e)},n.prototype.readInt32LE=function(t,e){return m(this,t,!0,e)},n.prototype.readInt32BE=function(t,e){return m(this,t,!1,e)},n.prototype.readFloatLE=function(t,e){return P(this,t,!0,e)},n.prototype.readFloatBE=function(t,e){return P(this,t,!1,e)},n.prototype.readDoubleLE=function(t,e){return b(this,t,!0,e)},n.prototype.readDoubleBE=function(t,e){return b(this,t,!1,e)},n.prototype.writeUInt8=function(t,e,r){return r||(q(void 0!==t&&null!==t,"missing value"),q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"trying to write beyond buffer length"),L(t,255)),e>=this.length?void 0:(this[e]=t,e+1)},n.prototype.writeUInt16LE=function(t,e,r){return F(this,t,e,!0,r)},n.prototype.writeUInt16BE=function(t,e,r){return F(this,t,e,!1,r)},n.prototype.writeUInt32LE=function(t,e,r){return w(this,t,e,!0,r)},n.prototype.writeUInt32BE=function(t,e,r){return w(this,t,e,!1,r)},n.prototype.writeInt8=function(t,e,r){return r||(q(void 0!==t&&null!==t,"missing value"),q(void 0!==e&&null!==e,"missing offset"),q(e<this.length,"Trying to write beyond buffer length"),j(t,127,-128)),e>=this.length?void 0:(t>=0?this.writeUInt8(t,e,r):this.writeUInt8(255+t+1,e,r),e+1)},n.prototype.writeInt16LE=function(t,e,r){return _(this,t,e,!0,r)},n.prototype.writeInt16BE=function(t,e,r){return _(this,t,e,!1,r)},n.prototype.writeInt32LE=function(t,e,r){return S(this,t,e,!0,r)},n.prototype.writeInt32BE=function(t,e,r){return S(this,t,e,!1,r)},n.prototype.writeFloatLE=function(t,e,r){return k(this,t,e,!0,r)},n.prototype.writeFloatBE=function(t,e,r){return k(this,t,e,!1,r)},n.prototype.writeDoubleLE=function(t,e,r){return E(this,t,e,!0,r)},n.prototype.writeDoubleBE=function(t,e,r){return E(this,t,e,!1,r)},n.prototype.fill=function(t,e,r){if(t||(t=0),e||(e=0),r||(r=this.length),q(r>=e,"end < start"),r!==e&&0!==this.length){q(e>=0&&e<this.length,"start out of bounds"),q(r>=0&&r<=this.length,"end out of bounds");var n;if("number"==typeof t)for(n=e;r>n;n++)this[n]=t;else{var i=I(t.toString()),o=i.length;for(n=e;r>n;n++)this[n]=i[n%o]}return this}},n.prototype.inspect=function(){for(var t=[],e=this.length,n=0;e>n;n++)if(t[n]=O(this[n]),n===r.INSPECT_MAX_BYTES){t[n+1]="...";break}return"<Buffer "+t.join(" ")+">"},n.prototype.toArrayBuffer=function(){if("undefined"!=typeof Uint8Array){if(n._useTypedArrays)return new n(this).buffer;for(var t=new Uint8Array(this.length),e=0,r=t.length;r>e;e+=1)t[e]=this[e];return t.buffer}throw new Error("Buffer.toArrayBuffer not supported in this browser")};var G=n.prototype;n._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=G.get,t.set=G.set,t.write=G.write,t.toString=G.toString,t.toLocaleString=G.toString,t.toJSON=G.toJSON,t.equals=G.equals,t.compare=G.compare,t.copy=G.copy,t.slice=G.slice,t.readUInt8=G.readUInt8,t.readUInt16LE=G.readUInt16LE,t.readUInt16BE=G.readUInt16BE,t.readUInt32LE=G.readUInt32LE,t.readUInt32BE=G.readUInt32BE,t.readInt8=G.readInt8,t.readInt16LE=G.readInt16LE,t.readInt16BE=G.readInt16BE,t.readInt32LE=G.readInt32LE,t.readInt32BE=G.readInt32BE,t.readFloatLE=G.readFloatLE,t.readFloatBE=G.readFloatBE,t.readDoubleLE=G.readDoubleLE,t.readDoubleBE=G.readDoubleBE,t.writeUInt8=G.writeUInt8,t.writeUInt16LE=G.writeUInt16LE,t.writeUInt16BE=G.writeUInt16BE,t.writeUInt32LE=G.writeUInt32LE,t.writeUInt32BE=G.writeUInt32BE,t.writeInt8=G.writeInt8,t.writeInt16LE=G.writeInt16LE,t.writeInt16BE=G.writeInt16BE,t.writeInt32LE=G.writeInt32LE,t.writeInt32BE=G.writeInt32BE,t.writeFloatLE=G.writeFloatLE,t.writeFloatBE=G.writeFloatBE,t.writeDoubleLE=G.writeDoubleLE,t.writeDoubleBE=G.writeDoubleBE,t.fill=G.fill,t.inspect=G.inspect,t.toArrayBuffer=G.toArrayBuffer,t}},{"base64-js":6,ieee754:7}],6:[function(t,e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";!function(){"use strict";function t(t){var e=t.charCodeAt(0);return e===s?62:e===a?63:u>e?-1:u+10>e?e-u+26+26:f+26>e?e-f:c+26>e?e-c+26:void 0}function n(e){function r(t){c[h++]=t}var n,i,s,a,u,c;if(e.length%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var f=e.length;u="="===e.charAt(f-2)?2:"="===e.charAt(f-1)?1:0,c=new o(3*e.length/4-u),s=u>0?e.length-4:e.length;var h=0;for(n=0,i=0;s>n;n+=4,i+=3)a=t(e.charAt(n))<<18|t(e.charAt(n+1))<<12|t(e.charAt(n+2))<<6|t(e.charAt(n+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===u?(a=t(e.charAt(n))<<2|t(e.charAt(n+1))>>4,r(255&a)):1===u&&(a=t(e.charAt(n))<<10|t(e.charAt(n+1))<<4|t(e.charAt(n+2))>>2,r(a>>8&255),r(255&a)),c}function i(t){function e(t){return r.charAt(t)}function n(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}var i,o,s,a=t.length%3,u="";for(i=0,s=t.length-a;s>i;i+=3)o=(t[i]<<16)+(t[i+1]<<8)+t[i+2],u+=n(o);switch(a){case 1:o=t[t.length-1],u+=e(o>>2),u+=e(o<<4&63),u+="==";break;case 2:o=(t[t.length-2]<<8)+t[t.length-1],u+=e(o>>10),u+=e(o>>4&63),u+=e(o<<2&63),u+="="}return u}var o="undefined"!=typeof Uint8Array?Uint8Array:Array,s=("0".charCodeAt(0),"+".charCodeAt(0)),a="/".charCodeAt(0),u="0".charCodeAt(0),c="a".charCodeAt(0),f="A".charCodeAt(0);e.exports.toByteArray=n,e.exports.fromByteArray=i}()},{}],7:[function(t,e,r){r.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,f=-7,h=r?i-1:0,l=r?-1:1,p=t[e+h];for(h+=l,o=p&(1<<-f)-1,p>>=-f,f+=a;f>0;o=256*o+t[e+h],h+=l,f-=8);for(s=o&(1<<-f)-1,o>>=-f,f+=n;f>0;s=256*s+t[e+h],h+=l,f-=8);if(0===o)o=1-c;else{if(o===u)return s?0/0:1/0*(p?-1:1);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},r.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,f=(1<<c)-1,h=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,g=0>e||0===e&&0>1/e?1:0;for(e=Math.abs(e),isNaN(e)||1/0===e?(a=isNaN(e)?1:0,s=f):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+h>=1?l/u:l*Math.pow(2,1-h),e*u>=2&&(s++,u/=2),s+h>=f?(a=0,s=f):s+h>=1?(a=(e*u-1)*Math.pow(2,i),s+=h):(a=e*Math.pow(2,h-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*g}},{}],8:[function(t,e){function r(t,e){if(t.length%s!==0){var r=t.length+(s-t.length%s);t=o.concat([t,a],r)}for(var n=[],i=e?t.readInt32BE:t.readInt32LE,u=0;u<t.length;u+=s)n.push(i.call(t,u));return n}function n(t,e,r){for(var n=new o(e),i=r?n.writeInt32BE:n.writeInt32LE,s=0;s<t.length;s++)i.call(n,t[s],4*s,!0);return n}function i(t,e,i,s){o.isBuffer(t)||(t=new o(t));var a=e(r(t,s),t.length*u);return n(a,i,s)}var o=t("buffer").Buffer,s=4,a=new o(s);a.fill(0);var u=8;e.exports={hash:i}},{buffer:5}],9:[function(t,e,r){function n(t,e,r){a.isBuffer(e)||(e=new a(e)),a.isBuffer(r)||(r=new a(r)),e.length>p?e=t(e):e.length<p&&(e=a.concat([e,d],p));for(var n=new a(p),i=new a(p),o=0;p>o;o++)n[o]=54^e[o],i[o]=92^e[o];var s=t(a.concat([n,r]));return t(a.concat([i,s]))}function i(t,e){t=t||"sha1";var r=l[t],i=[],s=0;return r||o("algorithm:",t,"is not yet supported"),{update:function(t){return a.isBuffer(t)||(t=new a(t)),i.push(t),s+=t.length,this},digest:function(t){var o=a.concat(i),s=e?n(r,e,o):r(o);return i=null,t?s.toString(t):s}}}function o(){var t=[].slice.call(arguments).join(" ");throw new Error([t,"we accept pull requests","http://github.com/dominictarr/crypto-browserify"].join("\n"))}function s(t,e){for(var r in t)e(t[r],r)}var a=t("buffer").Buffer,u=t("./sha"),c=t("./sha256"),f=t("./rng"),h=t("./md5"),l={sha1:u,sha256:c,md5:h},p=64,d=new a(p);d.fill(0),r.createHash=function(t){return i(t)},r.createHmac=function(t,e){return i(t,e)},r.randomBytes=function(t,e){if(!e||!e.call)return new a(f(t));try{e.call(this,void 0,new a(f(t)))}catch(r){e(r)}},s(["createCredentials","createCipher","createCipheriv","createDecipher","createDecipheriv","createSign","createVerify","createDiffieHellman","pbkdf2"],function(t){r[t]=function(){o("sorry,",t,"is not implemented yet")}})},{"./md5":10,"./rng":11,"./sha":12,"./sha256":13,buffer:5}],10:[function(t,e){function r(t,e){t[e>>5]|=128<<e%32,t[(e+64>>>9<<4)+14]=e;for(var r=1732584193,n=-271733879,c=-1732584194,f=271733878,h=0;h<t.length;h+=16){var l=r,p=n,d=c,g=f;r=i(r,n,c,f,t[h+0],7,-680876936),f=i(f,r,n,c,t[h+1],12,-389564586),c=i(c,f,r,n,t[h+2],17,606105819),n=i(n,c,f,r,t[h+3],22,-1044525330),r=i(r,n,c,f,t[h+4],7,-176418897),f=i(f,r,n,c,t[h+5],12,1200080426),c=i(c,f,r,n,t[h+6],17,-1473231341),n=i(n,c,f,r,t[h+7],22,-45705983),r=i(r,n,c,f,t[h+8],7,1770035416),f=i(f,r,n,c,t[h+9],12,-1958414417),c=i(c,f,r,n,t[h+10],17,-42063),n=i(n,c,f,r,t[h+11],22,-1990404162),r=i(r,n,c,f,t[h+12],7,1804603682),f=i(f,r,n,c,t[h+13],12,-40341101),c=i(c,f,r,n,t[h+14],17,-1502002290),n=i(n,c,f,r,t[h+15],22,1236535329),r=o(r,n,c,f,t[h+1],5,-165796510),f=o(f,r,n,c,t[h+6],9,-1069501632),c=o(c,f,r,n,t[h+11],14,643717713),n=o(n,c,f,r,t[h+0],20,-373897302),r=o(r,n,c,f,t[h+5],5,-701558691),f=o(f,r,n,c,t[h+10],9,38016083),c=o(c,f,r,n,t[h+15],14,-660478335),n=o(n,c,f,r,t[h+4],20,-405537848),r=o(r,n,c,f,t[h+9],5,568446438),f=o(f,r,n,c,t[h+14],9,-1019803690),c=o(c,f,r,n,t[h+3],14,-187363961),n=o(n,c,f,r,t[h+8],20,1163531501),r=o(r,n,c,f,t[h+13],5,-1444681467),f=o(f,r,n,c,t[h+2],9,-51403784),c=o(c,f,r,n,t[h+7],14,1735328473),n=o(n,c,f,r,t[h+12],20,-1926607734),r=s(r,n,c,f,t[h+5],4,-378558),f=s(f,r,n,c,t[h+8],11,-2022574463),c=s(c,f,r,n,t[h+11],16,1839030562),n=s(n,c,f,r,t[h+14],23,-35309556),r=s(r,n,c,f,t[h+1],4,-1530992060),f=s(f,r,n,c,t[h+4],11,1272893353),c=s(c,f,r,n,t[h+7],16,-155497632),n=s(n,c,f,r,t[h+10],23,-1094730640),r=s(r,n,c,f,t[h+13],4,681279174),f=s(f,r,n,c,t[h+0],11,-358537222),c=s(c,f,r,n,t[h+3],16,-722521979),n=s(n,c,f,r,t[h+6],23,76029189),r=s(r,n,c,f,t[h+9],4,-640364487),f=s(f,r,n,c,t[h+12],11,-421815835),c=s(c,f,r,n,t[h+15],16,530742520),n=s(n,c,f,r,t[h+2],23,-995338651),r=a(r,n,c,f,t[h+0],6,-198630844),f=a(f,r,n,c,t[h+7],10,1126891415),c=a(c,f,r,n,t[h+14],15,-1416354905),n=a(n,c,f,r,t[h+5],21,-57434055),r=a(r,n,c,f,t[h+12],6,1700485571),f=a(f,r,n,c,t[h+3],10,-1894986606),c=a(c,f,r,n,t[h+10],15,-1051523),n=a(n,c,f,r,t[h+1],21,-2054922799),r=a(r,n,c,f,t[h+8],6,1873313359),f=a(f,r,n,c,t[h+15],10,-30611744),c=a(c,f,r,n,t[h+6],15,-1560198380),n=a(n,c,f,r,t[h+13],21,1309151649),r=a(r,n,c,f,t[h+4],6,-145523070),f=a(f,r,n,c,t[h+11],10,-1120210379),c=a(c,f,r,n,t[h+2],15,718787259),n=a(n,c,f,r,t[h+9],21,-343485551),r=u(r,l),n=u(n,p),c=u(c,d),f=u(f,g)}return Array(r,n,c,f)}function n(t,e,r,n,i,o){return u(c(u(u(e,t),u(n,o)),i),r)}function i(t,e,r,i,o,s,a){return n(e&r|~e&i,t,e,o,s,a)}function o(t,e,r,i,o,s,a){return n(e&i|r&~i,t,e,o,s,a)
}function s(t,e,r,i,o,s,a){return n(e^r^i,t,e,o,s,a)}function a(t,e,r,i,o,s,a){return n(r^(e|~i),t,e,o,s,a)}function u(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function c(t,e){return t<<e|t>>>32-e}var f=t("./helpers");e.exports=function(t){return f.hash(t,r,16)}},{"./helpers":8}],11:[function(t,e){!function(){var t,r,n=this;t=function(t){for(var e,e,r=new Array(t),n=0;t>n;n++)0==(3&n)&&(e=4294967296*Math.random()),r[n]=e>>>((3&n)<<3)&255;return r},n.crypto&&crypto.getRandomValues&&(r=function(t){var e=new Uint8Array(t);return crypto.getRandomValues(e),e}),e.exports=r||t}()},{}],12:[function(t,e){function r(t,e){t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var r=Array(80),a=1732584193,u=-271733879,c=-1732584194,f=271733878,h=-1009589776,l=0;l<t.length;l+=16){for(var p=a,d=u,g=c,y=f,v=h,B=0;80>B;B++){r[B]=16>B?t[l+B]:s(r[B-3]^r[B-8]^r[B-14]^r[B-16],1);var m=o(o(s(a,5),n(B,u,c,f)),o(o(h,r[B]),i(B)));h=f,f=c,c=s(u,30),u=a,a=m}a=o(a,p),u=o(u,d),c=o(c,g),f=o(f,y),h=o(h,v)}return Array(a,u,c,f,h)}function n(t,e,r,n){return 20>t?e&r|~e&n:40>t?e^r^n:60>t?e&r|e&n|r&n:e^r^n}function i(t){return 20>t?1518500249:40>t?1859775393:60>t?-1894007588:-899497514}function o(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r}function s(t,e){return t<<e|t>>>32-e}var a=t("./helpers");e.exports=function(t){return a.hash(t,r,20,!0)}},{"./helpers":8}],13:[function(t,e){var r=t("./helpers"),n=function(t,e){var r=(65535&t)+(65535&e),n=(t>>16)+(e>>16)+(r>>16);return n<<16|65535&r},i=function(t,e){return t>>>e|t<<32-e},o=function(t,e){return t>>>e},s=function(t,e,r){return t&e^~t&r},a=function(t,e,r){return t&e^t&r^e&r},u=function(t){return i(t,2)^i(t,13)^i(t,22)},c=function(t){return i(t,6)^i(t,11)^i(t,25)},f=function(t){return i(t,7)^i(t,18)^o(t,3)},h=function(t){return i(t,17)^i(t,19)^o(t,10)},l=function(t,e){var r,i,o,l,p,d,g,y,v,B,m,P,b=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),F=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),w=new Array(64);t[e>>5]|=128<<24-e%32,t[(e+64>>9<<4)+15]=e;for(var v=0;v<t.length;v+=16){r=F[0],i=F[1],o=F[2],l=F[3],p=F[4],d=F[5],g=F[6],y=F[7];for(var B=0;64>B;B++)w[B]=16>B?t[B+v]:n(n(n(h(w[B-2]),w[B-7]),f(w[B-15])),w[B-16]),m=n(n(n(n(y,c(p)),s(p,d,g)),b[B]),w[B]),P=n(u(r),a(r,i,o)),y=g,g=d,d=p,p=n(l,m),l=o,o=i,i=r,r=n(m,P);F[0]=n(r,F[0]),F[1]=n(i,F[1]),F[2]=n(o,F[2]),F[3]=n(l,F[3]),F[4]=n(p,F[4]),F[5]=n(d,F[5]),F[6]=n(g,F[6]),F[7]=n(y,F[7])}return F};e.exports=function(t){return r.hash(t,l,32,!0)}},{"./helpers":8}],14:[function(t,e){e.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],15:[function(t,e){function r(){}var n=e.exports={};n.nextTick=function(){var t="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var r=[];return window.addEventListener("message",function(t){var e=t.source;if((e===window||null===e)&&"process-tick"===t.data&&(t.stopPropagation(),r.length>0)){var n=r.shift();n()}},!0),function(t){r.push(t),window.postMessage("process-tick","*")}}return function(t){setTimeout(t,0)}}(),n.title="browser",n.browser=!0,n.env={},n.argv=[],n.on=r,n.addListener=r,n.once=r,n.off=r,n.removeListener=r,n.removeAllListeners=r,n.emit=r,n.binding=function(){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(){throw new Error("process.chdir is not supported")}},{}],16:[function(t,e){e.exports=t(2)},{}],17:[function(t,e){e.exports=t(3)},{"./support/isBuffer":16,FWaASH:15,inherits:14}],18:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.lib,n=r.BlockCipher,i=e.algo,o=[],s=[],a=[],u=[],c=[],f=[],h=[],l=[],p=[],d=[];!function(){for(var t=[],e=0;256>e;e++)t[e]=128>e?e<<1:e<<1^283;for(var r=0,n=0,e=0;256>e;e++){var i=n^n<<1^n<<2^n<<3^n<<4;i=i>>>8^255&i^99,o[r]=i,s[i]=r;var g=t[r],y=t[g],v=t[y],B=257*t[i]^16843008*i;a[r]=B<<24|B>>>8,u[r]=B<<16|B>>>16,c[r]=B<<8|B>>>24,f[r]=B;var B=16843009*v^65537*y^257*g^16843008*r;h[i]=B<<24|B>>>8,l[i]=B<<16|B>>>16,p[i]=B<<8|B>>>24,d[i]=B,r?(r=g^t[t[t[v^g]]],n^=t[t[n]]):r=n=1}}();var g=[0,1,2,4,8,16,32,64,128,27,54],y=i.AES=n.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes/4,n=this._nRounds=r+6,i=4*(n+1),s=this._keySchedule=[],a=0;i>a;a++)if(r>a)s[a]=e[a];else{var u=s[a-1];a%r?r>6&&a%r==4&&(u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u]):(u=u<<8|u>>>24,u=o[u>>>24]<<24|o[u>>>16&255]<<16|o[u>>>8&255]<<8|o[255&u],u^=g[a/r|0]<<24),s[a]=s[a-r]^u}for(var c=this._invKeySchedule=[],f=0;i>f;f++){var a=i-f;if(f%4)var u=s[a];else var u=s[a-4];c[f]=4>f||4>=a?u:h[o[u>>>24]]^l[o[u>>>16&255]]^p[o[u>>>8&255]]^d[o[255&u]]}},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,u,c,f,o)},decryptBlock:function(t,e){var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r,this._doCryptBlock(t,e,this._invKeySchedule,h,l,p,d,s);var r=t[e+1];t[e+1]=t[e+3],t[e+3]=r},_doCryptBlock:function(t,e,r,n,i,o,s,a){for(var u=this._nRounds,c=t[e]^r[0],f=t[e+1]^r[1],h=t[e+2]^r[2],l=t[e+3]^r[3],p=4,d=1;u>d;d++){var g=n[c>>>24]^i[f>>>16&255]^o[h>>>8&255]^s[255&l]^r[p++],y=n[f>>>24]^i[h>>>16&255]^o[l>>>8&255]^s[255&c]^r[p++],v=n[h>>>24]^i[l>>>16&255]^o[c>>>8&255]^s[255&f]^r[p++],B=n[l>>>24]^i[c>>>16&255]^o[f>>>8&255]^s[255&h]^r[p++];c=g,f=y,h=v,l=B}var g=(a[c>>>24]<<24|a[f>>>16&255]<<16|a[h>>>8&255]<<8|a[255&l])^r[p++],y=(a[f>>>24]<<24|a[h>>>16&255]<<16|a[l>>>8&255]<<8|a[255&c])^r[p++],v=(a[h>>>24]<<24|a[l>>>16&255]<<16|a[c>>>8&255]<<8|a[255&f])^r[p++],B=(a[l>>>24]<<24|a[c>>>16&255]<<16|a[f>>>8&255]<<8|a[255&h])^r[p++];t[e]=g,t[e+1]=y,t[e+2]=v,t[e+3]=B},keySize:8});e.AES=n._createHelper(y)}(),t.AES})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],19:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){t.lib.Cipher||function(e){var r=t,n=r.lib,i=n.Base,o=n.WordArray,s=n.BufferedBlockAlgorithm,a=r.enc,u=(a.Utf8,a.Base64),c=r.algo,f=c.EvpKDF,h=n.Cipher=s.extend({cfg:i.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,r){this.cfg=this.cfg.extend(r),this._xformMode=t,this._key=e,this.reset()},reset:function(){s.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(){function t(t){return"string"==typeof t?w:P}return function(e){return{encrypt:function(r,n,i){return t(n).encrypt(e,r,n,i)},decrypt:function(r,n,i){return t(n).decrypt(e,r,n,i)}}}}()}),l=(n.StreamCipher=h.extend({_doFinalize:function(){var t=this._process(!0);return t},blockSize:1}),r.mode={}),p=n.BlockCipherMode=i.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}}),d=l.CBC=function(){function t(t,r,n){var i=this._iv;if(i){var o=i;this._iv=e}else var o=this._prevBlock;for(var s=0;n>s;s++)t[r+s]^=o[s]}var r=p.extend();return r.Encryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize;t.call(this,e,r,i),n.encryptBlock(e,r),this._prevBlock=e.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(e,r){var n=this._cipher,i=n.blockSize,o=e.slice(r,r+i);n.decryptBlock(e,r),t.call(this,e,r,i),this._prevBlock=o}}),r}(),g=r.pad={},y=g.Pkcs7={pad:function(t,e){for(var r=4*e,n=r-t.sigBytes%r,i=n<<24|n<<16|n<<8|n,s=[],a=0;n>a;a+=4)s.push(i);var u=o.create(s,n);t.concat(u)},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},v=(n.BlockCipher=h.extend({cfg:h.cfg.extend({mode:d,padding:y}),reset:function(){h.reset.call(this);var t=this.cfg,e=t.iv,r=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var n=r.createEncryptor;else{var n=r.createDecryptor;this._minBufferSize=1}this._mode=n.call(r,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else{var e=this._process(!0);t.unpad(e)}return e},blockSize:4}),n.CipherParams=i.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}})),B=r.format={},m=B.OpenSSL={stringify:function(t){var e=t.ciphertext,r=t.salt;if(r)var n=o.create([1398893684,1701076831]).concat(r).concat(e);else var n=e;return n.toString(u)},parse:function(t){var e=u.parse(t),r=e.words;if(1398893684==r[0]&&1701076831==r[1]){var n=o.create(r.slice(2,4));r.splice(0,4),e.sigBytes-=16}return v.create({ciphertext:e,salt:n})}},P=n.SerializableCipher=i.extend({cfg:i.extend({format:m}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=t.createEncryptor(r,n),o=i.finalize(e),s=i.cfg;return v.create({ciphertext:o,key:r,iv:s.iv,algorithm:t,mode:s.mode,padding:s.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=t.createDecryptor(r,n).finalize(e.ciphertext);return i},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),b=r.kdf={},F=b.OpenSSL={execute:function(t,e,r,n){n||(n=o.random(8));var i=f.create({keySize:e+r}).compute(t,n),s=o.create(i.words.slice(e),4*r);return i.sigBytes=4*e,v.create({key:i,iv:s,salt:n})}},w=n.PasswordBasedCipher=P.extend({cfg:P.cfg.extend({kdf:F}),encrypt:function(t,e,r,n){n=this.cfg.extend(n);var i=n.kdf.execute(r,t.keySize,t.ivSize);n.iv=i.iv;var o=P.encrypt.call(this,t,e,i.key,n);return o.mixIn(i),o},decrypt:function(t,e,r,n){n=this.cfg.extend(n),e=this._parse(e,n.format);var i=n.kdf.execute(r,t.keySize,t.ivSize,e.salt);n.iv=i.iv;var o=P.decrypt.call(this,t,e,i.key,n);return o}})}()})},{"./core":20}],20:[function(e,r,n){!function(e,i){"object"==typeof n?r.exports=n=i():"function"==typeof t&&t.amd?t([],i):e.CryptoJS=i()}(this,function(){var t=t||function(t,e){var r={},n=r.lib={},i=n.Base=function(){function t(){}return{extend:function(e){t.prototype=this;var r=new t;return e&&r.mixIn(e),r.hasOwnProperty("init")||(r.init=function(){r.$super.init.apply(this,arguments)}),r.init.prototype=r,r.$super=this,r},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),o=n.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:4*t.length},toString:function(t){return(t||a).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;i>o;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else if(r.length>256)for(var o=0;i>o;o+=4)e[n+o>>>2]=r[o>>>2];else e.push.apply(e,r);return this.sigBytes+=i,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=i.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r=[],n=0;e>n;n+=4)r.push(4294967296*t.random()|0);return new o.init(r,e)}}),s=r.enc={},a=s.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;r>i;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new o.init(r,e/2)}},u=s.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;r>i;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new o.init(r,e)}},c=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(u.stringify(t)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:function(t){return u.parse(unescape(encodeURIComponent(t)))}},f=n.BufferedBlockAlgorithm=i.extend({reset:function(){this._data=new o.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=c.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,s=this.blockSize,a=4*s,u=i/a;u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);var c=u*s,f=t.min(4*c,i);if(c){for(var h=0;c>h;h+=s)this._doProcessBlock(n,h);var l=n.splice(0,c);r.sigBytes-=f}return new o.init(l,f)},clone:function(){var t=i.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(n.Hasher=f.extend({cfg:i.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new h.HMAC.init(t,r).finalize(e)}}}),r.algo={});return r}(Math);return t})},{}],21:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(){{var e=t,r=e.lib,n=r.WordArray,i=e.enc;i.Base64={stringify:function(t){var e=t.words,r=t.sigBytes,n=this._map;t.clamp();for(var i=[],o=0;r>o;o+=3)for(var s=e[o>>>2]>>>24-o%4*8&255,a=e[o+1>>>2]>>>24-(o+1)%4*8&255,u=e[o+2>>>2]>>>24-(o+2)%4*8&255,c=s<<16|a<<8|u,f=0;4>f&&r>o+.75*f;f++)i.push(n.charAt(c>>>6*(3-f)&63));var h=n.charAt(64);if(h)for(;i.length%4;)i.push(h);return i.join("")},parse:function(t){var e=t.length,r=this._map,i=r.charAt(64);if(i){var o=t.indexOf(i);-1!=o&&(e=o)}for(var s=[],a=0,u=0;e>u;u++)if(u%4){var c=r.indexOf(t.charAt(u-1))<<u%4*2,f=r.indexOf(t.charAt(u))>>>6-u%4*2;s[a>>>2]|=(c|f)<<24-a%4*8,a++}return n.create(s,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}}(),t.enc.Base64})},{"./core":20}],22:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(t){return t<<8&4278255360|t>>>8&16711935}{var r=t,n=r.lib,i=n.WordArray,o=r.enc;o.Utf16=o.Utf16BE={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;r>i;i+=2){var o=e[i>>>2]>>>16-i%4*8&65535;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;e>n;n++)r[n>>>1]|=t.charCodeAt(n)<<16-n%2*16;return i.create(r,2*e)}}}o.Utf16LE={stringify:function(t){for(var r=t.words,n=t.sigBytes,i=[],o=0;n>o;o+=2){var s=e(r[o>>>2]>>>16-o%4*8&65535);i.push(String.fromCharCode(s))}return i.join("")},parse:function(t){for(var r=t.length,n=[],o=0;r>o;o++)n[o>>>1]|=e(t.charCodeAt(o)<<16-o%2*16);return i.create(n,2*r)}}}(),t.enc.Utf16})},{"./core":20}],23:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof t&&t.amd?t(["./core","./sha1","./hmac"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,s=o.MD5,a=o.EvpKDF=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=r.hasher.create(),o=i.create(),s=o.words,a=r.keySize,u=r.iterations;s.length<a;){c&&n.update(c);var c=n.update(t).finalize(e);n.reset();for(var f=1;u>f;f++)c=n.finalize(c),n.reset();o.concat(c)}return o.sigBytes=4*a,o}});e.EvpKDF=function(t,e,r){return a.create(r).compute(t,e)}}(),t.EvpKDF})},{"./core":20,"./hmac":26,"./sha1":45}],24:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return function(){{var e=t,r=e.lib,n=r.CipherParams,i=e.enc,o=i.Hex,s=e.format;s.Hex={stringify:function(t){return t.ciphertext.toString(o)},parse:function(t){var e=o.parse(t);return n.create({ciphertext:e})}}}}(),t.format.Hex})},{"./cipher-core":19,"./core":20}],25:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./sha256"),e("./hmac")):"function"==typeof t&&t.amd?t(["./core","./sha256","./hmac"],o):o(i.CryptoJS)}(this,function(t){return t.HmacSHA256})},{"./core":20,"./hmac":26,"./sha256":47}],26:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){!function(){{var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,s=e.algo;s.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),s=this._iKey=e.clone(),a=i.words,u=s.words,c=0;r>c;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);e.reset();var n=e.finalize(this._oKey.clone().concat(r));return n}})}}()})},{"./core":20}],27:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./x64-core"),e("./lib-typedarrays"),e("./enc-utf16"),e("./enc-base64"),e("./md5"),e("./sha1"),e("./sha256"),e("./sha224"),e("./sha512"),e("./sha384"),e("./sha3"),e("./ripemd160"),e("./hmac"),e("./pbkdf2"),e("./evpkdf"),e("./cipher-core"),e("./mode-cfb"),e("./mode-ctr"),e("./mode-ctr-gladman"),e("./mode-ofb"),e("./mode-ecb"),e("./pad-ansix923"),e("./pad-iso10126"),e("./pad-iso97971"),e("./pad-zeropadding"),e("./pad-nopadding"),e("./format-hex"),e("./aes"),e("./tripledes"),e("./rc4"),e("./rabbit"),e("./rabbit-legacy")):"function"==typeof t&&t.amd?t(["./core","./x64-core","./lib-typedarrays","./enc-utf16","./enc-base64","./md5","./sha1","./sha256","./sha224","./sha512","./sha384","./sha3","./ripemd160","./hmac","./pbkdf2","./evpkdf","./cipher-core","./mode-cfb","./mode-ctr","./mode-ctr-gladman","./mode-ofb","./mode-ecb","./pad-ansix923","./pad-iso10126","./pad-iso97971","./pad-zeropadding","./pad-nopadding","./format-hex","./aes","./tripledes","./rc4","./rabbit","./rabbit-legacy"],o):o(i.CryptoJS)}(this,function(t){return t})},{"./aes":18,"./cipher-core":19,"./core":20,"./enc-base64":21,"./enc-utf16":22,"./evpkdf":23,"./format-hex":24,"./hmac":26,"./lib-typedarrays":28,"./md5":29,"./mode-cfb":30,"./mode-ctr":32,"./mode-ctr-gladman":31,"./mode-ecb":33,"./mode-ofb":34,"./pad-ansix923":35,"./pad-iso10126":36,"./pad-iso97971":37,"./pad-nopadding":38,"./pad-zeropadding":39,"./pbkdf2":40,"./rabbit":42,"./rabbit-legacy":41,"./rc4":43,"./ripemd160":44,"./sha1":45,"./sha224":46,"./sha256":47,"./sha3":48,"./sha384":49,"./sha512":50,"./tripledes":51,"./x64-core":52}],28:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(){if("function"==typeof ArrayBuffer){var e=t,r=e.lib,n=r.WordArray,i=n.init,o=n.init=function(t){if(t instanceof ArrayBuffer&&(t=new Uint8Array(t)),(t instanceof Int8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),t instanceof Uint8Array){for(var e=t.byteLength,r=[],n=0;e>n;n++)r[n>>>2]|=t[n]<<24-n%4*8;i.call(this,r,e)}else i.apply(this,arguments)};o.prototype=n}}(),t.lib.WordArray})},{"./core":20}],29:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(e){function r(t,e,r,n,i,o,s){var a=t+(e&r|~e&n)+i+s;return(a<<o|a>>>32-o)+e}function n(t,e,r,n,i,o,s){var a=t+(e&n|r&~n)+i+s;return(a<<o|a>>>32-o)+e}function i(t,e,r,n,i,o,s){var a=t+(e^r^n)+i+s;return(a<<o|a>>>32-o)+e}function o(t,e,r,n,i,o,s){var a=t+(r^(e|~n))+i+s;return(a<<o|a>>>32-o)+e}var s=t,a=s.lib,u=a.WordArray,c=a.Hasher,f=s.algo,h=[];!function(){for(var t=0;64>t;t++)h[t]=4294967296*e.abs(e.sin(t+1))|0}();var l=f.MD5=c.extend({_doReset:function(){this._hash=new u.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,e){for(var s=0;16>s;s++){var a=e+s,u=t[a];t[a]=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8)}var c=this._hash.words,f=t[e+0],l=t[e+1],p=t[e+2],d=t[e+3],g=t[e+4],y=t[e+5],v=t[e+6],B=t[e+7],m=t[e+8],P=t[e+9],b=t[e+10],F=t[e+11],w=t[e+12],_=t[e+13],S=t[e+14],k=t[e+15],E=c[0],D=c[1],A=c[2],T=c[3];E=r(E,D,A,T,f,7,h[0]),T=r(T,E,D,A,l,12,h[1]),A=r(A,T,E,D,p,17,h[2]),D=r(D,A,T,E,d,22,h[3]),E=r(E,D,A,T,g,7,h[4]),T=r(T,E,D,A,y,12,h[5]),A=r(A,T,E,D,v,17,h[6]),D=r(D,A,T,E,B,22,h[7]),E=r(E,D,A,T,m,7,h[8]),T=r(T,E,D,A,P,12,h[9]),A=r(A,T,E,D,b,17,h[10]),D=r(D,A,T,E,F,22,h[11]),E=r(E,D,A,T,w,7,h[12]),T=r(T,E,D,A,_,12,h[13]),A=r(A,T,E,D,S,17,h[14]),D=r(D,A,T,E,k,22,h[15]),E=n(E,D,A,T,l,5,h[16]),T=n(T,E,D,A,v,9,h[17]),A=n(A,T,E,D,F,14,h[18]),D=n(D,A,T,E,f,20,h[19]),E=n(E,D,A,T,y,5,h[20]),T=n(T,E,D,A,b,9,h[21]),A=n(A,T,E,D,k,14,h[22]),D=n(D,A,T,E,g,20,h[23]),E=n(E,D,A,T,P,5,h[24]),T=n(T,E,D,A,S,9,h[25]),A=n(A,T,E,D,d,14,h[26]),D=n(D,A,T,E,m,20,h[27]),E=n(E,D,A,T,_,5,h[28]),T=n(T,E,D,A,p,9,h[29]),A=n(A,T,E,D,B,14,h[30]),D=n(D,A,T,E,w,20,h[31]),E=i(E,D,A,T,y,4,h[32]),T=i(T,E,D,A,m,11,h[33]),A=i(A,T,E,D,F,16,h[34]),D=i(D,A,T,E,S,23,h[35]),E=i(E,D,A,T,l,4,h[36]),T=i(T,E,D,A,g,11,h[37]),A=i(A,T,E,D,B,16,h[38]),D=i(D,A,T,E,b,23,h[39]),E=i(E,D,A,T,_,4,h[40]),T=i(T,E,D,A,f,11,h[41]),A=i(A,T,E,D,d,16,h[42]),D=i(D,A,T,E,v,23,h[43]),E=i(E,D,A,T,P,4,h[44]),T=i(T,E,D,A,w,11,h[45]),A=i(A,T,E,D,k,16,h[46]),D=i(D,A,T,E,p,23,h[47]),E=o(E,D,A,T,f,6,h[48]),T=o(T,E,D,A,B,10,h[49]),A=o(A,T,E,D,S,15,h[50]),D=o(D,A,T,E,y,21,h[51]),E=o(E,D,A,T,w,6,h[52]),T=o(T,E,D,A,d,10,h[53]),A=o(A,T,E,D,b,15,h[54]),D=o(D,A,T,E,l,21,h[55]),E=o(E,D,A,T,m,6,h[56]),T=o(T,E,D,A,k,10,h[57]),A=o(A,T,E,D,v,15,h[58]),D=o(D,A,T,E,_,21,h[59]),E=o(E,D,A,T,g,6,h[60]),T=o(T,E,D,A,F,10,h[61]),A=o(A,T,E,D,p,15,h[62]),D=o(D,A,T,E,P,21,h[63]),c[0]=c[0]+E|0,c[1]=c[1]+D|0,c[2]=c[2]+A|0,c[3]=c[3]+T|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;r[i>>>5]|=128<<24-i%32;var o=e.floor(n/4294967296),s=n;r[(i+64>>>9<<4)+15]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),r[(i+64>>>9<<4)+14]=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8),t.sigBytes=4*(r.length+1),this._process();for(var a=this._hash,u=a.words,c=0;4>c;c++){var f=u[c];u[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}return a},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}});s.MD5=c._createHelper(l),s.HmacMD5=c._createHmacHelper(l)}(Math),t.MD5})},{"./core":20}],30:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.mode.CFB=function(){function e(t,e,r,n){var i=this._iv;if(i){var o=i.slice(0);this._iv=void 0}else var o=this._prevBlock;n.encryptBlock(o,0);for(var s=0;r>s;s++)t[e+s]^=o[s]}var r=t.lib.BlockCipherMode.extend();return r.Encryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize;e.call(this,t,r,i,n),this._prevBlock=t.slice(r,r+i)}}),r.Decryptor=r.extend({processBlock:function(t,r){var n=this._cipher,i=n.blockSize,o=t.slice(r,r+i);e.call(this,t,r,i,n),this._prevBlock=o}}),r}(),t.mode.CFB})},{"./cipher-core":19,"./core":20}],31:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.mode.CTRGladman=function(){function e(t){if(255===(t>>24&255)){var e=t>>16&255,r=t>>8&255,n=255&t;255===e?(e=0,255===r?(r=0,255===n?n=0:++n):++r):++e,t=0,t+=e<<16,t+=r<<8,t+=n}else t+=1<<24;return t}function r(t){return 0===(t[0]=e(t[0]))&&(t[1]=e(t[1])),t}var n=t.lib.BlockCipherMode.extend(),i=n.Encryptor=n.extend({processBlock:function(t,e){var n=this._cipher,i=n.blockSize,o=this._iv,s=this._counter;o&&(s=this._counter=o.slice(0),this._iv=void 0),r(s);var a=s.slice(0);n.encryptBlock(a,0);for(var u=0;i>u;u++)t[e+u]^=a[u]}});return n.Decryptor=i,n}(),t.mode.CTRGladman})},{"./cipher-core":19,"./core":20}],32:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.mode.CTR=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._counter;i&&(o=this._counter=i.slice(0),this._iv=void 0);var s=o.slice(0);r.encryptBlock(s,0),o[n-1]=o[n-1]+1|0;for(var a=0;n>a;a++)t[e+a]^=s[a]}});return e.Decryptor=r,e}(),t.mode.CTR})},{"./cipher-core":19,"./core":20}],33:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.mode.ECB=function(){var e=t.lib.BlockCipherMode.extend();return e.Encryptor=e.extend({processBlock:function(t,e){this._cipher.encryptBlock(t,e)}}),e.Decryptor=e.extend({processBlock:function(t,e){this._cipher.decryptBlock(t,e)}}),e}(),t.mode.ECB})},{"./cipher-core":19,"./core":20}],34:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.mode.OFB=function(){var e=t.lib.BlockCipherMode.extend(),r=e.Encryptor=e.extend({processBlock:function(t,e){var r=this._cipher,n=r.blockSize,i=this._iv,o=this._keystream;i&&(o=this._keystream=i.slice(0),this._iv=void 0),r.encryptBlock(o,0);for(var s=0;n>s;s++)t[e+s]^=o[s]}});return e.Decryptor=r,e}(),t.mode.OFB})},{"./cipher-core":19,"./core":20}],35:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.pad.AnsiX923={pad:function(t,e){var r=t.sigBytes,n=4*e,i=n-r%n,o=r+i-1;t.clamp(),t.words[o>>>2]|=i<<24-o%4*8,t.sigBytes+=i},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Ansix923})},{"./cipher-core":19,"./core":20}],36:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.pad.Iso10126={pad:function(e,r){var n=4*r,i=n-e.sigBytes%n;e.concat(t.lib.WordArray.random(i-1)).concat(t.lib.WordArray.create([i<<24],1))},unpad:function(t){var e=255&t.words[t.sigBytes-1>>>2];t.sigBytes-=e}},t.pad.Iso10126})},{"./cipher-core":19,"./core":20}],37:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.pad.Iso97971={pad:function(e,r){e.concat(t.lib.WordArray.create([2147483648],1)),t.pad.ZeroPadding.pad(e,r)},unpad:function(e){t.pad.ZeroPadding.unpad(e),e.sigBytes--}},t.pad.Iso97971})},{"./cipher-core":19,"./core":20}],38:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.pad.NoPadding={pad:function(){},unpad:function(){}},t.pad.NoPadding})},{"./cipher-core":19,"./core":20}],39:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return t.pad.ZeroPadding={pad:function(t,e){var r=4*e;t.clamp(),t.sigBytes+=r-(t.sigBytes%r||r)},unpad:function(t){for(var e=t.words,r=t.sigBytes-1;!(e[r>>>2]>>>24-r%4*8&255);)r--;t.sigBytes=r+1}},t.pad.ZeroPadding})},{"./cipher-core":19,"./core":20}],40:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./sha1"),e("./hmac")):"function"==typeof t&&t.amd?t(["./core","./sha1","./hmac"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.lib,n=r.Base,i=r.WordArray,o=e.algo,s=o.SHA1,a=o.HMAC,u=o.PBKDF2=n.extend({cfg:n.extend({keySize:4,hasher:s,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var r=this.cfg,n=a.create(r.hasher,t),o=i.create(),s=i.create([1]),u=o.words,c=s.words,f=r.keySize,h=r.iterations;u.length<f;){var l=n.update(e).finalize(s);n.reset();for(var p=l.words,d=p.length,g=l,y=1;h>y;y++){g=n.finalize(g),n.reset();for(var v=g.words,B=0;d>B;B++)p[B]^=v[B]}o.concat(l),c[0]++}return o.sigBytes=4*f,o}});e.PBKDF2=function(t,e,r){return u.create(r).compute(t,e)}}(),t.PBKDF2})},{"./core":20,"./hmac":26,"./sha1":45}],41:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(){for(var t=this._X,e=this._C,r=0;8>r;r++)a[r]=e[r];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0;for(var r=0;8>r;r++){var n=t[r]+e[r],i=65535&n,o=n>>>16,s=((i*i>>>17)+i*o>>>15)+o*o,c=((4294901760&n)*n|0)+((65535&n)*n|0);u[r]=s^c}t[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,t[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,t[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,t[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,t[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,t[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,t[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,t[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var r=t,n=r.lib,i=n.StreamCipher,o=r.algo,s=[],a=[],u=[],c=o.RabbitLegacy=i.extend({_doReset:function(){var t=this._key.words,r=this.cfg.iv,n=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],i=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];
this._b=0;for(var o=0;4>o;o++)e.call(this);for(var o=0;8>o;o++)i[o]^=n[o+4&7];if(r){var s=r.words,a=s[0],u=s[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),f=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&f,l=f<<16|65535&c;i[0]^=c,i[1]^=h,i[2]^=f,i[3]^=l,i[4]^=c,i[5]^=h,i[6]^=f,i[7]^=l;for(var o=0;4>o;o++)e.call(this)}},_doProcessBlock:function(t,r){var n=this._X;e.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;4>i;i++)s[i]=16711935&(s[i]<<8|s[i]>>>24)|4278255360&(s[i]<<24|s[i]>>>8),t[r+i]^=s[i]},blockSize:4,ivSize:2});r.RabbitLegacy=i._createHelper(c)}(),t.RabbitLegacy})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],42:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(){for(var t=this._X,e=this._C,r=0;8>r;r++)a[r]=e[r];e[0]=e[0]+1295307597+this._b|0,e[1]=e[1]+3545052371+(e[0]>>>0<a[0]>>>0?1:0)|0,e[2]=e[2]+886263092+(e[1]>>>0<a[1]>>>0?1:0)|0,e[3]=e[3]+1295307597+(e[2]>>>0<a[2]>>>0?1:0)|0,e[4]=e[4]+3545052371+(e[3]>>>0<a[3]>>>0?1:0)|0,e[5]=e[5]+886263092+(e[4]>>>0<a[4]>>>0?1:0)|0,e[6]=e[6]+1295307597+(e[5]>>>0<a[5]>>>0?1:0)|0,e[7]=e[7]+3545052371+(e[6]>>>0<a[6]>>>0?1:0)|0,this._b=e[7]>>>0<a[7]>>>0?1:0;for(var r=0;8>r;r++){var n=t[r]+e[r],i=65535&n,o=n>>>16,s=((i*i>>>17)+i*o>>>15)+o*o,c=((4294901760&n)*n|0)+((65535&n)*n|0);u[r]=s^c}t[0]=u[0]+(u[7]<<16|u[7]>>>16)+(u[6]<<16|u[6]>>>16)|0,t[1]=u[1]+(u[0]<<8|u[0]>>>24)+u[7]|0,t[2]=u[2]+(u[1]<<16|u[1]>>>16)+(u[0]<<16|u[0]>>>16)|0,t[3]=u[3]+(u[2]<<8|u[2]>>>24)+u[1]|0,t[4]=u[4]+(u[3]<<16|u[3]>>>16)+(u[2]<<16|u[2]>>>16)|0,t[5]=u[5]+(u[4]<<8|u[4]>>>24)+u[3]|0,t[6]=u[6]+(u[5]<<16|u[5]>>>16)+(u[4]<<16|u[4]>>>16)|0,t[7]=u[7]+(u[6]<<8|u[6]>>>24)+u[5]|0}var r=t,n=r.lib,i=n.StreamCipher,o=r.algo,s=[],a=[],u=[],c=o.Rabbit=i.extend({_doReset:function(){for(var t=this._key.words,r=this.cfg.iv,n=0;4>n;n++)t[n]=16711935&(t[n]<<8|t[n]>>>24)|4278255360&(t[n]<<24|t[n]>>>8);var i=this._X=[t[0],t[3]<<16|t[2]>>>16,t[1],t[0]<<16|t[3]>>>16,t[2],t[1]<<16|t[0]>>>16,t[3],t[2]<<16|t[1]>>>16],o=this._C=[t[2]<<16|t[2]>>>16,4294901760&t[0]|65535&t[1],t[3]<<16|t[3]>>>16,4294901760&t[1]|65535&t[2],t[0]<<16|t[0]>>>16,4294901760&t[2]|65535&t[3],t[1]<<16|t[1]>>>16,4294901760&t[3]|65535&t[0]];this._b=0;for(var n=0;4>n;n++)e.call(this);for(var n=0;8>n;n++)o[n]^=i[n+4&7];if(r){var s=r.words,a=s[0],u=s[1],c=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8),f=16711935&(u<<8|u>>>24)|4278255360&(u<<24|u>>>8),h=c>>>16|4294901760&f,l=f<<16|65535&c;o[0]^=c,o[1]^=h,o[2]^=f,o[3]^=l,o[4]^=c,o[5]^=h,o[6]^=f,o[7]^=l;for(var n=0;4>n;n++)e.call(this)}},_doProcessBlock:function(t,r){var n=this._X;e.call(this),s[0]=n[0]^n[5]>>>16^n[3]<<16,s[1]=n[2]^n[7]>>>16^n[5]<<16,s[2]=n[4]^n[1]>>>16^n[7]<<16,s[3]=n[6]^n[3]>>>16^n[1]<<16;for(var i=0;4>i;i++)s[i]=16711935&(s[i]<<8|s[i]>>>24)|4278255360&(s[i]<<24|s[i]>>>8),t[r+i]^=s[i]},blockSize:4,ivSize:2});r.Rabbit=i._createHelper(c)}(),t.Rabbit})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],43:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(){for(var t=this._S,e=this._i,r=this._j,n=0,i=0;4>i;i++){e=(e+1)%256,r=(r+t[e])%256;var o=t[e];t[e]=t[r],t[r]=o,n|=t[(t[e]+t[r])%256]<<24-8*i}return this._i=e,this._j=r,n}var r=t,n=r.lib,i=n.StreamCipher,o=r.algo,s=o.RC4=i.extend({_doReset:function(){for(var t=this._key,e=t.words,r=t.sigBytes,n=this._S=[],i=0;256>i;i++)n[i]=i;for(var i=0,o=0;256>i;i++){var s=i%r,a=e[s>>>2]>>>24-s%4*8&255;o=(o+n[i]+a)%256;var u=n[i];n[i]=n[o],n[o]=u}this._i=this._j=0},_doProcessBlock:function(t,r){t[r]^=e.call(this)},keySize:8,ivSize:0});r.RC4=i._createHelper(s);var a=o.RC4Drop=s.extend({cfg:s.cfg.extend({drop:192}),_doReset:function(){s._doReset.call(this);for(var t=this.cfg.drop;t>0;t--)e.call(this)}});r.RC4Drop=i._createHelper(a)}(),t.RC4})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],44:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(t,e,r){return t^e^r}function r(t,e,r){return t&e|~t&r}function n(t,e,r){return(t|~e)^r}function i(t,e,r){return t&r|e&~r}function o(t,e,r){return t^(e|~r)}function s(t,e){return t<<e|t>>>32-e}var a=t,u=a.lib,c=u.WordArray,f=u.Hasher,h=a.algo,l=c.create([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13]),p=c.create([5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11]),d=c.create([11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6]),g=c.create([8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]),y=c.create([0,1518500249,1859775393,2400959708,2840853838]),v=c.create([1352829926,1548603684,1836072691,2053994217,0]),B=h.RIPEMD160=f.extend({_doReset:function(){this._hash=c.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,a){for(var u=0;16>u;u++){var c=a+u,f=t[c];t[c]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8)}var h,B,m,P,b,F,w,_,S,k,E=this._hash.words,D=y.words,A=v.words,T=l.words,C=p.words,x=d.words,O=g.words;F=h=E[0],w=B=E[1],_=m=E[2],S=P=E[3],k=b=E[4];for(var I,u=0;80>u;u+=1)I=h+t[a+T[u]]|0,I+=16>u?e(B,m,P)+D[0]:32>u?r(B,m,P)+D[1]:48>u?n(B,m,P)+D[2]:64>u?i(B,m,P)+D[3]:o(B,m,P)+D[4],I=0|I,I=s(I,x[u]),I=I+b|0,h=b,b=P,P=s(m,10),m=B,B=I,I=F+t[a+C[u]]|0,I+=16>u?o(w,_,S)+A[0]:32>u?i(w,_,S)+A[1]:48>u?n(w,_,S)+A[2]:64>u?r(w,_,S)+A[3]:e(w,_,S)+A[4],I=0|I,I=s(I,O[u]),I=I+k|0,F=k,k=S,S=s(_,10),_=w,w=I;I=E[1]+m+S|0,E[1]=E[2]+P+k|0,E[2]=E[3]+b+F|0,E[3]=E[4]+h+w|0,E[4]=E[0]+B+_|0,E[0]=I},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8),t.sigBytes=4*(e.length+1),this._process();for(var i=this._hash,o=i.words,s=0;5>s;s++){var a=o[s];o[s]=16711935&(a<<8|a>>>24)|4278255360&(a<<24|a>>>8)}return i},clone:function(){var t=f.clone.call(this);return t._hash=this._hash.clone(),t}});a.RIPEMD160=f._createHelper(B),a.HmacRIPEMD160=f._createHmacHelper(B)}(Math),t.RIPEMD160})},{"./core":20}],45:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,s=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],u=r[4],c=0;80>c;c++){if(16>c)s[c]=0|t[e+c];else{var f=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=f<<1|f>>>31}var h=(n<<5|n>>>27)+u+s[c];h+=20>c?(i&o|~i&a)+1518500249:40>c?(i^o^a)+1859775393:60>c?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,u=a,a=o,o=i<<30|i>>>2,i=n,n=h}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(n+64>>>9<<4)+15]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),t.SHA1})},{"./core":20}],46:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./sha256")):"function"==typeof t&&t.amd?t(["./core","./sha256"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=e.algo,o=i.SHA256,s=i.SHA224=o.extend({_doReset:function(){this._hash=new n.init([3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428])},_doFinalize:function(){var t=o._doFinalize.call(this);return t.sigBytes-=4,t}});e.SHA224=o._createHelper(s),e.HmacSHA224=o._createHmacHelper(s)}(),t.SHA224})},{"./core":20,"./sha256":47}],47:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.algo,a=[],u=[];!function(){function t(t){for(var r=e.sqrt(t),n=2;r>=n;n++)if(!(t%n))return!1;return!0}function r(t){return 4294967296*(t-(0|t))|0}for(var n=2,i=0;64>i;)t(n)&&(8>i&&(a[i]=r(e.pow(n,.5))),u[i]=r(e.pow(n,1/3)),i++),n++}();var c=[],f=s.SHA256=o.extend({_doReset:function(){this._hash=new i.init(a.slice(0))},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],f=r[5],h=r[6],l=r[7],p=0;64>p;p++){if(16>p)c[p]=0|t[e+p];else{var d=c[p-15],g=(d<<25|d>>>7)^(d<<14|d>>>18)^d>>>3,y=c[p-2],v=(y<<15|y>>>17)^(y<<13|y>>>19)^y>>>10;c[p]=g+c[p-7]+v+c[p-16]}var B=a&f^~a&h,m=n&i^n&o^i&o,P=(n<<30|n>>>2)^(n<<19|n>>>13)^(n<<10|n>>>22),b=(a<<26|a>>>6)^(a<<21|a>>>11)^(a<<7|a>>>25),F=l+b+B+u[p]+c[p],w=P+m;l=h,h=f,f=a,a=s+F|0,s=o,o=i,i=n,n=F+w|0}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+s|0,r[4]=r[4]+a|0,r[5]=r[5]+f|0,r[6]=r[6]+h|0,r[7]=r[7]+l|0},_doFinalize:function(){var t=this._data,r=t.words,n=8*this._nDataBytes,i=8*t.sigBytes;return r[i>>>5]|=128<<24-i%32,r[(i+64>>>9<<4)+14]=e.floor(n/4294967296),r[(i+64>>>9<<4)+15]=n,t.sigBytes=4*r.length,this._process(),this._hash},clone:function(){var t=o.clone.call(this);return t._hash=this._hash.clone(),t}});r.SHA256=o._createHelper(f),r.HmacSHA256=o._createHmacHelper(f)}(Math),t.SHA256})},{"./core":20}],48:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./x64-core")):"function"==typeof t&&t.amd?t(["./core","./x64-core"],o):o(i.CryptoJS)}(this,function(t){return function(e){var r=t,n=r.lib,i=n.WordArray,o=n.Hasher,s=r.x64,a=s.Word,u=r.algo,c=[],f=[],h=[];!function(){for(var t=1,e=0,r=0;24>r;r++){c[t+5*e]=(r+1)*(r+2)/2%64;var n=e%5,i=(2*t+3*e)%5;t=n,e=i}for(var t=0;5>t;t++)for(var e=0;5>e;e++)f[t+5*e]=e+(2*t+3*e)%5*5;for(var o=1,s=0;24>s;s++){for(var u=0,l=0,p=0;7>p;p++){if(1&o){var d=(1<<p)-1;32>d?l^=1<<d:u^=1<<d-32}128&o?o=o<<1^113:o<<=1}h[s]=a.create(u,l)}}();var l=[];!function(){for(var t=0;25>t;t++)l[t]=a.create()}();var p=u.SHA3=o.extend({cfg:o.cfg.extend({outputLength:512}),_doReset:function(){for(var t=this._state=[],e=0;25>e;e++)t[e]=new a.init;this.blockSize=(1600-2*this.cfg.outputLength)/32},_doProcessBlock:function(t,e){for(var r=this._state,n=this.blockSize/2,i=0;n>i;i++){var o=t[e+2*i],s=t[e+2*i+1];o=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),s=16711935&(s<<8|s>>>24)|4278255360&(s<<24|s>>>8);var a=r[i];a.high^=s,a.low^=o}for(var u=0;24>u;u++){for(var p=0;5>p;p++){for(var d=0,g=0,y=0;5>y;y++){var a=r[p+5*y];d^=a.high,g^=a.low}var v=l[p];v.high=d,v.low=g}for(var p=0;5>p;p++)for(var B=l[(p+4)%5],m=l[(p+1)%5],P=m.high,b=m.low,d=B.high^(P<<1|b>>>31),g=B.low^(b<<1|P>>>31),y=0;5>y;y++){var a=r[p+5*y];a.high^=d,a.low^=g}for(var F=1;25>F;F++){var a=r[F],w=a.high,_=a.low,S=c[F];if(32>S)var d=w<<S|_>>>32-S,g=_<<S|w>>>32-S;else var d=_<<S-32|w>>>64-S,g=w<<S-32|_>>>64-S;var k=l[f[F]];k.high=d,k.low=g}var E=l[0],D=r[0];E.high=D.high,E.low=D.low;for(var p=0;5>p;p++)for(var y=0;5>y;y++){var F=p+5*y,a=r[F],A=l[F],T=l[(p+1)%5+5*y],C=l[(p+2)%5+5*y];a.high=A.high^~T.high&C.high,a.low=A.low^~T.low&C.low}var a=r[0],x=h[u];a.high^=x.high,a.low^=x.low}},_doFinalize:function(){var t=this._data,r=t.words,n=(8*this._nDataBytes,8*t.sigBytes),o=32*this.blockSize;r[n>>>5]|=1<<24-n%32,r[(e.ceil((n+1)/o)*o>>>5)-1]|=128,t.sigBytes=4*r.length,this._process();for(var s=this._state,a=this.cfg.outputLength/8,u=a/8,c=[],f=0;u>f;f++){var h=s[f],l=h.high,p=h.low;l=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8),p=16711935&(p<<8|p>>>24)|4278255360&(p<<24|p>>>8),c.push(p),c.push(l)}return new i.init(c,a)},clone:function(){for(var t=o.clone.call(this),e=t._state=this._state.slice(0),r=0;25>r;r++)e[r]=e[r].clone();return t}});r.SHA3=o._createHelper(p),r.HmacSHA3=o._createHmacHelper(p)}(Math),t.SHA3})},{"./core":20,"./x64-core":52}],49:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./x64-core"),e("./sha512")):"function"==typeof t&&t.amd?t(["./core","./x64-core","./sha512"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.x64,n=r.Word,i=r.WordArray,o=e.algo,s=o.SHA512,a=o.SHA384=s.extend({_doReset:function(){this._hash=new i.init([new n.init(3418070365,3238371032),new n.init(1654270250,914150663),new n.init(2438529370,812702999),new n.init(355462360,4144912697),new n.init(1731405415,4290775857),new n.init(2394180231,1750603025),new n.init(3675008525,1694076839),new n.init(1203062813,3204075428)])},_doFinalize:function(){var t=s._doFinalize.call(this);return t.sigBytes-=16,t}});e.SHA384=s._createHelper(a),e.HmacSHA384=s._createHmacHelper(a)}(),t.SHA384})},{"./core":20,"./sha512":50,"./x64-core":52}],50:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./x64-core")):"function"==typeof t&&t.amd?t(["./core","./x64-core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(){return s.create.apply(s,arguments)}var r=t,n=r.lib,i=n.Hasher,o=r.x64,s=o.Word,a=o.WordArray,u=r.algo,c=[e(1116352408,3609767458),e(1899447441,602891725),e(3049323471,3964484399),e(3921009573,2173295548),e(961987163,4081628472),e(1508970993,3053834265),e(2453635748,2937671579),e(2870763221,3664609560),e(3624381080,2734883394),e(310598401,1164996542),e(607225278,1323610764),e(1426881987,3590304994),e(1925078388,4068182383),e(2162078206,991336113),e(2614888103,633803317),e(3248222580,3479774868),e(3835390401,2666613458),e(4022224774,944711139),e(264347078,2341262773),e(604807628,2007800933),e(770255983,1495990901),e(1249150122,1856431235),e(1555081692,3175218132),e(1996064986,2198950837),e(2554220882,3999719339),e(2821834349,766784016),e(2952996808,2566594879),e(3210313671,3203337956),e(3336571891,1034457026),e(3584528711,2466948901),e(113926993,3758326383),e(338241895,168717936),e(666307205,1188179964),e(773529912,1546045734),e(1294757372,1522805485),e(1396182291,2643833823),e(1695183700,2343527390),e(1986661051,1014477480),e(2177026350,1206759142),e(2456956037,344077627),e(2730485921,1290863460),e(2820302411,3158454273),e(3259730800,3505952657),e(3345764771,106217008),e(3516065817,3606008344),e(3600352804,1432725776),e(4094571909,1467031594),e(275423344,851169720),e(430227734,3100823752),e(506948616,1363258195),e(659060556,3750685593),e(883997877,3785050280),e(958139571,3318307427),e(1322822218,3812723403),e(1537002063,2003034995),e(1747873779,3602036899),e(1955562222,1575990012),e(2024104815,1125592928),e(2227730452,2716904306),e(2361852424,442776044),e(2428436474,593698344),e(2756734187,3733110249),e(3204031479,2999351573),e(3329325298,3815920427),e(3391569614,3928383900),e(3515267271,566280711),e(3940187606,3454069534),e(4118630271,4000239992),e(116418474,1914138554),e(174292421,2731055270),e(289380356,3203993006),e(460393269,320620315),e(685471733,587496836),e(852142971,1086792851),e(1017036298,365543100),e(1126000580,2618297676),e(1288033470,3409855158),e(1501505948,4234509866),e(1607167915,987167468),e(1816402316,1246189591)],f=[];!function(){for(var t=0;80>t;t++)f[t]=e()}();var h=u.SHA512=i.extend({_doReset:function(){this._hash=new a.init([new s.init(1779033703,4089235720),new s.init(3144134277,2227873595),new s.init(1013904242,4271175723),new s.init(2773480762,1595750129),new s.init(1359893119,2917565137),new s.init(2600822924,725511199),new s.init(528734635,4215389547),new s.init(1541459225,327033209)])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],s=r[3],a=r[4],u=r[5],h=r[6],l=r[7],p=n.high,d=n.low,g=i.high,y=i.low,v=o.high,B=o.low,m=s.high,P=s.low,b=a.high,F=a.low,w=u.high,_=u.low,S=h.high,k=h.low,E=l.high,D=l.low,A=p,T=d,C=g,x=y,O=v,I=B,U=m,M=P,N=b,R=F,H=w,L=_,j=S,z=k,q=E,K=D,V=0;80>V;V++){var G=f[V];if(16>V)var J=G.high=0|t[e+2*V],W=G.low=0|t[e+2*V+1];else{var Z=f[V-15],Q=Z.high,X=Z.low,Y=(Q>>>1|X<<31)^(Q>>>8|X<<24)^Q>>>7,$=(X>>>1|Q<<31)^(X>>>8|Q<<24)^(X>>>7|Q<<25),te=f[V-2],ee=te.high,re=te.low,ne=(ee>>>19|re<<13)^(ee<<3|re>>>29)^ee>>>6,ie=(re>>>19|ee<<13)^(re<<3|ee>>>29)^(re>>>6|ee<<26),oe=f[V-7],se=oe.high,ae=oe.low,ue=f[V-16],ce=ue.high,fe=ue.low,W=$+ae,J=Y+se+($>>>0>W>>>0?1:0),W=W+ie,J=J+ne+(ie>>>0>W>>>0?1:0),W=W+fe,J=J+ce+(fe>>>0>W>>>0?1:0);G.high=J,G.low=W}var he=N&H^~N&j,le=R&L^~R&z,pe=A&C^A&O^C&O,de=T&x^T&I^x&I,ge=(A>>>28|T<<4)^(A<<30|T>>>2)^(A<<25|T>>>7),ye=(T>>>28|A<<4)^(T<<30|A>>>2)^(T<<25|A>>>7),ve=(N>>>14|R<<18)^(N>>>18|R<<14)^(N<<23|R>>>9),Be=(R>>>14|N<<18)^(R>>>18|N<<14)^(R<<23|N>>>9),me=c[V],Pe=me.high,be=me.low,Fe=K+Be,we=q+ve+(K>>>0>Fe>>>0?1:0),Fe=Fe+le,we=we+he+(le>>>0>Fe>>>0?1:0),Fe=Fe+be,we=we+Pe+(be>>>0>Fe>>>0?1:0),Fe=Fe+W,we=we+J+(W>>>0>Fe>>>0?1:0),_e=ye+de,Se=ge+pe+(ye>>>0>_e>>>0?1:0);q=j,K=z,j=H,z=L,H=N,L=R,R=M+Fe|0,N=U+we+(M>>>0>R>>>0?1:0)|0,U=O,M=I,O=C,I=x,C=A,x=T,T=Fe+_e|0,A=we+Se+(Fe>>>0>T>>>0?1:0)|0}d=n.low=d+T,n.high=p+A+(T>>>0>d>>>0?1:0),y=i.low=y+x,i.high=g+C+(x>>>0>y>>>0?1:0),B=o.low=B+I,o.high=v+O+(I>>>0>B>>>0?1:0),P=s.low=P+M,s.high=m+U+(M>>>0>P>>>0?1:0),F=a.low=F+R,a.high=b+N+(R>>>0>F>>>0?1:0),_=u.low=_+L,u.high=w+H+(L>>>0>_>>>0?1:0),k=h.low=k+z,h.high=S+j+(z>>>0>k>>>0?1:0),D=l.low=D+K,l.high=E+q+(K>>>0>D>>>0?1:0)},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;e[n>>>5]|=128<<24-n%32,e[(n+128>>>10<<5)+30]=Math.floor(r/4294967296),e[(n+128>>>10<<5)+31]=r,t.sigBytes=4*e.length,this._process();var i=this._hash.toX32();return i},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t},blockSize:32});r.SHA512=i._createHelper(h),r.HmacSHA512=i._createHmacHelper(h)}(),t.SHA512})},{"./core":20,"./x64-core":52}],51:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core"),e("./enc-base64"),e("./md5"),e("./evpkdf"),e("./cipher-core")):"function"==typeof t&&t.amd?t(["./core","./enc-base64","./md5","./evpkdf","./cipher-core"],o):o(i.CryptoJS)}(this,function(t){return function(){function e(t,e){var r=(this._lBlock>>>t^this._rBlock)&e;this._rBlock^=r,this._lBlock^=r<<t}function r(t,e){var r=(this._rBlock>>>t^this._lBlock)&e;this._lBlock^=r,this._rBlock^=r<<t}var n=t,i=n.lib,o=i.WordArray,s=i.BlockCipher,a=n.algo,u=[57,49,41,33,25,17,9,1,58,50,42,34,26,18,10,2,59,51,43,35,27,19,11,3,60,52,44,36,63,55,47,39,31,23,15,7,62,54,46,38,30,22,14,6,61,53,45,37,29,21,13,5,28,20,12,4],c=[14,17,11,24,1,5,3,28,15,6,21,10,23,19,12,4,26,8,16,7,27,20,13,2,41,52,31,37,47,55,30,40,51,45,33,48,44,49,39,56,34,53,46,42,50,36,29,32],f=[1,2,4,6,8,10,12,14,15,17,19,21,23,25,27,28],h=[{0:8421888,268435456:32768,536870912:8421378,805306368:2,1073741824:512,1342177280:8421890,1610612736:8389122,1879048192:8388608,2147483648:514,2415919104:8389120,2684354560:33280,2952790016:8421376,3221225472:32770,3489660928:8388610,3758096384:0,4026531840:33282,134217728:0,402653184:8421890,671088640:33282,939524096:32768,1207959552:8421888,1476395008:512,1744830464:8421378,2013265920:2,2281701376:8389120,2550136832:33280,2818572288:8421376,3087007744:8389122,3355443200:8388610,3623878656:32770,3892314112:514,4160749568:8388608,1:32768,268435457:2,536870913:8421888,805306369:8388608,1073741825:8421378,1342177281:33280,1610612737:512,1879048193:8389122,2147483649:8421890,2415919105:8421376,2684354561:8388610,2952790017:33282,3221225473:514,3489660929:8389120,3758096385:32770,4026531841:0,134217729:8421890,402653185:8421376,671088641:8388608,939524097:512,1207959553:32768,1476395009:8388610,1744830465:2,2013265921:33282,2281701377:32770,2550136833:8389122,2818572289:514,3087007745:8421888,3355443201:8389120,3623878657:0,3892314113:33280,4160749569:8421378},{0:1074282512,16777216:16384,33554432:524288,50331648:1074266128,67108864:1073741840,83886080:1074282496,100663296:1073758208,117440512:16,134217728:540672,150994944:1073758224,167772160:1073741824,184549376:540688,201326592:524304,218103808:0,234881024:16400,251658240:1074266112,8388608:1073758208,25165824:540688,41943040:16,58720256:1073758224,75497472:1074282512,92274688:1073741824,109051904:524288,125829120:1074266128,142606336:524304,159383552:0,176160768:16384,192937984:1074266112,209715200:1073741840,226492416:540672,243269632:1074282496,260046848:16400,268435456:0,285212672:1074266128,301989888:1073758224,318767104:1074282496,335544320:1074266112,352321536:16,369098752:540688,385875968:16384,402653184:16400,419430400:524288,436207616:524304,452984832:1073741840,469762048:540672,486539264:1073758208,503316480:1073741824,520093696:1074282512,276824064:540688,293601280:524288,310378496:1074266112,327155712:16384,343932928:1073758208,360710144:1074282512,377487360:16,394264576:1073741824,411041792:1074282496,427819008:1073741840,444596224:1073758224,461373440:524304,478150656:0,494927872:16400,511705088:1074266128,528482304:540672},{0:260,1048576:0,2097152:67109120,3145728:65796,4194304:65540,5242880:67108868,6291456:67174660,7340032:67174400,8388608:67108864,9437184:67174656,10485760:65792,11534336:67174404,12582912:67109124,13631488:65536,14680064:4,15728640:256,524288:67174656,1572864:67174404,2621440:0,3670016:67109120,4718592:67108868,5767168:65536,6815744:65540,7864320:260,8912896:4,9961472:256,11010048:67174400,12058624:65796,13107200:65792,14155776:67109124,15204352:67174660,16252928:67108864,16777216:67174656,17825792:65540,18874368:65536,19922944:67109120,20971520:256,22020096:67174660,23068672:67108868,24117248:0,25165824:67109124,26214400:67108864,27262976:4,28311552:65792,29360128:67174400,30408704:260,31457280:65796,32505856:67174404,17301504:67108864,18350080:260,19398656:67174656,20447232:0,21495808:65540,22544384:67109120,23592960:256,24641536:67174404,25690112:65536,26738688:67174660,27787264:65796,28835840:67108868,29884416:67109124,30932992:67174400,31981568:4,33030144:65792},{0:2151682048,65536:2147487808,131072:4198464,196608:2151677952,262144:0,327680:4198400,393216:2147483712,458752:4194368,524288:2147483648,589824:4194304,655360:64,720896:2147487744,786432:2151678016,851968:4160,917504:4096,983040:2151682112,32768:2147487808,98304:64,163840:2151678016,229376:2147487744,294912:4198400,360448:2151682112,425984:0,491520:2151677952,557056:4096,622592:2151682048,688128:4194304,753664:4160,819200:2147483648,884736:4194368,950272:4198464,1015808:2147483712,1048576:4194368,1114112:4198400,1179648:2147483712,1245184:0,1310720:4160,1376256:2151678016,1441792:2151682048,1507328:2147487808,1572864:2151682112,1638400:2147483648,1703936:2151677952,1769472:4198464,1835008:2147487744,1900544:4194304,1966080:64,2031616:4096,1081344:2151677952,1146880:2151682112,1212416:0,1277952:4198400,1343488:4194368,1409024:2147483648,1474560:2147487808,1540096:64,1605632:2147483712,1671168:4096,1736704:2147487744,1802240:2151678016,1867776:4160,1933312:2151682048,1998848:4194304,2064384:4198464},{0:128,4096:17039360,8192:262144,12288:536870912,16384:537133184,20480:16777344,24576:553648256,28672:262272,32768:16777216,36864:537133056,40960:536871040,45056:553910400,49152:553910272,53248:0,57344:17039488,61440:553648128,2048:17039488,6144:553648256,10240:128,14336:17039360,18432:262144,22528:537133184,26624:553910272,30720:536870912,34816:537133056,38912:0,43008:553910400,47104:16777344,51200:536871040,55296:553648128,59392:16777216,63488:262272,65536:262144,69632:128,73728:536870912,77824:553648256,81920:16777344,86016:553910272,90112:537133184,94208:16777216,98304:553910400,102400:553648128,106496:17039360,110592:537133056,114688:262272,118784:536871040,122880:0,126976:17039488,67584:553648256,71680:16777216,75776:17039360,79872:537133184,83968:536870912,88064:17039488,92160:128,96256:553910272,100352:262272,104448:553910400,108544:0,112640:553648128,116736:16777344,120832:262144,124928:537133056,129024:536871040},{0:268435464,256:8192,512:270532608,768:270540808,1024:268443648,1280:2097152,1536:2097160,1792:268435456,2048:0,2304:268443656,2560:2105344,2816:8,3072:270532616,3328:2105352,3584:8200,3840:270540800,128:270532608,384:270540808,640:8,896:2097152,1152:2105352,1408:268435464,1664:268443648,1920:8200,2176:2097160,2432:8192,2688:268443656,2944:270532616,3200:0,3456:270540800,3712:2105344,3968:268435456,4096:268443648,4352:270532616,4608:270540808,4864:8200,5120:2097152,5376:268435456,5632:268435464,5888:2105344,6144:2105352,6400:0,6656:8,6912:270532608,7168:8192,7424:268443656,7680:270540800,7936:2097160,4224:8,4480:2105344,4736:2097152,4992:268435464,5248:268443648,5504:8200,5760:270540808,6016:270532608,6272:270540800,6528:270532616,6784:8192,7040:2105352,7296:2097160,7552:0,7808:268435456,8064:268443656},{0:1048576,16:33555457,32:1024,48:1049601,64:34604033,80:0,96:1,112:34603009,128:33555456,144:1048577,160:33554433,176:34604032,192:34603008,208:1025,224:1049600,240:33554432,8:34603009,24:0,40:33555457,56:34604032,72:1048576,88:33554433,104:33554432,120:1025,136:1049601,152:33555456,168:34603008,184:1048577,200:1024,216:34604033,232:1,248:1049600,256:33554432,272:1048576,288:33555457,304:34603009,320:1048577,336:33555456,352:34604032,368:1049601,384:1025,400:34604033,416:1049600,432:1,448:0,464:34603008,480:33554433,496:1024,264:1049600,280:33555457,296:34603009,312:1,328:33554432,344:1048576,360:1025,376:34604032,392:33554433,408:34603008,424:0,440:34604033,456:1049601,472:1024,488:33555456,504:1048577},{0:134219808,1:131072,2:134217728,3:32,4:131104,5:134350880,6:134350848,7:2048,8:134348800,9:134219776,10:133120,11:134348832,12:2080,13:0,14:134217760,15:133152,2147483648:2048,2147483649:134350880,2147483650:134219808,2147483651:134217728,2147483652:134348800,2147483653:133120,2147483654:133152,2147483655:32,2147483656:134217760,2147483657:2080,2147483658:131104,2147483659:134350848,2147483660:0,2147483661:134348832,2147483662:134219776,2147483663:131072,16:133152,17:134350848,18:32,19:2048,20:134219776,21:134217760,22:134348832,23:131072,24:0,25:131104,26:134348800,27:134219808,28:134350880,29:133120,30:2080,31:134217728,2147483664:131072,2147483665:2048,2147483666:134348832,2147483667:133152,2147483668:32,2147483669:134348800,2147483670:134217728,2147483671:134219808,2147483672:134350880,2147483673:134217760,2147483674:134219776,2147483675:0,2147483676:133120,2147483677:2080,2147483678:131104,2147483679:134350848}],l=[4160749569,528482304,33030144,2064384,129024,8064,504,2147483679],p=a.DES=s.extend({_doReset:function(){for(var t=this._key,e=t.words,r=[],n=0;56>n;n++){var i=u[n]-1;r[n]=e[i>>>5]>>>31-i%32&1}for(var o=this._subKeys=[],s=0;16>s;s++){for(var a=o[s]=[],h=f[s],n=0;24>n;n++)a[n/6|0]|=r[(c[n]-1+h)%28]<<31-n%6,a[4+(n/6|0)]|=r[28+(c[n+24]-1+h)%28]<<31-n%6;a[0]=a[0]<<1|a[0]>>>31;for(var n=1;7>n;n++)a[n]=a[n]>>>4*(n-1)+3;a[7]=a[7]<<5|a[7]>>>27}for(var l=this._invSubKeys=[],n=0;16>n;n++)l[n]=o[15-n]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._subKeys)},decryptBlock:function(t,e){this._doCryptBlock(t,e,this._invSubKeys)},_doCryptBlock:function(t,n,i){this._lBlock=t[n],this._rBlock=t[n+1],e.call(this,4,252645135),e.call(this,16,65535),r.call(this,2,858993459),r.call(this,8,16711935),e.call(this,1,1431655765);for(var o=0;16>o;o++){for(var s=i[o],a=this._lBlock,u=this._rBlock,c=0,f=0;8>f;f++)c|=h[f][((u^s[f])&l[f])>>>0];this._lBlock=u,this._rBlock=a^c}var p=this._lBlock;this._lBlock=this._rBlock,this._rBlock=p,e.call(this,1,1431655765),r.call(this,8,16711935),r.call(this,2,858993459),e.call(this,16,65535),e.call(this,4,252645135),t[n]=this._lBlock,t[n+1]=this._rBlock},keySize:2,ivSize:2,blockSize:2});n.DES=s._createHelper(p);var d=a.TripleDES=s.extend({_doReset:function(){var t=this._key,e=t.words;this._des1=p.createEncryptor(o.create(e.slice(0,2))),this._des2=p.createEncryptor(o.create(e.slice(2,4))),this._des3=p.createEncryptor(o.create(e.slice(4,6)))},encryptBlock:function(t,e){this._des1.encryptBlock(t,e),this._des2.decryptBlock(t,e),this._des3.encryptBlock(t,e)},decryptBlock:function(t,e){this._des3.decryptBlock(t,e),this._des2.encryptBlock(t,e),this._des1.decryptBlock(t,e)},keySize:6,ivSize:2,blockSize:2});n.TripleDES=s._createHelper(d)}(),t.TripleDES})},{"./cipher-core":19,"./core":20,"./enc-base64":21,"./evpkdf":23,"./md5":29}],52:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e("./core")):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(e){{var r=t,n=r.lib,i=n.Base,o=n.WordArray,s=r.x64={};s.Word=i.extend({init:function(t,e){this.high=t,this.low=e}}),s.WordArray=i.extend({init:function(t,r){t=this.words=t||[],this.sigBytes=r!=e?r:8*t.length},toX32:function(){for(var t=this.words,e=t.length,r=[],n=0;e>n;n++){var i=t[n];r.push(i.high),r.push(i.low)}return o.create(r,this.sigBytes)},clone:function(){for(var t=i.clone.call(this),e=t.words=this.words.slice(0),r=e.length,n=0;r>n;n++)e[n]=e[n].clone();return t}})}}(),t})},{"./core":20}],53:[function(e,r){(function(n){!function(i){"use strict";function o(t,e){if(e=e||{},"undefined"!=typeof n&&"number"==typeof n.pid)return s(t,e);if(!window.crypto)throw new Error("Your browser does not support window.crypto.");return a(t,e)}function s(t,r){var n=e("crypto"),i=n.randomBytes(t);if(r.array)var o=[];else var o=new Uint8Array(t);for(var s=0;t>s;++s)o[s]=i.readUInt8(s);return o}function a(t,e){var r=new Uint8Array(t);if(window.crypto.getRandomValues(r),e.array)for(var n=[],i=0;i<r.length;++i)n[i]=r[i];else n=r;return n}"undefined"!=typeof t&&t.amd?t([],function(){return o}):"undefined"!=typeof r&&r.exports?r.exports=o:i.secureRandom=o}(this)}).call(this,e("FWaASH"))},{FWaASH:15,crypto:4}],54:[function(t,e){function r(t,e){if(!(this instanceof r))return new r(t,e);if(t instanceof r)this.hash=t.hash,this.version=t.version;else if("string"==typeof t)if(t.length<=35){var n=i.decode(t);this.hash=n.payload,this.version=n.version}else t.length<=40?(this.hash=o.hexToBytes(t),this.version=e||a):s("invalid or unrecognized input");else this.hash=t,this.version=e||a}var n=t("./base58"),i=t("./base58check"),o=t("./convert"),s=t("./util").error,a=t("./network").mainnet.addressVersion;r.prototype.toString=function(){return i.encode(this.hash.slice(0),this.version)},r.getVersion=function(t){return n.decode(t)[0]},r.validate=function(t){try{return i.decode(t),!0}catch(e){return!1}},e.exports=r},{"./base58":55,"./base58check":56,"./convert":57,"./network":66,"./util":70}],55:[function(t,e){(function(r){function n(t){for(var e=o.fromByteArrayUnsigned(t),r=[];e.compareTo(a)>=0;){var n=e.mod(a);e=e.subtract(n).divide(a),r.push(s[n.intValue()])}r.push(s[e.intValue()]);for(var i=0;i<t.length&&0===t[i];i++)r.push(s[0]);return r.reverse().join("")}function i(t){for(var e=o.valueOf(0),n=0,i=!1,s=0;s<t.length;++s){var c=t[s],f=u[c];if(void 0===f)throw new Error("invalid base58 string: "+t);e=e.multiply(a).add(f),"1"!==c||i?i=!0:++n}for(var h=e.toByteArrayUnsigned();n-->0;)h.unshift(0);return new r(h)}for(var o=t("./jsbn/jsbn"),s="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",a=o.valueOf(58),u={},c=0;c<s.length;++c){var f=s[c];u[f]=o.valueOf(c)}e.exports={encode:n,decode:i}}).call(this,t("buffer").Buffer)},{"./jsbn/jsbn":63,buffer:5}],56:[function(t,e){(function(r){function n(t){var e=u.createHash("sha256");return e.update(t),e.digest()
}function i(t,e){e=e||0;var e=new r([e]),i=new r(t),o=r.concat([e,i]),s=n(n(o)).slice(0,4);return a.encode(r.concat([o,s]))}function o(t){var e=a.decode(t),r=e.slice(0,-4),i=e.slice(-4),o=n(n(r)).slice(0,4);s.deepEqual(o,i);var u=r.readUInt8(0),c=r.slice(1);return{version:u,payload:c,checksum:i}}var s=t("assert"),a=t("./base58"),u=t("crypto");e.exports={encode:i,decode:o}}).call(this,t("buffer").Buffer)},{"./base58":55,assert:1,buffer:5,crypto:9}],57:[function(t,e){(function(r){function n(t,e,r){for(;t.length<r;)t=e+t;return t}function i(t){return r.isBuffer(t)?t.toString("hex"):t.map(function(t){return n(t.toString(16),"0",2)}).join("")}function o(t){return t.match(/../g).map(function(t){return parseInt(t,16)})}function s(t){for(var e=[],r=0;r<t.length;r+=3)for(var n=t[r]<<16|t[r+1]<<8|t[r+2],i=0;4>i;i++)e.push(8*r+6*i<=8*t.length?_.charAt(n>>>6*(3-i)&63):"=");return e.join("")}function a(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],r=0,n=0;n<t.length;r=++n%4)r&&e.push((_.indexOf(t.charAt(n-1))&Math.pow(2,-2*r+8)-1)<<2*r|_.indexOf(t.charAt(n))>>>6-2*r);return e}function u(t){return"string"!=typeof t?t:o(t)}function c(t){return t.match(/......../g).map(function(t){return parseInt(t,2)})}function f(t){return t.map(function(t){return n(t.toString(2),"0",8)}).join("")}function h(t){return t.map(function(t){return String.fromCharCode(t)}).join("")}function l(t){return t.split("").map(function(t){return t.charCodeAt(0)})}function p(t,e){return void 0===e&&(e=8),0===e?[]:[t%256].concat(p(Math.floor(t/256),e-1))}function d(t){return 0===t.length?0:t[0]+256*d(t.slice(1))}function g(t){return 253>t?[t]:65536>t?[253].concat(p(t,2)):4294967296>t?[254].concat(p(t,4)):[255].concat(p(t,8))}function y(t){var e=t[0],r=253>e?t.slice(0,1):253===e?t.slice(1,3):254===e?t.slice(1,5):t.slice(1,9);return{bytes:253>e?r:t.slice(0,r.length+1),number:d(r)}}function v(t){for(var e=[],r=0,n=0;r<t.length;r++,n+=8)e[n>>>5]|=t[r]<<24-n%32;return e}function B(t){for(var e=[],r=0;r<32*t.length;r+=8)e.push(t[r>>>5]>>>24-r%32&255);return e}function m(t){return new w.init(v(t),t.length)}function P(t){return B(t.words)}function b(t){return i(o(t).reverse())}var F=t("crypto-js"),w=F.lib.WordArray,_="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";e.exports={lpad:n,bytesToHex:i,hexToBytes:o,bytesToBase64:s,base64ToBytes:a,coerceToBytes:u,binToBytes:c,bytesToBin:f,bytesToString:h,stringToBytes:l,numToBytes:p,bytesToNum:d,numToVarInt:g,varIntToNum:y,bytesToWords:v,wordsToBytes:B,bytesToWordArray:m,wordArrayToBytes:P,reverseEndian:b}}).call(this,t("buffer").Buffer)},{buffer:5,"crypto-js":27}],58:[function(t,e){function r(t,e,r,n){for(var i=Math.max(e.bitLength(),n.bitLength()),o=t.add2D(r),a=t.curve.getInfinity(),u=i-1;u>=0;--u)a=a.twice2D(),a.z=s.ONE,e.testBit(u)?a=a.add2D(n.testBit(u)?o:t):n.testBit(u)&&(a=a.add2D(r));return a}function n(t,e){for(var r=[],n=[],i=0;32>i;i++)r.push(1);for(var i=0;32>i;i++)n.push(0);var o=a.bytesToWordArray(r),c=a.bytesToWordArray(n);return c=u(a.bytesToWordArray(r.concat([0]).concat(e).concat(t)),c),o=u(o,c),r=a.wordArrayToBytes(o),c=u(a.bytesToWordArray(r.concat([1]).concat(e).concat(t)),c),o=u(o,c),o=u(o,c),r=a.wordArrayToBytes(o),s.fromByteArrayUnsigned(r)}var i=t("./jsbn/sec"),o=t("secure-random"),s=t("./jsbn/jsbn"),a=t("./convert"),u=t("crypto-js/hmac-sha256"),c=t("./jsbn/ec").ECPointFp,f=i("secp256k1"),h=null,l={getBigRandom:function(t){return new s(t.bitLength(),o).mod(t.subtract(s.ONE)).add(s.ONE)},sign:function(t,e){var r=e,i=f.getN(),o=s.fromByteArrayUnsigned(t),a=n(t,e.toByteArrayUnsigned()),u=f.getG(),c=u.multiply(a),h=c.getX().toBigInteger().mod(i),p=a.modInverse(i).multiply(o.add(r.multiply(h))).mod(i);return l.serializeSig(h,p)},verify:function(t,e,r){var n,i;if(Array.isArray(e)){var o=l.parseSig(e);n=o.r,i=o.s}else{if("object"!=typeof e||!e.r||!e.s)throw new Error("Invalid value for signature");n=e.r,i=e.s}var a;if(r instanceof c)a=r;else{if(!Array.isArray(r))throw new Error("Invalid format for pubkey value, must be byte array or ECPointFp");a=c.decodeFrom(f.getCurve(),r)}var u=s.fromByteArrayUnsigned(t);return l.verifyRaw(u,n,i,a)},verifyRaw:function(t,e,r,n){var i=f.getN(),o=f.getG();if(e.compareTo(s.ONE)<0||e.compareTo(i)>=0)return!1;if(r.compareTo(s.ONE)<0||r.compareTo(i)>=0)return!1;var a=r.modInverse(i),u=t.multiply(a).mod(i),c=e.multiply(a).mod(i),h=o.multiply(u).add(n.multiply(c)),l=h.getX().toBigInteger().mod(i);return l.equals(e)},serializeSig:function(t,e){var r=t.toByteArraySigned(),n=e.toByteArraySigned(),i=[];return i.push(2),i.push(r.length),i=i.concat(r),i.push(2),i.push(n.length),i=i.concat(n),i.unshift(i.length),i.unshift(48),i},parseSig:function(t){var e;if(48!=t[0])throw new Error("Signature not a valid DERSequence");if(e=2,2!=t[e])throw new Error("First element in signature must be a DERInteger");var r=t.slice(e+2,e+2+t[e+1]);if(e+=2+t[e+1],2!=t[e])throw new Error("Second element in signature must be a DERInteger");var n=t.slice(e+2,e+2+t[e+1]);e+=2+t[e+1];var i=s.fromByteArrayUnsigned(r),o=s.fromByteArrayUnsigned(n);return{r:i,s:o}},parseSigCompact:function(t){if(65!==t.length)throw new Error("Signature has the wrong length");var e=t[0]-27;if(0>e||e>7)throw new Error("Invalid signature type");var r=f.getN(),n=s.fromByteArrayUnsigned(t.slice(1,33)).mod(r),i=s.fromByteArrayUnsigned(t.slice(33,65)).mod(r);return{r:n,s:i,i:e}},recoverPubKey:function(t,e,n,i){i=3&i;var o=1&i,a=i>>1,u=f.getN(),p=f.getG(),d=f.getCurve(),g=d.getQ(),y=d.getA().toBigInteger(),v=d.getB().toBigInteger();h||(h=g.add(s.ONE).divide(s.valueOf(4)));var B=a?t.add(u):t,m=B.multiply(B).multiply(B).add(y.multiply(B)).add(v).mod(g),P=m.modPow(h,g),b=(P.isEven()?!o:o)?P:g.subtract(P),F=new c(d,d.fromBigInteger(B),d.fromBigInteger(b));F.validate();var w=s.fromByteArrayUnsigned(n),_=s.ZERO.subtract(w).mod(u),S=t.modInverse(u),k=r(F,e,p,_).multiply(S);if(k.validate(),!l.verifyRaw(w,t,e,k))throw new Error("Pubkey recovery unsuccessful");return k},calcPubKeyRecoveryParam:function(t,e,r,n){for(var i=0;4>i;i++){var o=l.recoverPubKey(e,r,n,i);if(o.equals(t))return i}throw new Error("Unable to find valid recovery factor")}};e.exports=l},{"./convert":57,"./jsbn/ec":62,"./jsbn/jsbn":63,"./jsbn/sec":64,"crypto-js/hmac-sha256":25,"secure-random":53}],59:[function(t,e){var r=t("./address"),n=t("assert"),i=t("./convert"),o=t("./base58check"),s=t("./jsbn/jsbn"),a=t("./ecdsa"),u=t("./jsbn/ec").ECPointFp,c=t("./jsbn/sec"),f=t("./network"),h=t("./util"),l=c("secp256k1"),p=function(t,e){if(!(this instanceof p))return new p(t,e);if(t)this.import(t,e);else{var r=l.getN();this.priv=a.getBigRandom(r),this.compressed=e||!1}};p.prototype.import=function(t,e){function r(t,e){return t.indexOf(e)>=0}function a(t){return s.fromByteArrayUnsigned(t)}this.priv=t instanceof p?t.priv:t instanceof s?t.mod(l.getN()):Array.isArray(t)?a(t.slice(0,32)):"string"!=typeof t?null:44==t.length?a(i.base64ToBytes(t)):51==t.length&&"5"==t[0]?a(o.decode(t).payload):51==t.length&&"9"==t[0]?a(o.decode(t).payload):52==t.length&&r("LK",t[0])?a(o.decode(t).payload.slice(0,32)):52==t.length&&"c"==t[0]?a(o.decode(t).payload.slice(0,32)):r([64,65],t.length)?a(i.hexToBytes(t.slice(0,64))):null,n(null!==this.priv),this.compressed=void 0!==e?e:t instanceof p?t.compressed:t instanceof s?!1:Array.isArray(t)?!1:"string"!=typeof t?null:44==t.length?!1:51==t.length&&"5"==t[0]?!1:51==t.length&&"9"==t[0]?!1:52==t.length&&r("LK",t[0])?!0:52==t.length&&"c"==t[0]?!0:64==t.length?!1:65==t.length?!0:null,n(null!==this.compressed)},p.prototype.getPub=function(t){return void 0===t&&(t=this.compressed),d(l.getG().multiply(this.priv),t)},p.prototype.toBin=function(){return i.bytesToString(this.toBytes())},p.version_bytes={0:128,111:239},p.prototype.toWif=function(t){return t=t||f.mainnet.addressVersion,o.encode(this.toBytes(),p.version_bytes[t])},p.prototype.toHex=function(){return i.bytesToHex(this.toBytes())},p.prototype.toBytes=function(){var t=this.priv.toByteArrayUnsigned();return this.compressed&&t.push(1),t},p.prototype.toBase64=function(){return i.bytesToBase64(this.toBytes())},p.prototype.toString=p.prototype.toHex,p.prototype.getAddress=function(t){return this.getPub().getAddress(t)},p.prototype.add=function(t){return p(this.priv.add(p(t).priv),this.compressed)},p.prototype.multiply=function(t){return p(this.priv.multiply(p(t).priv),this.compressed)},p.prototype.sign=function(t){return a.sign(t,this.priv)},p.prototype.verify=function(t,e){return this.getPub().verify(t,e)};var d=function(t,e){return this instanceof d?void this.import(t,e):new d(t,e)};d.prototype.import=function(t,e){var r=function(t){return u.decodeFrom(l.getCurve(),t)};this.pub=t instanceof u?t:t instanceof p?l.getG().multiply(t.priv):t instanceof d?t.pub:"string"==typeof t?r(i.hexToBytes(t)):Array.isArray(t)?r(t):null,n(null!==this.pub),this.compressed=e?e:t instanceof u?t.compressed:t instanceof d?t.compressed:this.pub[0]<4},d.prototype.add=function(t){return d(this.pub.add(d(t).pub),this.compressed)},d.prototype.multiply=function(t){return d(this.pub.multiply(p(t).priv),this.compressed)},d.prototype.toBytes=function(t){return void 0===t&&(t=this.compressed),this.pub.getEncoded(t)},d.prototype.toHex=function(t){return i.bytesToHex(this.toBytes(t))},d.prototype.toBin=function(t){return i.bytesToString(this.toBytes(t))},d.prototype.toWif=function(t){return t=t||f.mainnet.addressVersion,o.encode(this.toBytes(),t)},d.prototype.toString=d.prototype.toHex,d.prototype.getAddress=function(t){return t=t||f.mainnet.addressVersion,new r(h.sha256ripe160(this.toBytes()),t)},d.prototype.verify=function(t,e){return a.verify(t,e,this.toBytes())},e.exports={ECKey:p,ECPubKey:d}},{"./address":54,"./base58check":56,"./convert":57,"./ecdsa":58,"./jsbn/ec":62,"./jsbn/jsbn":63,"./jsbn/sec":64,"./network":66,"./util":70,assert:1}],60:[function(t,e){(function(r){function n(t){var e=m.createHash("sha256");return e.update(t),e.digest()}function i(t,e){if(void 0!==t){var r=a.bytesToWordArray(t),n=a.wordArrayToBytes(p(r,"Bitcoin seed"));if(this.chaincode=n.slice(32),this.network=e||"mainnet",!B.hasOwnProperty(this.network))throw new Error("Unknown network: "+this.network);this.priv=new g(n.slice(0,32).concat([1]),!0),this.pub=this.priv.getPub(),this.index=0,this.depth=0}}function o(t,e){return!(e>t||t>e)}function s(t,e,r){var n=d.create(t,a.bytesToWordArray(r));return n.update(a.bytesToWordArray(e)),a.wordArrayToBytes(n.finalize())}var a=t("./convert.js"),u=t("./base58.js"),c=t("assert"),f=t("util").format,h=t("./util.js"),l=t("crypto-js"),p=l.HmacSHA512,d=l.algo.HMAC,g=t("./eckey.js").ECKey,y=t("./eckey.js").ECPubKey,v=t("./address.js"),B=t("./network"),m=t("crypto");i.HIGHEST_BIT=2147483648,i.LENGTH=78,i.fromSeedHex=function(t,e){return new i(a.hexToBytes(t),e)},i.fromSeedString=function(t,e){return new i(a.stringToBytes(t),e)},i.fromBase58=function(t){var e=u.decode(t),r=e.slice(0,-4),o=e.slice(-4),s=n(n(r)).slice(0,4);return c.deepEqual(s,o),c.equal(r.length,i.LENGTH),i.fromBytes(r)},i.fromHex=function(t){return i.fromBytes(a.hexToBytes(t))},i.fromBytes=function(t){if(t.length!=i.LENGTH)throw new Error(f("Invalid input length, %s. Expected %s.",t.length,i.LENGTH));r.isBuffer(t)&&(t=Array.prototype.map.bind(t,function(t){return t})());var e,n=new i,s=t.slice(0,4),u=a.bytesToWords(s)[0];for(var h in B){var l=B[h];for(var p in l.hdVersions)u==l.hdVersions[p]&&(e=p,n.network=h)}if(!n.network)throw new Error(f("Could not find version %s",a.bytesToHex(s)));return n.depth=t[4],n.parentFingerprint=t.slice(5,9),c(0===n.depth==o(n.parentFingerprint,[0,0,0,0])),n.index=a.bytesToNum(t.slice(9,13).reverse()),c(n.depth>0||0===n.index),n.chaincode=t.slice(13,45),"priv"==e?(n.priv=new g(t.slice(46,78).concat([1]),!0),n.pub=n.priv.getPub()):n.pub=new y(t.slice(45,78),!0),n},i.prototype.getIdentifier=function(){return h.sha256ripe160(this.pub.toBytes())},i.prototype.getFingerprint=function(){return this.getIdentifier().slice(0,4)},i.prototype.getAddress=function(){return new v(h.sha256ripe160(this.pub.toBytes()),this.getKeyVersion())},i.prototype.toBytes=function(t){var e=[],r=B[this.network].hdVersions[t?"priv":"pub"],n=a.wordsToBytes([r]);return e=e.concat(n),c.equal(e.length,4),e.push(this.depth),c.equal(e.length,5),e=e.concat(this.depth?this.parentFingerprint:[0,0,0,0]),c.equal(e.length,9),e=e.concat(a.numToBytes(this.index,4).reverse()),c.equal(e.length,13),e=e.concat(this.chaincode),c.equal(e.length,45),t?(c(this.priv,"Cannot serialize to private without private key"),e.push(0),e=e.concat(this.priv.toBytes().slice(0,32))):e=e.concat(this.pub.toBytes(!0)),e},i.prototype.toHex=function(t){var e=this.toBytes(t);return a.bytesToHex(e)},i.prototype.toBase58=function(t){var e=new r(this.toBytes(t)),i=n(n(e)).slice(0,4);return u.encode(r.concat([e,i]))},i.prototype.derive=function(t){var e,r=a.numToBytes(t,4).reverse(),n=this.chaincode,o=t>=i.HIGHEST_BIT,u=l.algo.SHA512;if(o){c(this.priv,"Private derive on public key");var f=this.priv.toBytes().slice(0,32);e=s(u,[0].concat(f,r),n)}else{var h=this.pub.toBytes(!0);e=s(u,h.concat(r),n)}var p=e.slice(0,32),d=e.slice(32),y=new i;return y.network=this.network,this.priv?(y.priv=this.priv.add(new g(p.concat([1]))),y.priv.compressed=!0,y.priv.version=this.getKeyVersion(),y.pub=y.priv.getPub()):y.pub=this.pub.add(new g(p.concat([1]),!0).getPub()),y.chaincode=d,y.parentFingerprint=this.getFingerprint(),y.depth=this.depth+1,y.index=t,y.pub.compressed=!0,y},i.prototype.derivePrivate=function(t){return this.derive(t+i.HIGHEST_BIT)},i.prototype.getKeyVersion=function(){return B[this.network].addressVersion},i.prototype.toString=i.prototype.toBase58,e.exports=i}).call(this,t("buffer").Buffer)},{"./address.js":54,"./base58.js":55,"./convert.js":57,"./eckey.js":59,"./network":66,"./util.js":70,assert:1,buffer:5,crypto:9,"crypto-js":27,util:17}],61:[function(t,e){var r=t("./eckey"),n=t("./transaction");e.exports={Address:t("./address"),Key:r.ECKey,ECKey:r.ECKey,ECPubKey:r.ECPubKey,Message:t("./message"),BigInteger:t("./jsbn/jsbn"),Crypto:t("crypto-js"),Script:t("./script"),Opcode:t("./opcode"),Transaction:n.Transaction,Util:t("./util"),TransactionIn:n.TransactionIn,TransactionOut:n.TransactionOut,ECPointFp:t("./jsbn/ec").ECPointFp,Wallet:t("./wallet"),network:t("./network"),ecdsa:t("./ecdsa"),HDWallet:t("./hdwallet.js"),base58:t("./base58"),base58check:t("./base58check"),convert:t("./convert")}},{"./address":54,"./base58":55,"./base58check":56,"./convert":57,"./ecdsa":58,"./eckey":59,"./hdwallet.js":60,"./jsbn/ec":62,"./jsbn/jsbn":63,"./message":65,"./network":66,"./opcode":67,"./script":68,"./transaction":69,"./util":70,"./wallet":71,"crypto-js":27}],62:[function(t,e){function r(t,e){this.x=e,this.q=t}function n(t){return t==this?!0:this.q.equals(t.q)&&this.x.equals(t.x)}function i(){return this.x}function o(){return new r(this.q,this.x.negate().mod(this.q))}function s(t){return new r(this.q,this.x.add(t.toBigInteger()).mod(this.q))}function a(t){return new r(this.q,this.x.subtract(t.toBigInteger()).mod(this.q))}function u(t){return new r(this.q,this.x.multiply(t.toBigInteger()).mod(this.q))}function c(){return new r(this.q,this.x.square().mod(this.q))}function f(t){return new r(this.q,this.x.multiply(t.toBigInteger().modInverse(this.q)).mod(this.q))}function h(t,e,r,n){this.curve=t,this.x=e,this.y=r,this.z=null==n?T.ONE:n,this.zinv=null}function l(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.x.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function p(){return null==this.zinv&&(this.zinv=this.z.modInverse(this.curve.q)),this.curve.fromBigInteger(this.y.toBigInteger().multiply(this.zinv).mod(this.curve.q))}function d(t){if(t==this)return!0;if(this.isInfinity())return t.isInfinity();if(t.isInfinity())return this.isInfinity();var e,r;return e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),e.equals(T.ZERO)?(r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q),r.equals(T.ZERO)):!1}function g(){return null==this.x&&null==this.y?!0:this.z.equals(T.ZERO)&&!this.y.toBigInteger().equals(T.ZERO)}function y(){return new h(this.curve,this.x,this.y.negate(),this.z)}function v(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.y.toBigInteger().multiply(this.z).subtract(this.y.toBigInteger().multiply(t.z)).mod(this.curve.q),r=t.x.toBigInteger().multiply(this.z).subtract(this.x.toBigInteger().multiply(t.z)).mod(this.curve.q);if(T.ZERO.equals(r))return T.ZERO.equals(e)?this.twice():this.curve.getInfinity();var n=new T("3"),i=this.x.toBigInteger(),o=this.y.toBigInteger(),s=(t.x.toBigInteger(),t.y.toBigInteger(),r.square()),a=s.multiply(r),u=i.multiply(s),c=e.square().multiply(this.z),f=c.subtract(u.shiftLeft(1)).multiply(t.z).subtract(a).multiply(r).mod(this.curve.q),l=u.multiply(n).multiply(e).subtract(o.multiply(a)).subtract(c.multiply(e)).multiply(t.z).add(e.multiply(a)).mod(this.curve.q),p=a.multiply(this.z).multiply(t.z).mod(this.curve.q);return new h(this.curve,this.curve.fromBigInteger(f),this.curve.fromBigInteger(l),p)}function B(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=new T("3"),e=this.x.toBigInteger(),r=this.y.toBigInteger(),n=r.multiply(this.z),i=n.multiply(r).mod(this.curve.q),o=this.curve.a.toBigInteger(),s=e.square().multiply(t);T.ZERO.equals(o)||(s=s.add(this.z.square().multiply(o))),s=s.mod(this.curve.q);var a=s.square().subtract(e.shiftLeft(3).multiply(i)).shiftLeft(1).multiply(n).mod(this.curve.q),u=s.multiply(t).multiply(e).subtract(i.shiftLeft(1)).shiftLeft(2).multiply(i).subtract(s.square().multiply(s)).mod(this.curve.q),c=n.square().multiply(n).shiftLeft(3).mod(this.curve.q);return new h(this.curve,this.curve.fromBigInteger(a),this.curve.fromBigInteger(u),c)}function m(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new T("3")),i=this.negate(),o=this;for(e=n.bitLength()-2;e>0;--e){o=o.twice();var s=n.testBit(e),a=r.testBit(e);s!=a&&(o=o.add(s?this:i))}return o}function P(t,e,r){var n;n=t.bitLength()>r.bitLength()?t.bitLength()-1:r.bitLength()-1;for(var i=this.curve.getInfinity(),o=this.add(e);n>=0;)i=i.twice(),t.testBit(n)?i=i.add(r.testBit(n)?o:this):r.testBit(n)&&(i=i.add(e)),--n;return i}function b(t,e,r){this.q=t,this.a=this.fromBigInteger(e),this.b=this.fromBigInteger(r),this.infinity=new h(this,null,null)}function F(){return this.q}function w(){return this.a}function _(){return this.b}function S(t){return t==this?!0:this.q.equals(t.q)&&this.a.equals(t.a)&&this.b.equals(t.b)}function k(){return this.infinity}function E(t){return new r(this.q,t)}function D(t){switch(parseInt(t.substr(0,2),16)){case 0:return this.infinity;case 2:case 3:return null;case 4:case 6:case 7:var e=(t.length-2)/2,r=t.substr(2,e),n=t.substr(e+2,e);return new h(this,this.fromBigInteger(new T(r,16)),this.fromBigInteger(new T(n,16)));default:return null}}function A(t,e){var r=t.toByteArrayUnsigned();if(e<r.length)r=r.slice(r.length-e);else for(;e>r.length;)r.unshift(0);return r}{var T=t("./jsbn");t("./sec")}r.prototype.equals=n,r.prototype.toBigInteger=i,r.prototype.negate=o,r.prototype.add=s,r.prototype.subtract=a,r.prototype.multiply=u,r.prototype.square=c,r.prototype.divide=f,h.prototype.getX=l,h.prototype.getY=p,h.prototype.equals=d,h.prototype.isInfinity=g,h.prototype.negate=y,h.prototype.add=v,h.prototype.twice=B,h.prototype.multiply=m,h.prototype.multiplyTwo=P,b.prototype.getQ=F,b.prototype.getA=w,b.prototype.getB=_,b.prototype.equals=S,b.prototype.getInfinity=k,b.prototype.fromBigInteger=E,b.prototype.decodePointHex=D,r.prototype.getByteLength=function(){return Math.floor((this.toBigInteger().bitLength()+7)/8)},h.prototype.getEncoded=function(t){var e=this.getX().toBigInteger(),r=this.getY().toBigInteger(),n=A(e,32);return t?n.unshift(r.isEven()?2:3):(n.unshift(4),n=n.concat(A(r,32))),n},h.decodeFrom=function(t,e){var r=e[0],n=e.length-1;if(4==r)var i=e.slice(1,1+n/2),o=e.slice(1+n/2,1+n),s=T.fromByteArrayUnsigned(i),a=T.fromByteArrayUnsigned(o);else{var i=e.slice(1),s=T.fromByteArrayUnsigned(i),u=t.getQ(),c=s.multiply(s).multiply(s).add(new T("7")).mod(u),f=u.add(new T("1")).divide(new T("4")),a=c.modPow(f,u);a.mod(new T("2")).toString()!=""+r%2&&(a=u.subtract(a))}return new h(t,t.fromBigInteger(s),t.fromBigInteger(a))},h.prototype.add2D=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;if(this.x.equals(t.x))return this.y.equals(t.y)?this.twice():this.curve.getInfinity();var e=t.x.subtract(this.x),r=t.y.subtract(this.y),n=r.divide(e),i=n.square().subtract(this.x).subtract(t.x),o=n.multiply(this.x.subtract(i)).subtract(this.y);return new h(this.curve,i,o)},h.prototype.twice2D=function(){if(this.isInfinity())return this;if(0==this.y.toBigInteger().signum())return this.curve.getInfinity();var t=this.curve.fromBigInteger(T.valueOf(2)),e=this.curve.fromBigInteger(T.valueOf(3)),r=this.x.square().multiply(e).add(this.curve.a).divide(this.y.multiply(t)),n=r.square().subtract(this.x.multiply(t)),i=r.multiply(this.x.subtract(n)).subtract(this.y);return new h(this.curve,n,i)},h.prototype.multiply2D=function(t){if(this.isInfinity())return this;if(0==t.signum())return this.curve.getInfinity();var e,r=t,n=r.multiply(new T("3")),i=this.negate(),o=this;for(e=n.bitLength()-2;e>0;--e){o=o.twice();var s=n.testBit(e),a=r.testBit(e);s!=a&&(o=o.add2D(s?this:i))}return o},h.prototype.isOnCurve=function(){var t=this.getX().toBigInteger(),e=this.getY().toBigInteger(),r=this.curve.getA().toBigInteger(),n=this.curve.getB().toBigInteger(),i=this.curve.getQ(),o=e.multiply(e).mod(i),s=t.multiply(t).multiply(t).add(r.multiply(t)).add(n).mod(i);return o.equals(s)},h.prototype.toString=function(){return"("+this.getX().toBigInteger().toString()+","+this.getY().toBigInteger().toString()+")"},h.prototype.validate=function(){var t=this.curve.getQ();if(this.isInfinity())throw new Error("Point is at infinity.");var e=this.getX().toBigInteger(),r=this.getY().toBigInteger();if(e.compareTo(T.ONE)<0||e.compareTo(t.subtract(T.ONE))>0)throw new Error("x coordinate out of bounds");if(r.compareTo(T.ONE)<0||r.compareTo(t.subtract(T.ONE))>0)throw new Error("y coordinate out of bounds");if(!this.isOnCurve())throw new Error("Point is not on the curve.");if(this.multiply(t).isInfinity())throw new Error("Point is not a scalar multiple of G.");return!0},e.exports=b,e.exports.ECPointFp=h},{"./jsbn":63,"./sec":64}],63:[function(t,e){(function(t){function r(t,e,n){return this instanceof r?void(null!=t&&("number"==typeof t?this.fromNumber(t,e,n):null==e&&"string"!=typeof t?this.fromString(t,256):this.fromString(t,e))):new r(t,e,n)}function n(){return new r(null)}function i(t,e,r,n,i,o){for(;--o>=0;){var s=e*this[t++]+r[n]+i;i=Math.floor(s/67108864),r[n++]=67108863&s}return i}function o(t){return rr.charAt(t)}function s(t,e){var r=nr[t.charCodeAt(e)];return null==r?-1:r}function a(t){for(var e=this.t-1;e>=0;--e)t[e]=this[e];t.t=this.t,t.s=this.s}function u(t){this.t=1,this.s=0>t?-1:0,t>0?this[0]=t:-1>t?this[0]=t+Ye:this.t=0}function c(t){var e=n();return e.fromInt(t),e}function f(t,e){var n,i=this;if(16==e)n=4;else if(8==e)n=3;else if(256==e)n=8;else if(2==e)n=1;else if(32==e)n=5;else{if(4!=e)return void i.fromRadix(t,e);n=2}i.t=0,i.s=0;for(var o=t.length,a=!1,u=0;--o>=0;){var c=8==n?255&t[o]:s(t,o);0>c?"-"==t.charAt(o)&&(a=!0):(a=!1,0==u?i[i.t++]=c:u+n>i.DB?(i[i.t-1]|=(c&(1<<i.DB-u)-1)<<u,i[i.t++]=c>>i.DB-u):i[i.t-1]|=c<<u,u+=n,u>=i.DB&&(u-=i.DB))}8==n&&0!=(128&t[0])&&(i.s=-1,u>0&&(i[i.t-1]|=(1<<i.DB-u)-1<<u)),i.clamp(),a&&r.ZERO.subTo(i,i)}function h(){for(var t=this.s&this.DM;this.t>0&&this[this.t-1]==t;)--this.t}function l(t){var e=this;if(e.s<0)return"-"+e.negate().toString(t);var r;if(16==t)r=4;else if(8==t)r=3;else if(2==t)r=1;else if(32==t)r=5;else{if(4!=t)return e.toRadix(t);r=2}var n,i=(1<<r)-1,s=!1,a="",u=e.t,c=e.DB-u*e.DB%r;if(u-->0)for(c<e.DB&&(n=e[u]>>c)>0&&(s=!0,a=o(n));u>=0;)r>c?(n=(e[u]&(1<<c)-1)<<r-c,n|=e[--u]>>(c+=e.DB-r)):(n=e[u]>>(c-=r)&i,0>=c&&(c+=e.DB,--u)),n>0&&(s=!0),s&&(a+=o(n));return s?a:"0"}function p(){var t=n();return r.ZERO.subTo(this,t),t}function d(){return this.s<0?this.negate():this}function g(t){var e=this.s-t.s;if(0!=e)return e;var r=this.t;if(e=r-t.t,0!=e)return this.s<0?-e:e;for(;--r>=0;)if(0!=(e=this[r]-t[r]))return e;return 0}function y(t){var e,r=1;return 0!=(e=t>>>16)&&(t=e,r+=16),0!=(e=t>>8)&&(t=e,r+=8),0!=(e=t>>4)&&(t=e,r+=4),0!=(e=t>>2)&&(t=e,r+=2),0!=(e=t>>1)&&(t=e,r+=1),r}function v(){return this.t<=0?0:this.DB*(this.t-1)+y(this[this.t-1]^this.s&this.DM)}function B(t,e){var r;for(r=this.t-1;r>=0;--r)e[r+t]=this[r];for(r=t-1;r>=0;--r)e[r]=0;e.t=this.t+t,e.s=this.s}function m(t,e){for(var r=t;r<this.t;++r)e[r-t]=this[r];e.t=Math.max(this.t-t,0),e.s=this.s}function P(t,e){var r,n=this,i=t%n.DB,o=n.DB-i,s=(1<<o)-1,a=Math.floor(t/n.DB),u=n.s<<i&n.DM;for(r=n.t-1;r>=0;--r)e[r+a+1]=n[r]>>o|u,u=(n[r]&s)<<i;for(r=a-1;r>=0;--r)e[r]=0;e[a]=u,e.t=n.t+a+1,e.s=n.s,e.clamp()}function b(t,e){var r=this;e.s=r.s;var n=Math.floor(t/r.DB);if(n>=r.t)return void(e.t=0);var i=t%r.DB,o=r.DB-i,s=(1<<i)-1;e[0]=r[n]>>i;for(var a=n+1;a<r.t;++a)e[a-n-1]|=(r[a]&s)<<o,e[a-n]=r[a]>>i;i>0&&(e[r.t-n-1]|=(r.s&s)<<o),e.t=r.t-n,e.clamp()}function F(t,e){for(var r=this,n=0,i=0,o=Math.min(t.t,r.t);o>n;)i+=r[n]-t[n],e[n++]=i&r.DM,i>>=r.DB;if(t.t<r.t){for(i-=t.s;n<r.t;)i+=r[n],e[n++]=i&r.DM,i>>=r.DB;i+=r.s}else{for(i+=r.s;n<t.t;)i-=t[n],e[n++]=i&r.DM,i>>=r.DB;i-=t.s}e.s=0>i?-1:0,-1>i?e[n++]=r.DV+i:i>0&&(e[n++]=i),e.t=n,e.clamp()}function w(t,e){var n=this.abs(),i=t.abs(),o=n.t;for(e.t=o+i.t;--o>=0;)e[o]=0;for(o=0;o<i.t;++o)e[o+n.t]=n.am(0,i[o],e,o,0,n.t);e.s=0,e.clamp(),this.s!=t.s&&r.ZERO.subTo(e,e)}function _(t){for(var e=this.abs(),r=t.t=2*e.t;--r>=0;)t[r]=0;for(r=0;r<e.t-1;++r){var n=e.am(r,e[r],t,2*r,0,1);(t[r+e.t]+=e.am(r+1,2*e[r],t,2*r+1,n,e.t-r-1))>=e.DV&&(t[r+e.t]-=e.DV,t[r+e.t+1]=1)}t.t>0&&(t[t.t-1]+=e.am(r,e[r],t,2*r,0,1)),t.s=0,t.clamp()}function S(t,e,i){var o=this,s=t.abs();if(!(s.t<=0)){var a=o.abs();if(a.t<s.t)return null!=e&&e.fromInt(0),void(null!=i&&o.copyTo(i));null==i&&(i=n());var u=n(),c=o.s,f=t.s,h=o.DB-y(s[s.t-1]);h>0?(s.lShiftTo(h,u),a.lShiftTo(h,i)):(s.copyTo(u),a.copyTo(i));var l=u.t,p=u[l-1];if(0!=p){var d=p*(1<<o.F1)+(l>1?u[l-2]>>o.F2:0),g=o.FV/d,v=(1<<o.F1)/d,B=1<<o.F2,m=i.t,P=m-l,b=null==e?n():e;for(u.dlShiftTo(P,b),i.compareTo(b)>=0&&(i[i.t++]=1,i.subTo(b,i)),r.ONE.dlShiftTo(l,b),b.subTo(u,u);u.t<l;)u[u.t++]=0;for(;--P>=0;){var F=i[--m]==p?o.DM:Math.floor(i[m]*g+(i[m-1]+B)*v);if((i[m]+=u.am(0,F,i,P,0,l))<F)for(u.dlShiftTo(P,b),i.subTo(b,i);i[m]<--F;)i.subTo(b,i)}null!=e&&(i.drShiftTo(l,e),c!=f&&r.ZERO.subTo(e,e)),i.t=l,i.clamp(),h>0&&i.rShiftTo(h,i),0>c&&r.ZERO.subTo(i,i)}}}function k(t){var e=n();return this.abs().divRemTo(t,null,e),this.s<0&&e.compareTo(r.ZERO)>0&&t.subTo(e,e),e}function E(t){this.m=t}function D(t){return t.s<0||t.compareTo(this.m)>=0?t.mod(this.m):t}function A(t){return t}function T(t){t.divRemTo(this.m,null,t)}function C(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function x(t,e){t.squareTo(e),this.reduce(e)}function O(){if(this.t<1)return 0;var t=this[0];if(0==(1&t))return 0;var e=3&t;return e=e*(2-(15&t)*e)&15,e=e*(2-(255&t)*e)&255,e=e*(2-((65535&t)*e&65535))&65535,e=e*(2-t*e%this.DV)%this.DV,e>0?this.DV-e:-e}function I(t){this.m=t,this.mp=t.invDigit(),this.mpl=32767&this.mp,this.mph=this.mp>>15,this.um=(1<<t.DB-15)-1,this.mt2=2*t.t}function U(t){var e=n();return t.abs().dlShiftTo(this.m.t,e),e.divRemTo(this.m,null,e),t.s<0&&e.compareTo(r.ZERO)>0&&this.m.subTo(e,e),e}function M(t){var e=n();return t.copyTo(e),this.reduce(e),e}function N(t){for(;t.t<=this.mt2;)t[t.t++]=0;for(var e=0;e<this.m.t;++e){var r=32767&t[e],n=r*this.mpl+((r*this.mph+(t[e]>>15)*this.mpl&this.um)<<15)&t.DM;for(r=e+this.m.t,t[r]+=this.m.am(0,n,t,e,0,this.m.t);t[r]>=t.DV;)t[r]-=t.DV,t[++r]++}t.clamp(),t.drShiftTo(this.m.t,t),t.compareTo(this.m)>=0&&t.subTo(this.m,t)}function R(t,e){t.squareTo(e),this.reduce(e)}function H(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function L(){return 0==(this.t>0?1&this[0]:this.s)}function j(t,e){if(t>4294967295||1>t)return r.ONE;var i=n(),o=n(),s=e.convert(this),a=y(t)-1;for(s.copyTo(i);--a>=0;)if(e.sqrTo(i,o),(t&1<<a)>0)e.mulTo(o,s,i);else{var u=i;i=o,o=u}return e.revert(i)}function z(t,e){var r;return r=256>t||e.isEven()?new E(e):new I(e),this.exp(t,r)}function n(){return new r(null)}function q(){var t=n();return this.copyTo(t),t}function K(){if(this.s<0){if(1==this.t)return this[0]-this.DV;if(0==this.t)return-1}else{if(1==this.t)return this[0];if(0==this.t)return 0}return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function V(){return 0==this.t?this.s:this[0]<<24>>24}function G(){return 0==this.t?this.s:this[0]<<16>>16}function J(t){return Math.floor(Math.LN2*this.DB/Math.log(t))}function W(){return this.s<0?-1:this.t<=0||1==this.t&&this[0]<=0?0:1}function Z(t){if(null==t&&(t=10),0==this.signum()||2>t||t>36)return"0";var e=this.chunkSize(t),r=Math.pow(t,e),i=c(r),o=n(),s=n(),a="";for(this.divRemTo(i,o,s);o.signum()>0;)a=(r+s.intValue()).toString(t).substr(1)+a,o.divRemTo(i,o,s);return s.intValue().toString(t)+a}function Q(t,e){var n=this;n.fromInt(0),null==e&&(e=10);for(var i=n.chunkSize(e),o=Math.pow(e,i),a=!1,u=0,c=0,f=0;f<t.length;++f){var h=s(t,f);0>h?"-"==t.charAt(f)&&0==n.signum()&&(a=!0):(c=e*c+h,++u>=i&&(n.dMultiply(o),n.dAddOffset(c,0),u=0,c=0))}u>0&&(n.dMultiply(Math.pow(e,u)),n.dAddOffset(c,0)),a&&r.ZERO.subTo(n,n)}function X(t,e,n){var i=this;if("number"==typeof e)if(2>t)i.fromInt(1);else for(i.fromNumber(t,n),i.testBit(t-1)||i.bitwiseTo(r.ONE.shiftLeft(t-1),oe,i),i.isEven()&&i.dAddOffset(1,0);!i.isProbablePrime(e);)i.dAddOffset(2,0),i.bitLength()>t&&i.subTo(r.ONE.shiftLeft(t-1),i);else{var o=7&t,s=(t>>3)+1,a=e(s,{array:!0});o>0?a[0]&=(1<<o)-1:a[0]=0,i.fromString(a,256)}}function Y(){var t=this,e=t.t,r=new Array;r[0]=t.s;var n,i=t.DB-e*t.DB%8,o=0;if(e-->0)for(i<t.DB&&(n=t[e]>>i)!=(t.s&t.DM)>>i&&(r[o++]=n|t.s<<t.DB-i);e>=0;)8>i?(n=(t[e]&(1<<i)-1)<<8-i,n|=t[--e]>>(i+=t.DB-8)):(n=t[e]>>(i-=8)&255,0>=i&&(i+=t.DB,--e)),0!=(128&n)&&(n|=-256),0===o&&(128&t.s)!=(128&n)&&++o,(o>0||n!=t.s)&&(r[o++]=n);return r}function $(t){return 0==this.compareTo(t)}function te(t){return this.compareTo(t)<0?this:t}function ee(t){return this.compareTo(t)>0?this:t}function re(t,e,r){var n,i,o=this,s=Math.min(t.t,o.t);for(n=0;s>n;++n)r[n]=e(o[n],t[n]);if(t.t<o.t){for(i=t.s&o.DM,n=s;n<o.t;++n)r[n]=e(o[n],i);r.t=o.t}else{for(i=o.s&o.DM,n=s;n<t.t;++n)r[n]=e(i,t[n]);r.t=t.t}r.s=e(o.s,t.s),r.clamp()}function ne(t,e){return t&e}function ie(t){var e=n();return this.bitwiseTo(t,ne,e),e}function oe(t,e){return t|e}function se(t){var e=n();return this.bitwiseTo(t,oe,e),e}function ae(t,e){return t^e}function ue(t){var e=n();return this.bitwiseTo(t,ae,e),e}function ce(t,e){return t&~e}function fe(t){var e=n();return this.bitwiseTo(t,ce,e),e}function he(){for(var t=n(),e=0;e<this.t;++e)t[e]=this.DM&~this[e];return t.t=this.t,t.s=~this.s,t}function le(t){var e=n();return 0>t?this.rShiftTo(-t,e):this.lShiftTo(t,e),e}function pe(t){var e=n();return 0>t?this.lShiftTo(-t,e):this.rShiftTo(t,e),e}function de(t){if(0==t)return-1;var e=0;return 0==(65535&t)&&(t>>=16,e+=16),0==(255&t)&&(t>>=8,e+=8),0==(15&t)&&(t>>=4,e+=4),0==(3&t)&&(t>>=2,e+=2),0==(1&t)&&++e,e}function ge(){for(var t=0;t<this.t;++t)if(0!=this[t])return t*this.DB+de(this[t]);return this.s<0?this.t*this.DB:-1}function ye(t){for(var e=0;0!=t;)t&=t-1,++e;return e}function ve(){for(var t=0,e=this.s&this.DM,r=0;r<this.t;++r)t+=ye(this[r]^e);return t}function Be(t){var e=Math.floor(t/this.DB);return e>=this.t?0!=this.s:0!=(this[e]&1<<t%this.DB)}function me(t,e){var n=r.ONE.shiftLeft(t);return this.bitwiseTo(n,e,n),n}function Pe(t){return this.changeBit(t,oe)}function be(t){return this.changeBit(t,ce)}function Fe(t){return this.changeBit(t,ae)}function we(t,e){for(var r=this,n=0,i=0,o=Math.min(t.t,r.t);o>n;)i+=r[n]+t[n],e[n++]=i&r.DM,i>>=r.DB;
if(t.t<r.t){for(i+=t.s;n<r.t;)i+=r[n],e[n++]=i&r.DM,i>>=r.DB;i+=r.s}else{for(i+=r.s;n<t.t;)i+=t[n],e[n++]=i&r.DM,i>>=r.DB;i+=t.s}e.s=0>i?-1:0,i>0?e[n++]=i:-1>i&&(e[n++]=r.DV+i),e.t=n,e.clamp()}function _e(t){var e=n();return this.addTo(t,e),e}function Se(t){var e=n();return this.subTo(t,e),e}function ke(t){var e=n();return this.multiplyTo(t,e),e}function Ee(){var t=n();return this.squareTo(t),t}function De(t){var e=n();return this.divRemTo(t,e,null),e}function Ae(t){var e=n();return this.divRemTo(t,null,e),e}function Te(t){var e=n(),r=n();return this.divRemTo(t,e,r),new Array(e,r)}function Ce(t){this[this.t]=this.am(0,t-1,this,0,0,this.t),++this.t,this.clamp()}function xe(t,e){if(0!=t){for(;this.t<=e;)this[this.t++]=0;for(this[e]+=t;this[e]>=this.DV;)this[e]-=this.DV,++e>=this.t&&(this[this.t++]=0),++this[e]}}function Oe(){}function Ie(t){return t}function Ue(t,e,r){t.multiplyTo(e,r)}function Me(t,e){t.squareTo(e)}function Ne(t){return this.exp(t,new Oe)}function Re(t,e,r){var n=Math.min(this.t+t.t,e);for(r.s=0,r.t=n;n>0;)r[--n]=0;var i;for(i=r.t-this.t;i>n;++n)r[n+this.t]=this.am(0,t[n],r,n,0,this.t);for(i=Math.min(t.t,e);i>n;++n)this.am(0,t[n],r,n,0,e-n);r.clamp()}function He(t,e,r){--e;var n=r.t=this.t+t.t-e;for(r.s=0;--n>=0;)r[n]=0;for(n=Math.max(e-this.t,0);n<t.t;++n)r[this.t+n-e]=this.am(e-n,t[n],r,0,0,this.t+n-e);r.clamp(),r.drShiftTo(1,r)}function Le(t){this.r2=n(),this.q3=n(),r.ONE.dlShiftTo(2*t.t,this.r2),this.mu=this.r2.divide(t),this.m=t}function je(t){if(t.s<0||t.t>2*this.m.t)return t.mod(this.m);if(t.compareTo(this.m)<0)return t;var e=n();return t.copyTo(e),this.reduce(e),e}function ze(t){return t}function qe(t){var e=this;for(t.drShiftTo(e.m.t-1,e.r2),t.t>e.m.t+1&&(t.t=e.m.t+1,t.clamp()),e.mu.multiplyUpperTo(e.r2,e.m.t+1,e.q3),e.m.multiplyLowerTo(e.q3,e.m.t+1,e.r2);t.compareTo(e.r2)<0;)t.dAddOffset(1,e.m.t+1);for(t.subTo(e.r2,t);t.compareTo(e.m)>=0;)t.subTo(e.m,t)}function Ke(t,e){t.squareTo(e),this.reduce(e)}function Ve(t,e,r){t.multiplyTo(e,r),this.reduce(r)}function Ge(t,e){var r,i,o=t.bitLength(),s=c(1);if(0>=o)return s;r=18>o?1:48>o?3:144>o?4:768>o?5:6,i=8>o?new E(e):e.isEven()?new Le(e):new I(e);var a=new Array,u=3,f=r-1,h=(1<<r)-1;if(a[1]=i.convert(this),r>1){var l=n();for(i.sqrTo(a[1],l);h>=u;)a[u]=n(),i.mulTo(l,a[u-2],a[u]),u+=2}var p,d,g=t.t-1,v=!0,B=n();for(o=y(t[g])-1;g>=0;){for(o>=f?p=t[g]>>o-f&h:(p=(t[g]&(1<<o+1)-1)<<f-o,g>0&&(p|=t[g-1]>>this.DB+o-f)),u=r;0==(1&p);)p>>=1,--u;if((o-=u)<0&&(o+=this.DB,--g),v)a[p].copyTo(s),v=!1;else{for(;u>1;)i.sqrTo(s,B),i.sqrTo(B,s),u-=2;u>0?i.sqrTo(s,B):(d=s,s=B,B=d),i.mulTo(B,a[p],s)}for(;g>=0&&0==(t[g]&1<<o);)i.sqrTo(s,B),d=s,s=B,B=d,--o<0&&(o=this.DB-1,--g)}return i.revert(s)}function Je(t){var e=this.s<0?this.negate():this.clone(),r=t.s<0?t.negate():t.clone();if(e.compareTo(r)<0){var n=e;e=r,r=n}var i=e.getLowestSetBit(),o=r.getLowestSetBit();if(0>o)return e;for(o>i&&(o=i),o>0&&(e.rShiftTo(o,e),r.rShiftTo(o,r));e.signum()>0;)(i=e.getLowestSetBit())>0&&e.rShiftTo(i,e),(i=r.getLowestSetBit())>0&&r.rShiftTo(i,r),e.compareTo(r)>=0?(e.subTo(r,e),e.rShiftTo(1,e)):(r.subTo(e,r),r.rShiftTo(1,r));return o>0&&r.lShiftTo(o,r),r}function We(t){if(0>=t)return 0;var e=this.DV%t,r=this.s<0?t-1:0;if(this.t>0)if(0==e)r=this[0]%t;else for(var n=this.t-1;n>=0;--n)r=(e*r+this[n])%t;return r}function Ze(t){var e=t.isEven();if(this.isEven()&&e||0==t.signum())return r.ZERO;for(var n=t.clone(),i=this.clone(),o=c(1),s=c(0),a=c(0),u=c(1);0!=n.signum();){for(;n.isEven();)n.rShiftTo(1,n),e?(o.isEven()&&s.isEven()||(o.addTo(this,o),s.subTo(t,s)),o.rShiftTo(1,o)):s.isEven()||s.subTo(t,s),s.rShiftTo(1,s);for(;i.isEven();)i.rShiftTo(1,i),e?(a.isEven()&&u.isEven()||(a.addTo(this,a),u.subTo(t,u)),a.rShiftTo(1,a)):u.isEven()||u.subTo(t,u),u.rShiftTo(1,u);n.compareTo(i)>=0?(n.subTo(i,n),e&&o.subTo(a,o),s.subTo(u,s)):(i.subTo(n,i),e&&a.subTo(o,a),u.subTo(s,u))}return 0!=i.compareTo(r.ONE)?r.ZERO:u.compareTo(t)>=0?u.subtract(t):u.signum()<0?(u.addTo(t,u),u.signum()<0?u.add(t):u):u}var Qe,Xe=r.prototype;r.prototype.am=i,Qe=26,r.prototype.DB=Qe,r.prototype.DM=(1<<Qe)-1;var Ye=r.prototype.DV=1<<Qe,$e=52;r.prototype.FV=Math.pow(2,$e),r.prototype.F1=$e-Qe,r.prototype.F2=2*Qe-$e;var tr,er,rr="0123456789abcdefghijklmnopqrstuvwxyz",nr=new Array;for(tr="0".charCodeAt(0),er=0;9>=er;++er)nr[tr++]=er;for(tr="a".charCodeAt(0),er=10;36>er;++er)nr[tr++]=er;for(tr="A".charCodeAt(0),er=10;36>er;++er)nr[tr++]=er;E.prototype.convert=D,E.prototype.revert=A,E.prototype.reduce=T,E.prototype.mulTo=C,E.prototype.sqrTo=x,I.prototype.convert=U,I.prototype.revert=M,I.prototype.reduce=N,I.prototype.mulTo=H,I.prototype.sqrTo=R,Xe.copyTo=a,Xe.fromInt=u,Xe.fromString=f,Xe.clamp=h,Xe.dlShiftTo=B,Xe.drShiftTo=m,Xe.lShiftTo=P,Xe.rShiftTo=b,Xe.subTo=F,Xe.multiplyTo=w,Xe.squareTo=_,Xe.divRemTo=S,Xe.invDigit=O,Xe.isEven=L,Xe.exp=j,Xe.toString=l,Xe.negate=p,Xe.abs=d,Xe.compareTo=g,Xe.bitLength=v,Xe.mod=k,Xe.modPowInt=z,Oe.prototype.convert=Ie,Oe.prototype.revert=Ie,Oe.prototype.mulTo=Ue,Oe.prototype.sqrTo=Me,Le.prototype.convert=je,Le.prototype.revert=ze,Le.prototype.reduce=qe,Le.prototype.mulTo=Ve,Le.prototype.sqrTo=Ke,Xe.chunkSize=J,Xe.toRadix=Z,Xe.fromRadix=Q,Xe.fromNumber=X,Xe.bitwiseTo=re,Xe.changeBit=me,Xe.addTo=we,Xe.dMultiply=Ce,Xe.dAddOffset=xe,Xe.multiplyLowerTo=Re,Xe.multiplyUpperTo=He,Xe.modInt=We,Xe.clone=q,Xe.intValue=K,Xe.byteValue=V,Xe.shortValue=G,Xe.signum=W,Xe.toByteArray=Y,Xe.equals=$,Xe.min=te,Xe.max=ee,Xe.and=ie,Xe.or=se,Xe.xor=ue,Xe.andNot=fe,Xe.not=he,Xe.shiftLeft=le,Xe.shiftRight=pe,Xe.getLowestSetBit=ge,Xe.bitCount=ve,Xe.testBit=Be,Xe.setBit=Pe,Xe.clearBit=be,Xe.flipBit=Fe,Xe.add=_e,Xe.subtract=Se,Xe.multiply=ke,Xe.divide=De,Xe.remainder=Ae,Xe.divideAndRemainder=Te,Xe.modPow=Ge,Xe.modInverse=Ze,Xe.pow=Ne,Xe.gcd=Je,Xe.square=Ee,r.ZERO=c(0),r.ONE=c(1),r.valueOf=c,r.fromByteArrayUnsigned=function(e){return t.isBuffer(e)&&(e=Array.prototype.map.bind(e,function(t){return t})()),e.length?new r(128&e[0]?[0].concat(e):e):new r.valueOf(0)},r.fromByteArraySigned=function(t){return 128&t[0]?(t[0]&=127,r.fromByteArrayUnsigned(t).negate()):r.fromByteArrayUnsigned(t)},r.prototype.toByteArrayUnsigned=function(){var t=this.abs().toByteArray();if(!t.length)return t;0===t[0]&&(t=t.slice(1));for(var e=0;e<t.length;++e)t[e]=t[e]<0?t[e]+256:t[e];return t},r.prototype.toByteArraySigned=function(){var t=this.toByteArrayUnsigned(),e=this.s<0;return 128&t[0]?t.unshift(e?128:0):e&&(t[0]|=128),t},e.exports=r}).call(this,t("buffer").Buffer)},{buffer:5}],64:[function(t,e){function r(t,e,r,n){this.curve=t,this.g=e,this.n=r,this.h=n}function n(){return this.curve}function i(){return this.g}function o(){return this.n}function s(){return this.h}function a(t){return new B(t,16)}function u(){var t=a("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFF"),e=a("FFFFFFFDFFFFFFFFFFFFFFFFFFFFFFFC"),n=a("E87579C11079F43DD824993C2CEE5ED3"),i=a("FFFFFFFE0000000075A30D1B9038A115"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("04161FF7528B899B2D0C28607CA52C5B86CF5AC8395BAFEB13C02DA292DDED7A83");return new r(s,u,i,o)}function c(){var t=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFAC73"),e=B.ZERO,n=a("7"),i=a("0100000000000000000001B8FA16DFAB9ACA16B6B3"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("043B4C382CE37AA192A4019E763036F4F5DD4D7EBB938CF935318FDCED6BC28286531733C3F03C4FEE");return new r(s,u,i,o)}function f(){var t=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFF"),e=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF7FFFFFFC"),n=a("1C97BEFC54BD7A8B65ACF89F81D4D4ADC565FA45"),i=a("0100000000000000000001F4C8F927AED3CA752257"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("044A96B5688EF573284664698968C38BB913CBFC8223A628553168947D59DCC912042351377AC5FB32");return new r(s,u,i,o)}function h(){var t=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFEE37"),e=B.ZERO,n=a("3"),i=a("FFFFFFFFFFFFFFFFFFFFFFFE26F2FC170F69466A74DEFD8D"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("04DB4FF10EC057E9AE26B07D0280B7F4341DA5D1B1EAE06C7D9B2F2F6D9C5628A7844163D015BE86344082AA88D95E2F9D");return new r(s,u,i,o)}function l(){var t=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFF"),e=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFC"),n=a("64210519E59C80E70FA7E9AB72243049FEB8DEECC146B9B1"),i=a("FFFFFFFFFFFFFFFFFFFFFFFF99DEF836146BC9B1B4D22831"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("04188DA80EB03090F67CBF20EB43A18800F4FF0AFD82FF101207192B95FFC8DA78631011ED6B24CDD573F977A11E794811");return new r(s,u,i,o)}function p(){var t=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFF000000000000000000000001"),e=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFFFFFFFFFFFFFFFFFFFE"),n=a("B4050A850C04B3ABF54132565044B0B7D7BFD8BA270B39432355FFB4"),i=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFF16A2E0B8F03E13DD29455C5C2A3D"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("04B70E0CBD6BB4BF7F321390B94A03C1D356C21122343280D6115C1D21BD376388B5F723FB4C22DFE6CD4375A05A07476444D5819985007E34");return new r(s,u,i,o)}function d(){var t=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEFFFFFC2F"),e=B.ZERO,n=a("7"),i=a("FFFFFFFFFFFFFFFFFFFFFFFFFFFFFFFEBAAEDCE6AF48A03BBFD25E8CD0364141"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("0479BE667EF9DCBBAC55A06295CE870B07029BFCDB2DCE28D959F2815B16F81798483ADA7726A3C4655DA4FBFC0E1108A8FD17B448A68554199C47D08FFB10D4B8");return new r(s,u,i,o)}function g(){var t=a("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFF"),e=a("FFFFFFFF00000001000000000000000000000000FFFFFFFFFFFFFFFFFFFFFFFC"),n=a("5AC635D8AA3A93E7B3EBBD55769886BC651D06B0CC53B0F63BCE3C3E27D2604B"),i=a("FFFFFFFF00000000FFFFFFFFFFFFFFFFBCE6FAADA7179E84F3B9CAC2FC632551"),o=B.ONE,s=new v(t,e,n),u=s.decodePointHex("046B17D1F2E12C4247F8BCE6E563A440F277037D812DEB33A0F4A13945D898C2964FE342E2FE1A7F9B8EE7EB4A7C0F9E162BCE33576B315ECECBB6406837BF51F5");return new r(s,u,i,o)}function y(t){return"secp128r1"==t?u():"secp160k1"==t?c():"secp160r1"==t?f():"secp192k1"==t?h():"secp192r1"==t?l():"secp224r1"==t?p():"secp256k1"==t?d():"secp256r1"==t?g():null}var v=t("./ec"),B=t("./jsbn");r.prototype.getCurve=n,r.prototype.getG=i,r.prototype.getN=o,r.prototype.getH=s,e.exports=y},{"./ec":62,"./jsbn":63}],65:[function(t,e){function r(t){var e=s.stringToBytes(t),r=[].concat(s.numToVarInt(f.length),f,s.numToVarInt(e.length),e);return s.wordArrayToBytes(c(c(s.bytesToWordArray(r))))}function n(t,e){var n=r(e),i=t.sign(n),o=a.parseSig(i),s=a.calcPubKeyRecoveryParam(t.getPub().pub,o.r,o.s,n);s+=27,t.compressed&&(s+=4);for(var u=o.r.toByteArrayUnsigned(),c=o.s.toByteArrayUnsigned();u.length<32;)u.unshift(0);for(;c.length<32;)c.unshift(0);return i=[s].concat(u,c)}function i(t,e,n){e=a.parseSigCompact(e);var i=new u(a.recoverPubKey(e.r,e.s,r(n),e.i)),s=!!(4&e.i);return i.compressed=s,t=new o(t),i.getAddress(t.version).toString()===t.toString()}var o=t("./address"),s=t("./convert"),a=t("./ecdsa"),u=t("./eckey").ECPubKey,c=t("crypto-js/sha256"),f=s.stringToBytes("Bitcoin Signed Message:\n");e.exports={magicHash:r,sign:n,verify:i}},{"./address":54,"./convert":57,"./ecdsa":58,"./eckey":59,"crypto-js/sha256":47}],66:[function(t,e){e.exports={mainnet:{addressVersion:0,p2shVersion:5,hdVersions:{pub:76067358,priv:76066276}},testnet:{addressVersion:111,p2shVersion:196,hdVersions:{pub:70617039,priv:70615956}}}},{}],67:[function(t,e){var r={map:{OP_0:0,OP_FALSE:0,OP_PUSHDATA1:76,OP_PUSHDATA2:77,OP_PUSHDATA4:78,OP_1NEGATE:79,OP_RESERVED:80,OP_1:81,OP_TRUE:81,OP_2:82,OP_3:83,OP_4:84,OP_5:85,OP_6:86,OP_7:87,OP_8:88,OP_9:89,OP_10:90,OP_11:91,OP_12:92,OP_13:93,OP_14:94,OP_15:95,OP_16:96,OP_NOP:97,OP_VER:98,OP_IF:99,OP_NOTIF:100,OP_VERIF:101,OP_VERNOTIF:102,OP_ELSE:103,OP_ENDIF:104,OP_VERIFY:105,OP_RETURN:106,OP_TOALTSTACK:107,OP_FROMALTSTACK:108,OP_2DROP:109,OP_2DUP:110,OP_3DUP:111,OP_2OVER:112,OP_2ROT:113,OP_2SWAP:114,OP_IFDUP:115,OP_DEPTH:116,OP_DROP:117,OP_DUP:118,OP_NIP:119,OP_OVER:120,OP_PICK:121,OP_ROLL:122,OP_ROT:123,OP_SWAP:124,OP_TUCK:125,OP_CAT:126,OP_SUBSTR:127,OP_LEFT:128,OP_RIGHT:129,OP_SIZE:130,OP_INVERT:131,OP_AND:132,OP_OR:133,OP_XOR:134,OP_EQUAL:135,OP_EQUALVERIFY:136,OP_RESERVED1:137,OP_RESERVED2:138,OP_1ADD:139,OP_1SUB:140,OP_2MUL:141,OP_2DIV:142,OP_NEGATE:143,OP_ABS:144,OP_NOT:145,OP_0NOTEQUAL:146,OP_ADD:147,OP_SUB:148,OP_MUL:149,OP_DIV:150,OP_MOD:151,OP_LSHIFT:152,OP_RSHIFT:153,OP_BOOLAND:154,OP_BOOLOR:155,OP_NUMEQUAL:156,OP_NUMEQUALVERIFY:157,OP_NUMNOTEQUAL:158,OP_LESSTHAN:159,OP_GREATERTHAN:160,OP_LESSTHANOREQUAL:161,OP_GREATERTHANOREQUAL:162,OP_MIN:163,OP_MAX:164,OP_WITHIN:165,OP_RIPEMD160:166,OP_SHA1:167,OP_SHA256:168,OP_HASH160:169,OP_HASH256:170,OP_CODESEPARATOR:171,OP_CHECKSIG:172,OP_CHECKSIGVERIFY:173,OP_CHECKMULTISIG:174,OP_CHECKMULTISIGVERIFY:175,OP_NOP1:176,OP_NOP2:177,OP_NOP3:178,OP_NOP4:179,OP_NOP5:180,OP_NOP6:181,OP_NOP7:182,OP_NOP8:183,OP_NOP9:184,OP_NOP10:185,OP_PUBKEYHASH:253,OP_PUBKEY:254,OP_INVALIDOPCODE:255},reverseMap:[]};for(var n in r.map)r.reverseMap[r.map[n]]=n;e.exports=r},{}],68:[function(t,e){(function(r){var n=t("./opcode"),i=t("./util"),o=t("./convert"),s=t("./address"),a=t("./network"),u=function(t){if(this.buffer=t||[],!Array.isArray(this.buffer))throw new Error("expect Script to be initialized with Array, but got "+t);this.parse()};u.fromHex=function(t){return new u(o.hexToBytes(t))},u.fromPubKey=function(t){var e=new u,r=t.split(" ");for(var i in r)n.map.hasOwnProperty(r[i])?e.writeOp(n.map[r[i]]):e.writeBytes(o.hexToBytes(r[i]));return e},u.fromScriptSig=function(t){var e=new u,r=t.split(" ");for(var i in r)n.map.hasOwnProperty(r[i])?e.writeOp(n.map[r[i]]):e.writeBytes(o.hexToBytes(r[i]));return e},u.prototype.parse=function(){function t(t){e.chunks.push(e.buffer.slice(r,r+t)),r+=t}var e=this;this.chunks=[];for(var r=0;r<this.buffer.length;){var i=this.buffer[r++];i>=240&&(i=i<<8|this.buffer[r++]);var o;i>0&&i<n.map.OP_PUSHDATA1?t(i):i==n.map.OP_PUSHDATA1?(o=this.buffer[r++],t(o)):i==n.map.OP_PUSHDATA2?(o=this.buffer[r++]<<8|this.buffer[r++],t(o)):i==n.map.OP_PUSHDATA4?(o=this.buffer[r++]<<24|this.buffer[r++]<<16|this.buffer[r++]<<8|this.buffer[r++],t(o)):this.chunks.push(i)}},u.prototype.getOutType=function(){return this.chunks[this.chunks.length-1]==n.map.OP_EQUAL&&this.chunks[0]==n.map.OP_HASH160&&3==this.chunks.length?"P2SH":5==this.chunks.length&&this.chunks[0]==n.map.OP_DUP&&this.chunks[1]==n.map.OP_HASH160&&this.chunks[3]==n.map.OP_EQUALVERIFY&&this.chunks[4]==n.map.OP_CHECKSIG?"Pubkey":"Strange"},u.prototype.toScriptHash=function(){var t=this.getOutType();return"Pubkey"==t?this.chunks[2]:i.sha256ripe160("P2SH"==t?this.buffer:this.buffer)},u.prototype.getToAddress=function(){var t=this.getOutType();return"Pubkey"==t?new s(this.chunks[2]):"P2SH"==t?new s(this.chunks[1],5):new s(this.chunks[1],5)},u.prototype.getFromAddress=function(){return new s(this.simpleInHash())},u.prototype.getInType=function(){return 1==this.chunks.length&&Array.isArray(this.chunks[0])?"Pubkey":2==this.chunks.length&&Array.isArray(this.chunks[0])&&Array.isArray(this.chunks[1])?"Address":this.chunks[0]==n.map.OP_0&&this.chunks.slice(1).reduce(function(t,e,r){return t&&Array.isArray(e)&&(48==e[0]||r==this.chunks.length-1)},!0)?"Multisig":"Strange"},u.prototype.simpleInPubKey=function(){switch(this.getInType()){case"Address":return this.chunks[1];case"Pubkey":throw new Error("Script does not contain pubkey");default:throw new Error("Encountered non-standard scriptSig")}},u.prototype.simpleInHash=function(){return i.sha256ripe160(this.simpleInPubKey())},u.prototype.simpleInPubKeyHash=u.prototype.simpleInHash,u.prototype.writeOp=function(t){this.buffer.push(t),this.chunks.push(t)},u.prototype.writeBytes=function(t){r.isBuffer(t)&&(t=Array.prototype.map.bind(t,function(t){return t})()),t.length<n.map.OP_PUSHDATA1?this.buffer.push(t.length):t.length<=255?(this.buffer.push(n.map.OP_PUSHDATA1),this.buffer.push(t.length)):t.length<=65535?(this.buffer.push(n.map.OP_PUSHDATA2),this.buffer.push(255&t.length),this.buffer.push(t.length>>>8&255)):(this.buffer.push(n.map.OP_PUSHDATA4),this.buffer.push(255&t.length),this.buffer.push(t.length>>>8&255),this.buffer.push(t.length>>>16&255),this.buffer.push(t.length>>>24&255)),this.buffer=this.buffer.concat(t),this.chunks.push(t)},u.createOutputScript=function(t){var e=new u;return t=new s(t),t.version==a.mainnet.p2shVersion||t.version==a.testnet.p2shVersion?(e.writeOp(n.map.OP_HASH160),e.writeBytes(t.hash),e.writeOp(n.map.OP_EQUAL)):(e.writeOp(n.map.OP_DUP),e.writeOp(n.map.OP_HASH160),e.writeBytes(t.hash),e.writeOp(n.map.OP_EQUALVERIFY),e.writeOp(n.map.OP_CHECKSIG)),e},u.prototype.extractPubkeys=function(){return this.chunks.filter(function(t){return 4==t[0]&&65==t.length||t[0]<4&&33==t.length})},u.createMultiSigOutputScript=function(t,e){var r=new u;e=e.sort(),r.writeOp(n.map.OP_1+t-1);for(var i=0;i<e.length;++i)r.writeBytes(e[i]);return r.writeOp(n.map.OP_1+e.length-1),r.writeOp(n.map.OP_CHECKMULTISIG),r},u.createInputScript=function(t,e){var r=new u;return r.writeBytes(t),r.writeBytes(e),r},u.createMultiSigInputScript=function(t,e){e=new u(e);var r=e.chunks[0][0];if(t.length<r)return!1;var i=new u;return i.writeOp(n.map.OP_0),t.map(function(t){i.writeBytes(t)}),i.writeBytes(e.buffer),i},u.prototype.clone=function(){return new u(this.buffer)},e.exports=u}).call(this,t("buffer").Buffer)},{"./address":54,"./convert":57,"./network":66,"./opcode":67,"./util":70,buffer:5}],69:[function(t,e){var r=t("./jsbn/jsbn"),n=t("./script"),i=t("./util"),o=t("./convert"),s=t("./eckey").ECKey,a=t("./ecdsa"),u=t("./address"),c=t("crypto-js/sha256"),f=function(t){return this instanceof f?(this.version=1,this.locktime=0,this.ins=[],this.outs=[],this.defaultSequence=[255,255,255,255],void(t&&(("string"==typeof t||Array.isArray(t))&&(t=f.deserialize(t)),t.hash&&(this.hash=t.hash),t.version&&(this.version=t.version),t.locktime&&(this.locktime=t.locktime),t.ins&&t.ins.length&&t.ins.forEach(function(t){this.addInput(new d(t))},this),t.outs&&t.outs.length&&t.outs.forEach(function(t){this.addOutput(new g(t))},this),this.hash=this.hash||this.getHash()))):new f(t)};f.prototype.addInput=function(t,e){if(arguments[0]instanceof d)this.ins.push(arguments[0]);else{if(arguments[0].length>65){var r=arguments[0].split(":");return this.addInput(r[0],r[1])}var i="string"==typeof t?t:t.hash;i=Array.isArray(i)?o.bytesToHex(i):i,this.ins.push(new d({outpoint:{hash:i,index:e},script:new n,sequence:this.defaultSequence}))}},f.prototype.addOutput=function(t,e){if(arguments[0]instanceof g)return void this.outs.push(arguments[0]);if(arguments[0].indexOf(":")>=0){var r=arguments[0].split(":");t=r[0],e=parseInt(r[1])}this.outs.push(new g({value:e,script:n.createOutputScript(t)}))},f.prototype.serialize=function(){var t=[];return t=t.concat(o.numToBytes(parseInt(this.version),4)),t=t.concat(o.numToVarInt(this.ins.length)),this.ins.forEach(function(e){t=t.concat(o.hexToBytes(e.outpoint.hash).reverse()),t=t.concat(o.numToBytes(parseInt(e.outpoint.index),4));var r=e.script.buffer;t=t.concat(o.numToVarInt(r.length)),t=t.concat(r),t=t.concat(e.sequence)}),t=t.concat(o.numToVarInt(this.outs.length)),this.outs.forEach(function(e){t=t.concat(o.numToBytes(e.value,8));var r=e.script.buffer;t=t.concat(o.numToVarInt(r.length)),t=t.concat(r)}),t=t.concat(o.numToBytes(parseInt(this.locktime),4))},f.prototype.serializeHex=function(){return o.bytesToHex(this.serialize())};var h=1,l=2,p=80;f.prototype.hashTransactionForSignature=function(t,e,r){var i=this.clone();i.ins.forEach(function(t){t.script=new n}),i.ins[e].script=t,(31&r)==l&&(i.outs=[],i.ins.forEach(function(t,r){r!=e&&(i.ins[r].sequence=0)})),r&p&&(i.ins=[i.ins[e]]);var s=i.serialize();return s=s.concat(o.numToBytes(parseInt(r),4)),s=o.bytesToWordArray(s),o.wordArrayToBytes(c(c(s)))},f.prototype.getHash=function(){var t=o.bytesToWordArray(this.serialize());return o.wordArrayToBytes(c(c(t))).reverse()},f.prototype.clone=function(){var t=new f;return t.version=this.version,t.locktime=this.locktime,this.ins.forEach(function(e){t.addInput(e.clone())}),this.outs.forEach(function(e){t.addOutput(e.clone())}),t},f.deserialize=function(t){"string"==typeof t&&(t=o.hexToBytes(t));var e=0,r=function(n){return 0===n?0:(e++,t[e-1]+256*r(n-1))},i=function(){var r=t.slice(e,e+9),n=o.varIntToNum(r);return e+=n.bytes.length,n.number},s=function(r){return e+=r,t.slice(e-r,e)},a=function(){var t=i();return s(t)},u={ins:[],outs:[]};u.version=r(4);var c,h=i();for(c=0;h>c;c++)u.ins.push({outpoint:{hash:o.bytesToHex(s(32).reverse()),index:r(4)},script:new n(a()),sequence:s(4)});var l=i();for(c=0;l>c;c++)u.outs.push({value:o.bytesToNum(s(8)),script:new n(a())});return u.locktime=r(4),new f(u)},f.prototype.sign=function(t,e,r){r=r||h,e=new s(e);var o=e.getPub().toBytes(),a=i.sha256ripe160(o),c=n.createOutputScript(new u(a)),f=this.hashTransactionForSignature(c,t,r),l=e.sign(f).concat([r]);this.ins[t].script=n.createInputScript(l,o)},f.prototype.signWithKeys=function(t,e,r){r=r||h;var n=t.map(function(t){return t=new s(t),{key:t,address:t.getAddress().toString()}}),i={};e.forEach(function(t){i[t.output]=t});for(var o=0;o<this.ins.length;o++){var a=this.ins[o].outpoint.hash+":"+this.ins[o].outpoint.index,u=i[a];if(u){var c=n.filter(function(t){return t.address==u.address});0!==c.length&&this.sign(o,c[0].key)}}},f.prototype.p2shsign=function(t,e,r,i){e=new n(e),r=new s(r),i=i||h;var o=this.hashTransactionForSignature(e,t,i),a=r.sign(o).concat([i]);return a},f.prototype.multisign=f.prototype.p2shsign,f.prototype.applyMultisigs=function(t,e,r){this.ins[t].script=n.createMultiSigInputScript(r,e)},f.prototype.validateSig=function(t,e,r,i){e=new n(e);var s=this.hashTransactionForSignature(e,t,1);return a.verify(s,o.coerceToBytes(r),o.coerceToBytes(i))},f.feePerKb=2e4,f.prototype.estimateFee=function(t){var e=180,r=34,n=34;void 0==t&&(t=f.feePerKb);var i=this.ins.length*e+this.outs.length*r+n;return t*Math.ceil(i/1e3)};var d=function(t){this.outpoint="string"==typeof t?{hash:t.split(":")[0],index:t.split(":")[1]}:t.outpoint?t.outpoint:{hash:t.hash,index:t.index},this.script=t.scriptSig?n.fromScriptSig(t.scriptSig):t.script?t.script:new n(t.script),this.sequence=t.sequence||this.defaultSequence};d.prototype.clone=function(){return new d({outpoint:{hash:this.outpoint.hash,index:this.outpoint.index},script:this.script.clone(),sequence:this.sequence})};var g=function(t){this.script=t.script instanceof n?t.script.clone():Array.isArray(t.script)?new n(t.script):"string"==typeof t.script?new n(o.hexToBytes(t.script)):t.scriptPubKey?n.fromScriptSig(t.scriptPubKey):t.address?n.createOutputScript(t.address):new n,this.script.buffer.length>0&&(this.address=this.script.getToAddress()),this.value=Array.isArray(t.value)?o.bytesToNum(t.value):"string"==typeof t.value?parseInt(t.value):t.value instanceof r?parseInt(t.value.toString()):t.value};g.prototype.clone=function(){var t=new g({script:this.script.clone(),value:this.value});return t},g.prototype.scriptPubKey=function(){return o.bytesToHex(this.script.buffer)},e.exports={Transaction:f,TransactionIn:d,TransactionOut:g}},{"./address":54,"./convert":57,"./ecdsa":58,"./eckey":59,"./jsbn/jsbn":63,"./script":68,"./util":70,"crypto-js/sha256":47}],70:[function(t,e,r){var n=t("./convert.js"),i=t("crypto-js"),o=i.RIPEMD160,s=i.SHA256;r.sha256ripe160=function(t){var e=o(s(n.bytesToWordArray(t)));return n.wordArrayToBytes(e)},r.error=function(t){throw new Error(t)}},{"./convert.js":57,"crypto-js":27}],71:[function(t,e){(function(r){function n(t,e){function u(t){var e=t.receive.split(":");return{hash:e[0],hashLittleEndian:i.reverseEndian(e[0]),outputIndex:parseInt(e[1]),address:t.address,value:t.value}}function c(t){var e=t.hash||i.reverseEndian(t.hashLittleEndian),r=e+":"+t.outputIndex;return{receive:r,address:t.address,value:t.value}}function f(t){var e;h(t.hash)&&h(t.hashLittleEndian)&&(e="hash(or hashLittleEndian)");var r=["outputIndex","address","value"];if(r.forEach(function(r){h(t[r])&&(e=r)}),e){var n=["Invalid unspent output: key",e,"is missing.","A valid unspent output must contain"];throw n.push(r.join(", ")),n.push("and hash(or hashLittleEndian)"),new Error(n.join(" "))}}function h(t){return void 0==t}function l(t){return t<=w.dustThreshold}function p(t){if(h(t)||l(t))throw new Error("Value must be above dust threshold")}function d(){var t=[];for(var e in w.outputs){var r=w.outputs[e];r.spend||t.push(r)}var n=t.sort(function(t,e){return e.value-t.value});return n}function g(t){var e=t.clone();return e.addOutput(y(),0),e.estimateFee()}function y(){return 0===w.changeAddresses.length&&w.generateChangeAddress(),w.changeAddresses[w.changeAddresses.length-1]}function v(t,e,r){if(e+r>t)throw new Error("Not enough money to send funds including transaction fee. Have: "+t+", needed: "+(e+r))}function B(t){return w.addresses.indexOf(t)>-1}function m(t){return w.changeAddresses.indexOf(t)>-1}function P(t){return B(t)||m(t)}if(!(this instanceof n))return new n(t,e);var e=e||{},b=e.network||"mainnet",F=null,w=this,_=null,S=null,k=null;this.addresses=[],this.changeAddresses=[],this.outputs={},this.newMasterKey=function(t,e){t||(t=a(32,{array:!0})),F=new s(t,e),_=F.derivePrivate(0),k=_.derive(0),S=_.derive(1),w.addresses=[],w.changeAddresses=[],w.outputs={}},this.newMasterKey(t,b),this.generateAddress=function(){var t=k.derive(this.addresses.length);return this.addresses.push(t.getAddress().toString()),this.addresses[this.addresses.length-1]},this.generateChangeAddress=function(){var t=S.derive(this.changeAddresses.length);return this.changeAddresses.push(t.getAddress().toString()),this.changeAddresses[this.changeAddresses.length-1]},this.getBalance=function(){return this.getUnspentOutputs().reduce(function(t,e){return t+e.value},0)},this.getUnspentOutputs=function(){var t=[];for(var e in this.outputs){var r=this.outputs[e];r.spend||t.push(u(r))}return t},this.setUnspentOutputs=function(t){var e={};t.forEach(function(t){f(t);var r=c(t);e[r.receive]=r}),this.outputs=e},this.setUnspentOutputsAsync=function(t,e){var n=null;try{this.setUnspentOutputs(t)}catch(i){n=i}finally{r.nextTick(function(){e(n)})}},this.processTx=function(t){var e=i.bytesToHex(t.getHash());t.outs.forEach(function(t,r){var n=t.address.toString();if(P(n)){var i=e+":"+r;w.outputs[i]={receive:i,value:t.value,address:n}}}),t.ins.forEach(function(t,r){var n=t.outpoint,i=w.outputs[n.hash+":"+n.index];i&&(i.spend=e+":"+r)})},this.createTx=function(t,e,r){p(e);var n=new o;n.addOutput(t,e);for(var i=d(e),s=0,a=0;a<i.length;a++){var u=i[a];if(n.addInput(u.receive),s+=u.value,!(e>s)){var c=void 0==r?g(n):r;if(!(e+c>s)){var f=s-e-c;f>0&&!l(f)&&n.addOutput(y(),f);break}}}return v(s,e,c),this.sign(n),n},this.createTxAsync=function(t,e,n,i){n instanceof Function&&(i=n,n=void 0);var o=null,s=null;try{o=this.createTx(t,e,n)}catch(a){s=a}finally{r.nextTick(function(){i(s,o)})}},this.dustThreshold=5430,this.sign=function(t){return t.ins.forEach(function(e,r){var n=w.outputs[e.outpoint.hash+":"+e.outpoint.index];n&&t.sign(r,w.getPrivateKeyForAddress(n.address))}),t},this.getMasterKey=function(){return F},this.getAccountZero=function(){return _},this.getInternalAccount=function(){return S},this.getExternalAccount=function(){return k},this.getPrivateKey=function(t){return k.derive(t).priv},this.getInternalPrivateKey=function(t){return S.derive(t).priv},this.getPrivateKeyForAddress=function(t){var e;if((e=this.addresses.indexOf(t))>-1)return this.getPrivateKey(e);if((e=this.changeAddresses.indexOf(t))>-1)return this.getInternalPrivateKey(e);throw new Error("Unknown address. Make sure the address is from the keychain and has been generated.")}}var i=t("./convert"),o=t("./transaction").Transaction,s=t("./hdwallet.js"),a=t("secure-random");e.exports=n}).call(this,t("FWaASH"))},{"./convert":57,"./hdwallet.js":60,"./transaction":69,FWaASH:15,"secure-random":53}]},{},[61])(61)}),function(t){function e(){this._pieces=[],this._parts=[]}function r(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}function n(){this.bufferBuilder=new e}function i(t){var e=t.charCodeAt(0);return 2047>=e?"00":65535>=e?"000":2097151>=e?"0000":67108863>=e?"00000":"000000"}function o(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,i).length}function s(){this._events={}}function a(t,e){return this instanceof a?(this._dc=t,v.debug=e,this._outgoing={},this._incoming={},this._received={},this._window=1e3,this._mtu=500,this._interval=0,this._count=0,this._queue=[],void this._setupDC()):new a(t)}function u(t,e){if(!(this instanceof u))return new u(t,e);if(s.call(this),t&&t.constructor==Object?(e=t,t=void 0):t&&(t=t.toString()),e=v.extend({debug:0,host:v.CLOUD_HOST,port:v.CLOUD_PORT,key:"peerjs",path:"/",config:v.defaultConfig},e),this.options=e,"/"===e.host&&(e.host=l.location.hostname),"/"!==e.path[0]&&(e.path="/"+e.path),"/"!==e.path[e.path.length-1]&&(e.path+="/"),void 0===e.secure&&e.host!==v.CLOUD_HOST&&(e.secure=v.isSecure()),e.logFunction&&v.setLogFunction(e.logFunction),v.setLogLevel(e.debug),!v.supports.audioVideo&&!v.supports.data)return void this._delayedAbort("browser-incompatible","The current browser does not support WebRTC");if(!v.validateId(t))return void this._delayedAbort("invalid-id",'ID "'+t+'" is invalid');if(!v.validateKey(e.key))return void this._delayedAbort("invalid-key",'API KEY "'+e.key+'" is invalid');if(e.secure&&"0.peerjs.com"===e.host)return void this._delayedAbort("ssl-unavailable","The cloud server currently does not support HTTPS. Please run your own PeerServer to use HTTPS.");this.destroyed=!1,this.disconnected=!1,this.open=!1,this.connections={},this._lostMessages={};var r=this;this.socket=new h(this.options.secure,this.options.host,this.options.port,this.options.path,this.options.key),this.socket.on("message",function(t){r._handleMessage(t)}),this.socket.on("error",function(t){r._abort("socket-error",t)}),this.socket.on("close",function(){r.disconnected||r._abort("socket-closed","Underlying socket is already closed.")}),t?this._initialize(t):this._retrieveId()}function c(t,e,r){return this instanceof c?(s.call(this),this.options=v.extend({serialization:"binary",reliable:!1},r),this.open=!1,this.type="data",this.peer=t,this.provider=e,this.id=this.options.connectionId||c._idPrefix+v.randomToken(),this.label=this.options.label||this.id,this.metadata=this.options.metadata,this.serialization=this.options.serialization,this.reliable=this.options.reliable,this._buffer=[],this._buffering=!1,this.bufferSize=0,this._chunkedData={},this.options._payload&&(this._peerBrowser=this.options._payload.browser),void B.startConnection(this,this.options._payload||{originator:!0})):new c(t,e,r)}function f(t,e,r){return this instanceof f?(s.call(this),this.options=v.extend({},r),this.open=!1,this.type="media",this.peer=t,this.provider=e,this.metadata=this.options.metadata,this.localStream=this.options._stream,this.id=this.options.connectionId||f._idPrefix+v.randomToken(),void(this.localStream&&B.startConnection(this,{_stream:this.localStream,originator:!0}))):new f(t,e,r)}function h(t,e,r,n,i){if(!(this instanceof h))return new h(t,e,r,n,i);s.call(this),this.disconnected=!1,this._queue=[];var o=t?"https://":"http://",a=t?"wss://":"ws://";this._httpUrl=o+e+":"+r+n+i,this._wsUrl=a+e+":"+r+n+"peerjs?key="+i}if("undefined"==typeof l)var l={};var p={};p.useBlobBuilder=function(){try{return new Blob([]),!1}catch(t){return!0}}(),p.useArrayBufferView=!p.useBlobBuilder&&function(){try{return 0===new Blob([new Uint8Array([])]).size}catch(t){return!0}}(),t.binaryFeatures=p,t.BlobBuilder=l.WebKitBlobBuilder||l.MozBlobBuilder||l.MSBlobBuilder||l.BlobBuilder,e.prototype.append=function(t){"number"==typeof t?this._pieces.push(t):(this.flush(),this._parts.push(t))},e.prototype.flush=function(){if(this._pieces.length>0){var t=new Uint8Array(this._pieces);p.useArrayBufferView||(t=t.buffer),this._parts.push(t),this._pieces=[]}},e.prototype.getBuffer=function(){if(this.flush(),p.useBlobBuilder){for(var t=new BlobBuilder,e=0,r=this._parts.length;r>e;e++)t.append(this._parts[e]);return t.getBlob()}return new Blob(this._parts)},t.BinaryPack={unpack:function(t){var e=new r(t);return e.unpack()},pack:function(t){var e=new n;e.pack(t);var r=e.getBuffer();
return r}},r.prototype.unpack=function(){var t=this.unpack_uint8();if(128>t){var e=t;return e}if(32>(224^t)){var r=(224^t)-32;return r}var n;if((n=160^t)<=15)return this.unpack_raw(n);if((n=176^t)<=15)return this.unpack_string(n);if((n=144^t)<=15)return this.unpack_array(n);if((n=128^t)<=15)return this.unpack_map(n);switch(t){case 192:return null;case 193:return void 0;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return void 0;case 213:return void 0;case 214:return void 0;case 215:return void 0;case 216:return n=this.unpack_uint16(),this.unpack_string(n);case 217:return n=this.unpack_uint32(),this.unpack_string(n);case 218:return n=this.unpack_uint16(),this.unpack_raw(n);case 219:return n=this.unpack_uint32(),this.unpack_raw(n);case 220:return n=this.unpack_uint16(),this.unpack_array(n);case 221:return n=this.unpack_uint32(),this.unpack_array(n);case 222:return n=this.unpack_uint16(),this.unpack_map(n);case 223:return n=this.unpack_uint32(),this.unpack_map(n)}},r.prototype.unpack_uint8=function(){var t=255&this.dataView[this.index];return this.index++,t},r.prototype.unpack_uint16=function(){var t=this.read(2),e=256*(255&t[0])+(255&t[1]);return this.index+=2,e},r.prototype.unpack_uint32=function(){var t=this.read(4),e=256*(256*(256*t[0]+t[1])+t[2])+t[3];return this.index+=4,e},r.prototype.unpack_uint64=function(){var t=this.read(8),e=256*(256*(256*(256*(256*(256*(256*t[0]+t[1])+t[2])+t[3])+t[4])+t[5])+t[6])+t[7];return this.index+=8,e},r.prototype.unpack_int8=function(){var t=this.unpack_uint8();return 128>t?t:t-256},r.prototype.unpack_int16=function(){var t=this.unpack_uint16();return 32768>t?t:t-65536},r.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)},r.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)},r.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e},r.prototype.unpack_string=function(t){for(var e,r,n=this.read(t),i=0,o="";t>i;)e=n[i],128>e?(o+=String.fromCharCode(e),i++):32>(192^e)?(r=(192^e)<<6|63&n[i+1],o+=String.fromCharCode(r),i+=2):(r=(15&e)<<12|(63&n[i+1])<<6|63&n[i+2],o+=String.fromCharCode(r),i+=3);return this.index+=t,o},r.prototype.unpack_array=function(t){for(var e=new Array(t),r=0;t>r;r++)e[r]=this.unpack();return e},r.prototype.unpack_map=function(t){for(var e={},r=0;t>r;r++){var n=this.unpack(),i=this.unpack();e[n]=i}return e},r.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,r=(t>>23&255)-127,n=8388607&t|8388608;return(0==e?1:-1)*n*Math.pow(2,r-23)},r.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),r=t>>31,n=(t>>20&2047)-1023,i=1048575&t|1048576,o=i*Math.pow(2,n-20)+e*Math.pow(2,n-52);return(0==r?1:-1)*o},r.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")},n.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()},n.prototype.pack=function(t){var e=typeof t;if("string"==e)this.pack_string(t);else if("number"==e)Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if("boolean"==e)t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if("undefined"==e)this.bufferBuilder.append(192);else{if("object"!=e)throw new Error('Type "'+e+'" not yet supported');if(null===t)this.bufferBuilder.append(192);else{var r=t.constructor;if(r==Array)this.pack_array(t);else if(r==Blob||r==File)this.pack_bin(t);else if(r==ArrayBuffer)this.pack_bin(p.useArrayBufferView?new Uint8Array(t):t);else if("BYTES_PER_ELEMENT"in t)this.pack_bin(p.useArrayBufferView?new Uint8Array(t.buffer):t.buffer);else if(r==Object)this.pack_object(t);else if(r==Date)this.pack_string(t.toString());else{if("function"!=typeof t.toBinaryPack)throw new Error('Type "'+r.toString()+'" not yet supported');this.bufferBuilder.append(t.toBinaryPack())}}}this.bufferBuilder.flush()},n.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(15>=e)this.pack_uint8(160+e);else if(65535>=e)this.bufferBuilder.append(218),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(219),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_string=function(t){var e=o(t);if(15>=e)this.pack_uint8(176+e);else if(65535>=e)this.bufferBuilder.append(216),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(217),this.pack_uint32(e)}this.bufferBuilder.append(t)},n.prototype.pack_array=function(t){var e=t.length;if(15>=e)this.pack_uint8(144+e);else if(65535>=e)this.bufferBuilder.append(220),this.pack_uint16(e);else{if(!(4294967295>=e))throw new Error("Invalid length");this.bufferBuilder.append(221),this.pack_uint32(e)}for(var r=0;e>r;r++)this.pack(t[r])},n.prototype.pack_integer=function(t){if(t>=-32&&127>=t)this.bufferBuilder.append(255&t);else if(t>=0&&255>=t)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&127>=t)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&65535>=t)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&32767>=t)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&4294967295>=t)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&2147483647>=t)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-0x8000000000000000&&0x8000000000000000>=t)this.bufferBuilder.append(211),this.pack_int64(t);else{if(!(t>=0&&0x10000000000000000>=t))throw new Error("Invalid integer");this.bufferBuilder.append(207),this.pack_uint64(t)}},n.prototype.pack_double=function(t){var e=0;0>t&&(e=1,t=-t);var r=Math.floor(Math.log(t)/Math.LN2),n=t/Math.pow(2,r)-1,i=Math.floor(n*Math.pow(2,52)),o=Math.pow(2,32),s=e<<31|r+1023<<20|i/o&1048575,a=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(a)},n.prototype.pack_object=function(t){var e=Object.keys(t),r=e.length;if(15>=r)this.pack_uint8(128+r);else if(65535>=r)this.bufferBuilder.append(222),this.pack_uint16(r);else{if(!(4294967295>=r))throw new Error("Invalid length");this.bufferBuilder.append(223),this.pack_uint32(r)}for(var n in t)t.hasOwnProperty(n)&&(this.pack(n),this.pack(t[n]))},n.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)},n.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_uint32=function(t){var e=4294967295&t;this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e)},n.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),r=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)},n.prototype.pack_int8=function(t){this.bufferBuilder.append(255&t)},n.prototype.pack_int16=function(t){this.bufferBuilder.append((65280&t)>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((16711680&t)>>>16),this.bufferBuilder.append((65280&t)>>>8),this.bufferBuilder.append(255&t)},n.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),r=t%Math.pow(2,32);this.bufferBuilder.append((4278190080&e)>>>24),this.bufferBuilder.append((16711680&e)>>>16),this.bufferBuilder.append((65280&e)>>>8),this.bufferBuilder.append(255&e),this.bufferBuilder.append((4278190080&r)>>>24),this.bufferBuilder.append((16711680&r)>>>16),this.bufferBuilder.append((65280&r)>>>8),this.bufferBuilder.append(255&r)};var d=Array.isArray;s.prototype.addListener=function(t,e){if("function"!=typeof e)throw new Error("addListener only takes instances of Function");return this.emit("newListener",t,"function"==typeof e.listener?e.listener:e),this._events[t]?d(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,this},s.prototype.on=s.prototype.addListener,s.prototype.once=function(t,e){function r(){n.removeListener(t,r),e.apply(this,arguments)}if("function"!=typeof e)throw new Error(".once only takes instances of Function");var n=this;return r.listener=e,n.on(t,r),this},s.prototype.removeListener=function(t,e){if("function"!=typeof e)throw new Error("removeListener only takes instances of Function");if(!this._events[t])return this;var r=this._events[t];if(d(r)){for(var n=-1,i=0,o=r.length;o>i;i++)if(r[i]===e||r[i].listener&&r[i].listener===e){n=i;break}if(0>n)return this;r.splice(n,1),0==r.length&&delete this._events[t]}else(r===e||r.listener&&r.listener===e)&&delete this._events[t];return this},s.prototype.off=s.prototype.removeListener,s.prototype.removeAllListeners=function(t){return 0===arguments.length?(this._events={},this):(t&&this._events&&this._events[t]&&(this._events[t]=null),this)},s.prototype.listeners=function(t){return this._events[t]||(this._events[t]=[]),d(this._events[t])||(this._events[t]=[this._events[t]]),this._events[t]},s.prototype.emit=function(t){var t=arguments[0],e=this._events[t];if(!e)return!1;if("function"==typeof e){switch(arguments.length){case 1:e.call(this);break;case 2:e.call(this,arguments[1]);break;case 3:e.call(this,arguments[1],arguments[2]);break;default:for(var r=arguments.length,n=new Array(r-1),i=1;r>i;i++)n[i-1]=arguments[i];e.apply(this,n)}return!0}if(d(e)){for(var r=arguments.length,n=new Array(r-1),i=1;r>i;i++)n[i-1]=arguments[i];for(var o=e.slice(),i=0,r=o.length;r>i;i++)o[i].apply(this,n);return!0}return!1},a.prototype.send=function(t){var e=v.pack(t);return e.size<this._mtu?void this._handleSend(["no",e]):(this._outgoing[this._count]={ack:0,chunks:this._chunk(e)},v.debug&&(this._outgoing[this._count].timer=new Date),this._sendWindowedChunks(this._count),void(this._count+=1))},a.prototype._setupInterval=function(){var t=this;this._timeout=setInterval(function(){var e=t._queue.shift();if(e._multiple)for(var r=0,n=e.length;n>r;r+=1)t._intervalSend(e[r]);else t._intervalSend(e)},this._interval)},a.prototype._intervalSend=function(t){var e=this;t=v.pack(t),v.blobToBinaryString(t,function(t){e._dc.send(t)}),0===e._queue.length&&(clearTimeout(e._timeout),e._timeout=null)},a.prototype._processAcks=function(){for(var t in this._outgoing)this._outgoing.hasOwnProperty(t)&&this._sendWindowedChunks(t)},a.prototype._handleSend=function(t){for(var e=!0,r=0,n=this._queue.length;n>r;r+=1){var i=this._queue[r];i===t?e=!1:i._multiple&&-1!==i.indexOf(t)&&(e=!1)}e&&(this._queue.push(t),this._timeout||this._setupInterval())},a.prototype._setupDC=function(){var t=this;this._dc.onmessage=function(e){var r=e.data,n=r.constructor;if(n===String){var i=v.binaryStringToArrayBuffer(r);r=v.unpack(i),t._handleMessage(r)}}},a.prototype._handleMessage=function(t){var e,r=t[1],n=this._incoming[r],i=this._outgoing[r];switch(t[0]){case"no":var o=r;o&&this.onmessage(v.unpack(o));break;case"end":if(e=n,this._received[r]=t[2],!e)break;this._ack(r);break;case"ack":if(e=i){var s=t[2];e.ack=Math.max(s,e.ack),e.ack>=e.chunks.length?(v.log("Time: ",new Date-e.timer),delete this._outgoing[r]):this._processAcks()}break;case"chunk":if(e=n,!e){var a=this._received[r];if(a===!0)break;e={ack:["ack",r,0],chunks:[]},this._incoming[r]=e}var u=t[2],c=t[3];e.chunks[u]=new Uint8Array(c),u===e.ack[2]&&this._calculateNextAck(r),this._ack(r);break;default:this._handleSend(t)}},a.prototype._chunk=function(t){for(var e=[],r=t.size,n=0;r>n;){var i=Math.min(r,n+this._mtu),o=t.slice(n,i),s={payload:o};e.push(s),n=i}return v.log("Created",e.length,"chunks."),e},a.prototype._ack=function(t){var e=this._incoming[t].ack;this._received[t]===e[2]&&(this._complete(t),this._received[t]=!0),this._handleSend(e)},a.prototype._calculateNextAck=function(t){for(var e=this._incoming[t],r=e.chunks,n=0,i=r.length;i>n;n+=1)if(void 0===r[n])return void(e.ack[2]=n);e.ack[2]=r.length},a.prototype._sendWindowedChunks=function(t){v.log("sendWindowedChunks for: ",t);for(var e=this._outgoing[t],r=e.chunks,n=[],i=Math.min(e.ack+this._window,r.length),o=e.ack;i>o;o+=1)r[o].sent&&o!==e.ack||(r[o].sent=!0,n.push(["chunk",t,o,r[o].payload]));e.ack+this._window>=r.length&&n.push(["end",t,r.length]),n._multiple=!0,this._handleSend(n)},a.prototype._complete=function(t){v.log("Completed called for",t);var e=this,r=this._incoming[t].chunks,n=new Blob(r);v.blobToArrayBuffer(n,function(t){e.onmessage(v.unpack(t))}),delete this._incoming[t]},a.higherBandwidthSDP=function(t){var e=navigator.appVersion.match(/Chrome\/(.*?) /);if(e&&(e=parseInt(e[1].split(".").shift()),31>e)){var r=t.split("b=AS:30"),n="b=AS:102400";if(r.length>1)return r[0]+n+r[1]}return t},a.prototype.onmessage=function(){},t.Reliable=a,t.RTCSessionDescription=l.mozRTCSessionDescription||l.RTCSessionDescription,t.RTCPeerConnection=l.mozRTCPeerConnection||l.webkitRTCPeerConnection||l.RTCPeerConnection,t.RTCIceCandidate=l.mozRTCIceCandidate||l.RTCIceCandidate;var g={iceServers:[{url:"stun:stun.l.google.com:19302"}]},y=1,v={noop:function(){},CLOUD_HOST:"0.peerjs.com",CLOUD_PORT:9e3,chunkedBrowsers:{Chrome:1},chunkedMTU:16300,logLevel:0,setLogLevel:function(t){var e=parseInt(t,10);v.logLevel=isNaN(parseInt(t,10))?t?3:0:e,v.log=v.warn=v.error=v.noop,v.logLevel>0&&(v.error=v._printWith("ERROR")),v.logLevel>1&&(v.warn=v._printWith("WARNING")),v.logLevel>2&&(v.log=v._print)},setLogFunction:function(t){t.constructor!==Function?v.warn("The log function you passed in is not a function. Defaulting to regular logs."):v._print=t},_printWith:function(t){return function(){var e=Array.prototype.slice.call(arguments);e.unshift(t),v._print.apply(v,e)}},_print:function(){var t=!1,e=Array.prototype.slice.call(arguments);e.unshift("PeerJS: ");for(var r=0,n=e.length;n>r;r++)e[r]instanceof Error&&(e[r]="("+e[r].name+") "+e[r].message,t=!0);t?console.error.apply(console,e):console.log.apply(console,e)},defaultConfig:g,browser:function(){return l.mozRTCPeerConnection?"Firefox":l.webkitRTCPeerConnection?"Chrome":l.RTCPeerConnection?"Supported":"Unsupported"}(),supports:function(){if("undefined"==typeof RTCPeerConnection)return{};var t,e,r=!0,n=!0,i=!1,o=!1,s=!!l.webkitRTCPeerConnection;try{t=new RTCPeerConnection(g,{optional:[{RtpDataChannels:!0}]})}catch(a){r=!1,n=!1}if(r)try{e=t.createDataChannel("_PEERJSTEST")}catch(a){r=!1}if(r){try{e.binaryType="blob",i=!0}catch(a){}var u=new RTCPeerConnection(g,{});try{var c=u.createDataChannel("_PEERJSRELIABLETEST",{});o=c.reliable}catch(a){}u.close()}if(n&&(n=!!t.addStream),!s&&r){var f=new RTCPeerConnection(g,{optional:[{RtpDataChannels:!0}]});f.onnegotiationneeded=function(){s=!0,v&&v.supports&&(v.supports.onnegotiationneeded=!0)};{f.createDataChannel("_PEERJSNEGOTIATIONTEST")}setTimeout(function(){f.close()},1e3)}return t&&t.close(),{audioVideo:n,data:r,binaryBlob:i,binary:o,reliable:o,sctp:o,onnegotiationneeded:s}}(),validateId:function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)},validateKey:function(t){return!t||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.exec(t)},debug:!1,inherits:function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})},extend:function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);return t},pack:BinaryPack.pack,unpack:BinaryPack.unpack,log:function(){if(v.debug){var t=!1,e=Array.prototype.slice.call(arguments);e.unshift("PeerJS: ");for(var r=0,n=e.length;n>r;r++)e[r]instanceof Error&&(e[r]="("+e[r].name+") "+e[r].message,t=!0);t?console.error.apply(console,e):console.log.apply(console,e)}},setZeroTimeout:function(t){function e(e){n.push(e),t.postMessage(i,"*")}function r(e){e.source==t&&e.data==i&&(e.stopPropagation&&e.stopPropagation(),n.length&&n.shift()())}var n=[],i="zero-timeout-message";return t.addEventListener?t.addEventListener("message",r,!0):t.attachEvent&&t.attachEvent("onmessage",r),e}(this),chunk:function(t){for(var e=[],r=t.size,n=index=0,i=Math.ceil(r/v.chunkedMTU);r>n;){var o=Math.min(r,n+v.chunkedMTU),s=t.slice(n,o),a={__peerData:y,n:index,data:s,total:i};e.push(a),n=o,index+=1}return y+=1,e},blobToArrayBuffer:function(t,e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsArrayBuffer(t)},blobToBinaryString:function(t,e){var r=new FileReader;r.onload=function(t){e(t.target.result)},r.readAsBinaryString(t)},binaryStringToArrayBuffer:function(t){for(var e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=255&t.charCodeAt(r);return e.buffer},randomToken:function(){return Math.random().toString(36).substr(2)},isSecure:function(){return"https:"===location.protocol}};t.util=v,v.inherits(u,s),u.prototype._retrieveId=function(){var t=this,e=new XMLHttpRequest,r=this.options.secure?"https://":"http://",n=r+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/id",i="?ts="+(new Date).getTime()+Math.random();n+=i,e.open("get",n,!0),e.onerror=function(e){v.error("Error retrieving ID",e);var r="";"/"===t.options.path&&t.options.host!==v.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),t._abort("server-error","Could not get an ID from the server."+r)},e.onreadystatechange=function(){return 4===e.readyState?200!==e.status?void e.onerror():void t._initialize(e.responseText):void 0},e.send(null)},u.prototype._initialize=function(t){this.id=t,this.socket.start(this.id)},u.prototype._handleMessage=function(t){var e=t.type,r=t.payload,n=t.src;switch(e){case"OPEN":this.emit("open",this.id),this.open=!0;break;case"ERROR":this._abort("server-error",r.msg);break;case"ID-TAKEN":this._abort("unavailable-id","ID `"+this.id+"` is taken");break;case"INVALID-KEY":this._abort("invalid-key",'API KEY "'+this.options.key+'" is invalid');break;case"LEAVE":v.log("Received leave message from",n),this._cleanupPeer(n);break;case"EXPIRE":this.emit("error",new Error("Could not connect to peer "+n));break;case"OFFER":var i=r.connectionId,o=this.getConnection(n,i);if(o)v.warn("Offer received for existing Connection ID:",i);else{if("media"===r.type){var o=new f(n,this,{connectionId:i,_payload:r,metadata:r.metadata});this._addConnection(n,o),this.emit("call",o)}else{if("data"!==r.type)return void v.warn("Received malformed connection type:",r.type);o=new c(n,this,{connectionId:i,_payload:r,metadata:r.metadata,label:r.label,serialization:r.serialization,reliable:r.reliable}),this._addConnection(n,o),this.emit("connection",o)}for(var s=this._getMessages(i),a=0,u=s.length;u>a;a+=1)o.handleMessage(s[a])}break;default:if(!r)return void v.warn("You received a malformed message from "+n+" of type "+e);var h=r.connectionId,o=this.getConnection(n,h);o&&o.pc?o.handleMessage(t):h?this._storeMessage(h,t):v.warn("You received an unrecognized message:",t)}},u.prototype._storeMessage=function(t,e){this._lostMessages[t]||(this._lostMessages[t]=[]),this._lostMessages[t].push(e)},u.prototype._getMessages=function(t){var e=this._lostMessages[t];return e?(delete this._lostMessages[t],e):[]},u.prototype.connect=function(t,e){if(this.disconnected)return v.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emit("error",new Error("Cannot connect to new Peer after disconnecting from server."));var r=new c(t,this,e);return this._addConnection(t,r),r},u.prototype.call=function(t,e,r){if(this.disconnected)return v.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),void this.emit("error",new Error("Cannot connect to new Peer after disconnecting from server."));if(!e)return void v.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");r=r||{},r._stream=e;var n=new f(t,this,r);return this._addConnection(t,n),n},u.prototype._addConnection=function(t,e){this.connections[t]||(this.connections[t]=[]),this.connections[t].push(e)},u.prototype.getConnection=function(t,e){var r=this.connections[t];if(!r)return null;for(var n=0,i=r.length;i>n;n++)if(r[n].id===e)return r[n];return null},u.prototype._delayedAbort=function(t,e){var r=this;v.setZeroTimeout(function(){r._abort(t,e)})},u.prototype._abort=function(t,e){v.error("Aborting. Error:",e);var r=new Error(e);r.type=t,this.destroy(),this.emit("error",r)},u.prototype.destroy=function(){this.destroyed||(this._cleanup(),this.disconnect(),this.destroyed=!0)},u.prototype._cleanup=function(){if(this.connections)for(var t=Object.keys(this.connections),e=0,r=t.length;r>e;e++)this._cleanupPeer(t[e]);this.emit("close")},u.prototype._cleanupPeer=function(t){for(var e=this.connections[t],r=0,n=e.length;n>r;r+=1)e[r].close()},u.prototype.disconnect=function(){var t=this;v.setZeroTimeout(function(){t.disconnected||(t.disconnected=!0,t.open=!1,t.socket&&t.socket.close(),t.id=null)})},u.prototype.listAllPeers=function(t){t=t||function(){};var e=this,r=new XMLHttpRequest,n=this.options.secure?"https://":"http://",i=n+this.options.host+":"+this.options.port+this.options.path+this.options.key+"/peers",o="?ts="+(new Date).getTime()+Math.random();i+=o,r.open("get",i,!0),r.onerror=function(){e._abort("server-error","Could not get peers from the server."),t([])},r.onreadystatechange=function(){if(4===r.readyState){if(401===r.status){var n="";throw n=e.options.host!==v.CLOUD_HOST?"It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":"You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)}t(200!==r.status?[]:JSON.parse(r.responseText))}},r.send(null)},t.Peer=u,v.inherits(c,s),c._idPrefix="dc_",c.prototype.initialize=function(t){this._dc=this.dataChannel=t,this._configureDataChannel()},c.prototype._configureDataChannel=function(){var t=this;v.supports.sctp&&(this._dc.binaryType="arraybuffer"),this._dc.onopen=function(){v.log("Data channel connection success"),t.open=!0,t.emit("open")},!v.supports.sctp&&this.reliable&&(this._reliable=new a(this._dc,v.debug)),this._reliable?this._reliable.onmessage=function(e){t.emit("data",e)}:this._dc.onmessage=function(e){t._handleDataMessage(e)},this._dc.onclose=function(){v.log("DataChannel closed for:",t.peer),t.close()}},c.prototype._handleDataMessage=function(t){var e=this,r=t.data,n=r.constructor;if("binary"===this.serialization||"binary-utf8"===this.serialization){if(n===Blob)return void v.blobToArrayBuffer(r,function(t){r=v.unpack(t),e.emit("data",r)});if(n===ArrayBuffer)r=v.unpack(r);else if(n===String){var i=v.binaryStringToArrayBuffer(r);r=v.unpack(i)}}else"json"===this.serialization&&(r=JSON.parse(r));if(r.__peerData){var o=r.__peerData,s=this._chunkedData[o]||{data:[],count:0,total:r.total};return s.data[r.n]=r.data,s.count+=1,s.total===s.count&&(r=new Blob(s.data),this._handleDataMessage({data:r}),delete this._chunkedData[o]),void(this._chunkedData[o]=s)}this.emit("data",r)},c.prototype.close=function(){this.open&&(this.open=!1,B.cleanup(this),this.emit("close"))},c.prototype.send=function(t,e){if(!this.open)return void this.emit("error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));if(this._reliable)return void this._reliable.send(t);var r=this;if("json"===this.serialization)this._bufferedSend(JSON.stringify(t));else if("binary"===this.serialization||"binary-utf8"===this.serialization){var n=v.pack(t),i=v.chunkedBrowsers[this._peerBrowser]||v.chunkedBrowsers[v.browser];if(i&&!e&&n.size>v.chunkedMTU)return void this._sendChunks(n);v.supports.sctp?v.supports.binaryBlob?this._bufferedSend(n):v.blobToArrayBuffer(n,function(t){r._bufferedSend(t)}):v.blobToBinaryString(n,function(t){r._bufferedSend(t)})}else this._bufferedSend(t)},c.prototype._bufferedSend=function(t){(this._buffering||!this._trySend(t))&&(this._buffer.push(t),this.bufferSize=this._buffer.length)},c.prototype._trySend=function(t){try{this._dc.send(t)}catch(e){this._buffering=!0;var r=this;return setTimeout(function(){r._buffering=!1,r._tryBuffer()},100),!1}return!0},c.prototype._tryBuffer=function(){if(0!==this._buffer.length){var t=this._buffer[0];this._trySend(t)&&(this._buffer.shift(),this.bufferSize=this._buffer.length,this._tryBuffer())}},c.prototype._sendChunks=function(t){for(var e=v.chunk(t),r=0,n=e.length;n>r;r+=1){var t=e[r];this.send(t,!0)}},c.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case"ANSWER":this._peerBrowser=e.browser,B.handleSDP(t.type,this,e.sdp);break;case"CANDIDATE":B.handleCandidate(this,e.candidate);break;default:v.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},v.inherits(f,s),f._idPrefix="mc_",f.prototype.addStream=function(t){v.log("Receiving stream",t),this.remoteStream=t,this.emit("stream",t)},f.prototype.handleMessage=function(t){var e=t.payload;switch(t.type){case"ANSWER":B.handleSDP(t.type,this,e.sdp),this.open=!0;break;case"CANDIDATE":B.handleCandidate(this,e.candidate);break;default:v.warn("Unrecognized message type:",t.type,"from peer:",this.peer)}},f.prototype.answer=function(t){if(this.localStream)return void v.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");this.options._payload._stream=t,this.localStream=t,B.startConnection(this,this.options._payload);for(var e=this.provider._getMessages(this.id),r=0,n=e.length;n>r;r+=1)this.handleMessage(e[r]);this.open=!0},f.prototype.close=function(){this.open&&(this.open=!1,B.cleanup(this),this.emit("close"))};var B={pcs:{data:{},media:{}},queue:[]};B._idPrefix="pc_",B.startConnection=function(t,e){var r=B._getPeerConnection(t,e);if("media"===t.type&&e._stream&&r.addStream(e._stream),t.pc=t.peerConnection=r,e.originator){if("data"===t.type){var n={};v.supports.sctp||(n={reliable:e.reliable});var i=r.createDataChannel(t.label,n);t.initialize(i)}v.supports.onnegotiationneeded||B._makeOffer(t)}else B.handleSDP("OFFER",t,e.sdp)},B._getPeerConnection=function(t,e){B.pcs[t.type]||v.error(t.type+" is not a valid connection type. Maybe you overrode the `type` property somewhere."),B.pcs[t.type][t.peer]||(B.pcs[t.type][t.peer]={});{var r;B.pcs[t.type][t.peer]}return e.pc&&(r=B.pcs[t.type][t.peer][e.pc]),r&&"stable"===r.signalingState||(r=B._startPeerConnection(t)),r},B._startPeerConnection=function(t){v.log("Creating RTCPeerConnection.");var e=B._idPrefix+v.randomToken(),r={};"data"!==t.type||v.supports.sctp?"media"===t.type&&(r={optional:[{DtlsSrtpKeyAgreement:!0}]}):r={optional:[{RtpDataChannels:!0}]};var n=new RTCPeerConnection(t.provider.options.config,r);return B.pcs[t.type][t.peer][e]=n,B._setupListeners(t,n,e),n},B._setupListeners=function(t,e){var r=t.peer,n=t.id,i=t.provider;v.log("Listening for ICE candidates."),e.onicecandidate=function(e){e.candidate&&(v.log("Received ICE candidates for:",t.peer),i.socket.send({type:"CANDIDATE",payload:{candidate:e.candidate,type:t.type,connectionId:t.id},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"disconnected":case"failed":v.log("iceConnectionState is disconnected, closing connections to "+r),t.close();break;case"completed":e.onicecandidate=v.noop}},e.onicechange=e.oniceconnectionstatechange,v.log("Listening for `negotiationneeded`"),e.onnegotiationneeded=function(){v.log("`negotiationneeded` triggered"),"stable"==e.signalingState?B._makeOffer(t):v.log("onnegotiationneeded triggered when not stable. Is another connection being established?")},v.log("Listening for data channel"),e.ondatachannel=function(t){v.log("Received data channel");var e=t.channel,o=i.getConnection(r,n);o.initialize(e)},v.log("Listening for remote stream"),e.onaddstream=function(t){v.log("Received remote stream");var e=t.stream;i.getConnection(r,n).addStream(e)}},B.cleanup=function(t){v.log("Cleaning up PeerConnection to "+t.peer);var e=t.pc;!e||"closed"===e.readyState&&"closed"===e.signalingState||(e.close(),t.pc=null)},B._makeOffer=function(t){var e=t.pc;e.createOffer(function(r){v.log("Created offer."),!v.supports.sctp&&"data"===t.type&&t.reliable&&(r.sdp=a.higherBandwidthSDP(r.sdp)),e.setLocalDescription(r,function(){v.log("Set localDescription: offer","for:",t.peer),t.provider.socket.send({type:"OFFER",payload:{sdp:r,type:t.type,label:t.label,connectionId:t.id,reliable:t.reliable,serialization:t.serialization,metadata:t.metadata,browser:v.browser},dst:t.peer})},function(e){t.provider.emit("error",e),v.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emit("error",e),v.log("Failed to createOffer, ",e)},t.options.constraints)},B._makeAnswer=function(t){var e=t.pc;e.createAnswer(function(r){v.log("Created answer."),!v.supports.sctp&&"data"===t.type&&t.reliable&&(r.sdp=a.higherBandwidthSDP(r.sdp)),e.setLocalDescription(r,function(){v.log("Set localDescription: answer","for:",t.peer),t.provider.socket.send({type:"ANSWER",payload:{sdp:r,type:t.type,connectionId:t.id,browser:v.browser},dst:t.peer})},function(e){t.provider.emit("error",e),v.log("Failed to setLocalDescription, ",e)})},function(e){t.provider.emit("error",e),v.log("Failed to create answer, ",e)})},B.handleSDP=function(t,e,r){r=new RTCSessionDescription(r);var n=e.pc;v.log("Setting remote description",r),n.setRemoteDescription(r,function(){v.log("Set remoteDescription:",t,"for:",e.peer),"OFFER"===t&&B._makeAnswer(e)},function(t){e.provider.emit("error",t),v.log("Failed to setRemoteDescription, ",t)})},B.handleCandidate=function(t,e){var r=e.candidate,n=e.sdpMLineIndex;t.pc.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:n,candidate:r})),v.log("Added ICE candidate for:",t.peer)},v.inherits(h,s),h.prototype.start=function(t){this.id=t;var e=v.randomToken();this._httpUrl+="/"+t+"/"+e,this._wsUrl+="&id="+t+"&token="+e,this._startXhrStream(),this._startWebSocket()},h.prototype._startWebSocket=function(){var t=this;this._socket||(this._socket=new WebSocket(this._wsUrl),this._socket.onmessage=function(e){var r;try{r=JSON.parse(e.data)}catch(n){return void v.log("Invalid server message",e.data)}try{t.emit("message",r)}catch(i){console.log("peer error",i)}},this._socket.onopen=function(){t._timeout&&(clearTimeout(t._timeout),setTimeout(function(){t._http.abort(),t._http=null},5e3)),t._sendQueuedMessages(),v.log("Socket open")})},h.prototype._startXhrStream=function(t){try{var e=this;this._http=new XMLHttpRequest,this._http._index=1,this._http._streamIndex=t||0,this._http.open("post",this._httpUrl+"/id?i="+this._http._streamIndex,!0),this._http.onreadystatechange=function(){2==this.readyState&&this.old&&(this.old.abort(),delete this.old),this.readyState>2&&200==this.status&&this.responseText&&e._handleStream(this)},this._http.send(null),this._setHTTPTimeout()}catch(r){v.log("XMLHttpRequest not available; defaulting to WebSockets")}},h.prototype._handleStream=function(t){var e=t.responseText.split("\n");if(t._buffer)for(;t._buffer.length>0;){var r=t._buffer.shift(),n=e[r];try{n=JSON.parse(n)}catch(i){t._buffer.shift(r);break}this.emit("message",n)}var o=e[t._index];if(o)if(t._index+=1,t._index===e.length)t._buffer||(t._buffer=[]),t._buffer.push(t._index-1);else{try{o=JSON.parse(o)}catch(i){return void v.log("Invalid server message",o)
}this.emit("message",o)}},h.prototype._setHTTPTimeout=function(){var t=this;this._timeout=setTimeout(function(){var e=t._http;t._wsOpen()?e.abort():(t._startXhrStream(e._streamIndex+1),t._http.old=e)},25e3)},h.prototype._wsOpen=function(){return this._socket&&1==this._socket.readyState},h.prototype._sendQueuedMessages=function(){for(var t=0,e=this._queue.length;e>t;t+=1)this.send(this._queue[t])},h.prototype.send=function(t){if(!this.disconnected){if(!this.id)return void this._queue.push(t);if(!t.type)return void this.emit("error","Invalid message");var e=JSON.stringify(t);if(this._wsOpen())this._socket.send(e);else{var r=new XMLHttpRequest,n=this._httpUrl+"/"+t.type.toLowerCase();r.open("post",n,!0),r.setRequestHeader("Content-Type","application/json"),r.send(e)}}},h.prototype.close=function(){!this.disconnected&&this._wsOpen()&&(this._socket.close(),this.disconnected=!0)}}(this),!function(){var t,e,r,n;!function(){var i={},o={};t=function(t,e,r){i[t]={deps:e,callback:r}},n=r=e=function(t){function r(e){if("."!==e.charAt(0))return e;for(var r=e.split("/"),n=t.split("/").slice(0,-1),i=0,o=r.length;o>i;i++){var s=r[i];if(".."===s)n.pop();else{if("."===s)continue;n.push(s)}}return n.join("/")}if(n._eak_seen=i,o[t])return o[t];if(o[t]={},!i[t])throw new Error("Could not find module "+t);for(var s,a=i[t],u=a.deps,c=a.callback,f=[],h=0,l=u.length;l>h;h++)f.push("exports"===u[h]?s={}:e(r(u[h])));var p=c.apply(this,f);return o[t]=s||p}}(),t("promise/all",["./utils","exports"],function(t,e){"use strict";function r(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to all.");return new e(function(e,r){function n(t){return function(e){o(t,e)}}function o(t,r){a[t]=r,0===--u&&e(a)}var s,a=[],u=t.length;0===u&&e([]);for(var c=0;c<t.length;c++)s=t[c],s&&i(s.then)?s.then(n(c),r):o(c,s)})}var n=t.isArray,i=t.isFunction;e.all=r}),t("promise/asap",["exports"],function(t){"use strict";function e(){return function(){process.nextTick(i)}}function r(){var t=0,e=new u(i),r=document.createTextNode("");return e.observe(r,{characterData:!0}),function(){r.data=t=++t%2}}function n(){return function(){c.setTimeout(i,1)}}function i(){for(var t=0;t<f.length;t++){var e=f[t],r=e[0],n=e[1];r(n)}f=[]}function o(t,e){var r=f.push([t,e]);1===r&&s()}var s,a="undefined"!=typeof window?window:{},u=a.MutationObserver||a.WebKitMutationObserver,c="undefined"!=typeof global?global:void 0===this?window:this,f=[];s="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?e():u?r():n(),t.asap=o}),t("promise/config",["exports"],function(t){"use strict";function e(t,e){return 2!==arguments.length?r[t]:void(r[t]=e)}var r={instrument:!1};t.config=r,t.configure=e}),t("promise/polyfill",["./promise","./utils","exports"],function(t,e,r){"use strict";function n(){var t;t="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in t&&"resolve"in t.Promise&&"reject"in t.Promise&&"all"in t.Promise&&"race"in t.Promise&&function(){var e;return new t.Promise(function(t){e=t}),o(e)}();e||(t.Promise=i)}var i=t.Promise,o=e.isFunction;r.polyfill=n}),t("promise/promise",["./config","./utils","./all","./race","./resolve","./reject","./asap","exports"],function(t,e,r,n,i,o,s,a){"use strict";function u(t){if(!b(t))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof u))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],c(t,this)}function c(t,e){function r(t){d(e,t)}function n(t){y(e,t)}try{t(r,n)}catch(i){n(i)}}function f(t,e,r,n){var i,o,s,a,u=b(r);if(u)try{i=r(n),s=!0}catch(c){a=!0,o=c}else i=n,s=!0;p(e,i)||(u&&s?d(e,i):a?y(e,o):t===A?d(e,i):t===T&&y(e,i))}function h(t,e,r,n){var i=t._subscribers,o=i.length;i[o]=e,i[o+A]=r,i[o+T]=n}function l(t,e){for(var r,n,i=t._subscribers,o=t._detail,s=0;s<i.length;s+=3)r=i[s],n=i[s+e],f(e,r,n,o);t._subscribers=null}function p(t,e){var r,n=null;try{if(t===e)throw new TypeError("A promises callback cannot return that same promise.");if(P(e)&&(n=e.then,b(n)))return n.call(e,function(n){return r?!0:(r=!0,void(e!==n?d(t,n):g(t,n)))},function(e){return r?!0:(r=!0,void y(t,e))}),!0}catch(i){return r?!0:(y(t,i),!0)}return!1}function d(t,e){t===e?g(t,e):p(t,e)||g(t,e)}function g(t,e){t._state===E&&(t._state=D,t._detail=e,m.async(v,t))}function y(t,e){t._state===E&&(t._state=D,t._detail=e,m.async(B,t))}function v(t){l(t,t._state=A)}function B(t){l(t,t._state=T)}var m=t.config,P=(t.configure,e.objectOrFunction),b=e.isFunction,F=(e.now,r.all),w=n.race,_=i.resolve,S=o.reject,k=s.asap;m.async=k;var E=void 0,D=0,A=1,T=2;u.prototype={constructor:u,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(t,e){var r=this,n=new this.constructor(function(){});if(this._state){var i=arguments;m.async(function(){f(r._state,n,i[r._state-1],r._detail)})}else h(this,n,t,e);return n},"catch":function(t){return this.then(null,t)}},u.all=F,u.race=w,u.resolve=_,u.reject=S,a.Promise=u}),t("promise/race",["./utils","exports"],function(t,e){"use strict";function r(t){var e=this;if(!n(t))throw new TypeError("You must pass an array to race.");return new e(function(e,r){for(var n,i=0;i<t.length;i++)n=t[i],n&&"function"==typeof n.then?n.then(e,r):e(n)})}var n=t.isArray;e.race=r}),t("promise/reject",["exports"],function(t){"use strict";function e(t){var e=this;return new e(function(e,r){r(t)})}t.reject=e}),t("promise/resolve",["exports"],function(t){"use strict";function e(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=this;return new e(function(e){e(t)})}t.resolve=e}),t("promise/utils",["exports"],function(t){"use strict";function e(t){return r(t)||"object"==typeof t&&null!==t}function r(t){return"function"==typeof t}function n(t){return"[object Array]"===Object.prototype.toString.call(t)}var i=Date.now||function(){return(new Date).getTime()};t.objectOrFunction=e,t.isFunction=r,t.isArray=n,t.now=i}),e("promise/polyfill").polyfill()}();var XBBCODE=function(){function t(e,r,n,i,o,c,f){f=f||[],n++;var h,l,p,d,g=new RegExp("(<bbcl="+n+" )("+a.join("|")+")([ =>])","gi"),y=new RegExp("(<bbcl="+n+" )("+a.join("|")+")([ =>])","i"),v=c.match(g)||[],B=s[e]||{};for(g.lastIndex=0,v||(c=""),p=0;p<v.length;p++)y.lastIndex=0,d=v[p].match(y)[2].toLowerCase(),B.restrictChildrenTo.length>0&&(B.validChildLookup[d]||(l='The tag "'+d+'" is not allowed as a child of the tag "'+e+'".',f.push(l))),h=s[d]||{},h.restrictParentsTo.length>0&&(h.validParentLookup[e]||(l='The tag "'+e+'" is not allowed as a parent of the tag "'+d+'".',f.push(l)));return c=c.replace(u,function(e,r,n,i,o){return f=t(n,e,r,n,i,o,f),e}),f}function e(t){return t=t.replace(/\<([^\>][^\>]*?)\>/gi,function(t,e){var r=e.match(/^bbcl=([0-9]+) /);return null===r?"<bbcl=0 "+e+">":"<"+e.replace(/^(bbcl=)([0-9]+)/,function(t,e,r){return e+(parseInt(r,10)+1)})+">"})}function r(t){return t.replace(/<bbcl=[0-9]+ \/\*>/gi,"").replace(/<bbcl=[0-9]+ /gi,"&#91;").replace(/>/gi,"&#93;")}function n(t){var e=t.text;return e=e.replace(u,B)}function i(t){for(t=t.replace(/\[(?!\*[ =\]]|list([ =][^\]]*)?\]|\/list[\]])/gi,"<"),t=t.replace(/\[(?=list([ =][^\]]*)?\]|\/list[\]])/gi,">");t!==(t=t.replace(/>list([ =][^\]]*)?\]([^>]*?)(>\/list])/gi,function(t){for(var e=t;e!==(e=e.replace(/\[\*\]([^\[]*?)(\[\*\]|>\/list])/i,function(t,e,r){r=">/list]"===r?"</*]</list]":"</*][*]";var n="<*]"+e+r;return n})););return e=e.replace(/>/g,"<")})););return t=t.replace(/</g,"[")}function o(t){for(;t!==(t=t.replace(c,function(t){return t=t.replace(/\[/g,"<"),t=t.replace(/\]/g,">"),e(t)})););return t}var s,a,u,c,f,h,l,p={},d=/^(?:https?|file|c):(?:\/{1,3}|\\{1})[-a-zA-Z0-9:@#%&()~_?\+=\/\\\.]*$/,g=/^(?:red|green|blue|orange|yellow|black|white|brown|gray|silver|purple|maroon|fushsia|lime|olive|navy|teal|aqua)$/,y=/^#?[a-fA-F0-9]{6}$/,v=[];s={b:{openTag:function(){return'<span class="xbbcode-b">'},closeTag:function(){return"</span>"}},bbcode:{openTag:function(){return""},closeTag:function(){return""}},code:{openTag:function(){return'<span class="xbbcode-code">'},closeTag:function(){return"</span>"},noParse:!0},color:{openTag:function(t){var e=t.substr(1)||"black";return g.lastIndex=0,y.lastIndex=0,g.test(e)||(y.test(e)?"#"!==e.substr(0,1)&&(e="#"+e):e="black"),'<span style="color:'+e+'">'},closeTag:function(){return"</span>"}},i:{openTag:function(){return'<span class="xbbcode-i">'},closeTag:function(){return"</span>"}},img:{openTag:function(t,e){var r=e;return d.lastIndex=0,d.test(r)||(r=""),'<img src="'+r+'" />'},closeTag:function(){return""},displayContent:!1},list:{openTag:function(){return"<ul>"},closeTag:function(){return"</ul>"},restrictChildrenTo:["*","li"]},noparse:{openTag:function(){return""},closeTag:function(){return""},noParse:!0},php:{openTag:function(){return'<span class="xbbcode-code">'},closeTag:function(){return"</span>"},noParse:!0},quote:{openTag:function(){return'<blockquote class="xbbcode-blockquote">'},closeTag:function(){return"</blockquote>"}},s:{openTag:function(){return'<span class="xbbcode-s">'},closeTag:function(){return"</span>"}},size:{openTag:function(t){var e=parseInt(t.substr(1),10)||0;return(4>e||e>40)&&(e=14),'<span class="xbbcode-size-'+e+'">'},closeTag:function(){return"</span>"}},table:{openTag:function(){return'<table class="xbbcode-table">'},closeTag:function(){return"</table>"},restrictChildrenTo:["tbody","thead","tfoot","tr"]},tbody:{openTag:function(){return"<tbody>"},closeTag:function(){return"</tbody>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},tfoot:{openTag:function(){return"<tfoot>"},closeTag:function(){return"</tfoot>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},thead:{openTag:function(){return'<thead class="xbbcode-thead">'},closeTag:function(){return"</thead>"},restrictChildrenTo:["tr"],restrictParentsTo:["table"]},td:{openTag:function(){return'<td class="xbbcode-td">'},closeTag:function(){return"</td>"},restrictParentsTo:["tr"]},th:{openTag:function(){return'<td class="xbbcode-th">'},closeTag:function(){return"</td>"},restrictParentsTo:["tr"]},tr:{openTag:function(){return'<tr class="xbbcode-tr">'},closeTag:function(){return"</tr>"},restrictChildrenTo:["td","th"],restrictParentsTo:["table","tbody","tfoot","thead"]},u:{openTag:function(){return'<span class="xbbcode-u">'},closeTag:function(){return"</span>"}},url:{openTag:function(t,e){var r;return r=t?t.substr(1):e.replace(/<.*?>/g,""),d.lastIndex=0,d.test(r)||(r="#"),'<a href="'+r+'">'},closeTag:function(){return"</a>"}},"*":{openTag:function(){return"<li>"},closeTag:function(){return"</li>"},restrictParentsTo:["list"]}},a=[],function(){var t,e,r;for(t in s)if(s.hasOwnProperty(t)){for("*"===t?a.push("\\"+t):(a.push(t),s[t].noParse&&v.push(t)),s[t].validChildLookup={},s[t].validParentLookup={},s[t].restrictParentsTo=s[t].restrictParentsTo||[],s[t].restrictChildrenTo=s[t].restrictChildrenTo||[],r=s[t].restrictChildrenTo.length,e=0;r>e;e++)s[t].validChildLookup[s[t].restrictChildrenTo[e]]=!0;for(r=s[t].restrictParentsTo.length,e=0;r>e;e++)s[t].validParentLookup[s[t].restrictParentsTo[e]]=!0}}(),u=new RegExp("<bbcl=([0-9]+) ("+a.join("|")+")([ =][^>]*?)?>((?:.|[\\r\\n])*?)<bbcl=\\1 /\\2>","gi"),c=new RegExp("\\[("+a.join("|")+")([ =][^\\]]*?)?\\]([^\\[]*?)\\[/\\1\\]","gi"),f=new RegExp("\\[("+v.join("|")+")([ =][^\\]]*?)?\\]([\\s\\S]*?)\\[/\\1\\]","gi"),function(){for(var t=[],e=0;e<a.length;e++)"\\*"!==a[e]&&t.push("/"+a[e]);h=new RegExp("(\\[)((?:"+a.join("|")+")(?:[ =][^\\]]*?)?)(\\])","gi"),l=new RegExp("(\\[)("+t.join("|")+")(\\])","gi")}();var B=function(t,e,n,i,o){n=n.toLowerCase();var a=s[n].noParse?r(o):o.replace(u,B),c=s[n].openTag(i,a),f=s[n].closeTag(i,a);return s[n].displayContent===!1&&(a=""),c+a+f};return p.process=function(e){var r={html:"",error:!1},s=[];for(e.text=e.text.replace(/</g,"&lt;"),e.text=e.text.replace(/>/g,"&gt;"),e.text=e.text.replace(h,function(t,e,r){return"<"+r+">"}),e.text=e.text.replace(l,function(t,e,r){return"<"+r+">"}),e.text=e.text.replace(/\[/g,"&#91;"),e.text=e.text.replace(/\]/g,"&#93;"),e.text=e.text.replace(/</g,"["),e.text=e.text.replace(/>/g,"]");e.text!==(e.text=e.text.replace(f,function(t,e,r,n){return n=n.replace(/\[/g,"&#91;"),n=n.replace(/\]/g,"&#93;"),r=r||"",n=n||"","["+e+r+"]"+n+"[/"+e+"]"})););return e.text=i(e.text),e.text=o(e.text),s=t("bbcode",e.text,-1,"","",e.text),r.html=n(e),(-1!==r.html.indexOf("[")||-1!==r.html.indexOf("]"))&&s.push("Some tags appear to be misaligned."),e.removeMisalignedTags&&(r.html=r.html.replace(/\[.*?\]/g,"")),e.addInLineBreaks&&(r.html=r.html.replace(/\r\n/g,"\n"),r.html=r.html.replace(/(\r|\n)/g,"$1<br/>")),r.html=r.html.replace("&#91;","["),r.html=r.html.replace("&#93;","]"),r.error=0===s.length?!1:!0,r.errorQueue=s,r},p}();Boron={},Boron.persistent_merge=function(t,e){return e=e||[],(Array.isArray(e)||Array.isArray(e))&&Array.isArray(e)!==Array.isArray(t),Object.keys(e).reduce(function(t,r){return Boron.set_deep_value(t,r,e[r])},t)},Boron.set_deep_value=function(t,e,r){var n="___MAGIC___",i=new RegExp(n,"g"),e=e.replace(/\\\./g,n),o=e.split(".").map(function(t){return t.replace(i,".")}),s=o.pop(),a=next=Boron.shallow_copy(t);return o.forEach(function(t){next[t]=Boron.shallow_copy(next[t]),next=next[t]}),next[s]=r,a},Boron.shallow_copy=function(t){return Array.isArray(t)?t.slice():Object.keys(t||{}).reduce(function(e,r){return e[r]=t[r],e},{})},Boron.shallow_diff=function(t,e){return Object.keys(t).reduce(function(r,n){return JSON.stringify(t[n])!=JSON.stringify(e[n])&&(r[n]=e[n]),r},t.constructor())},Boron.deep_diff=function(t,e){return Object.keys(e).reduce(function(r,n){var i=typeof t[n],o=typeof e[n];if(i!=o)return r[n]=e[n],r;if("object"==i){var s=Boron.deep_diff(t[n],e[n]);return Object.keys(s).length&&(r[n]=s),r}return t[n]!==e[n]&&(r[n]=e[n]),r},e.constructor())},Boron.flatten=function(t,e){if(!Boron.proper_object(t))return{};var r={};e=e?e+".":"";for(var n in t)Boron.proper_object(t[n])?r=Boron.extend(r,Boron.flatten(t[n],e+n)):r[e+n]=t[n];return r},Boron.unflatten=function(t){return Boron.persistent_merge({},t)},Boron.proper_object=function(t){return"object"==typeof t&&!Array.isArray(t)},Boron.extend=function(){var t={};return Array.prototype.slice.call(arguments).forEach(function(e){for(var r in e)t[r]=e[r]}),t},Boron.memoize=function(t){var e={};return function(){var r=Array.prototype.slice.call(arguments),n=r.toString();return e[n]?e[n]:e[n]=t.apply(null,r)}},PBFiles={},PBFiles.oldFile=null,PBFiles.createPuff=function(t,e){var r,n={},e=e||"file",i=["local"],o=PB.getCurrentUserRecord(),s=[o];return r=PB.simpleBuildPuff(e,t,n,i,s)},PBFiles.prepBlob=function(t,e){"string"!=typeof t&&(t=JSON.stringify(t));var r;return r="file"==e?PBFiles.dataURItoBlob(t):new Blob([t],{type:"text/plain"}),navigator.appVersion.toString().indexOf(".NET")>0?r:(PBFiles.oldFile&&window.URL.revokeObjectURL(PBFiles.oldFile),PBFiles.oldFile=window.URL.createObjectURL(r),PBFiles.oldFile)},PBFiles.extractLetterPuff=function(t){var e=PB.parseJSON(t);if(!e)return PB.emptyPromise("Envelope was not JSON encoded");var r=PB.Data.getDecryptedPuffPromise(e);return r},PBFiles.openPuffFile=function(t){return PBFiles.handleFileOpen(t)},PBFiles.openTextFile=function(t){return PBFiles.handleFileOpen(t)},PBFiles.openBinaryFile=function(t){return PBFiles.handleFileOpen(t,"asDataURI")},PBFiles.handleFileOpen=function(t,e){return new Promise(function(r,n){var i=new FileReader;return i.onload=function(t){var e=t.target.result;r(e)},t.files[0]?void(e?i.readAsDataURL(t.files[0]):i.readAsText(t.files[0])):n("No file selected")})},PBFiles.dataURItoBlob=function(t){var e;e=t.split(",")[0].indexOf("base64")>=0?atob(t.split(",")[1]):unescape(t.split(",")[1]);for(var r=t.split(",")[0].split(":")[1].split(";")[0],n=new Uint8Array(e.length),i=0;i<e.length;i++)n[i]=e.charCodeAt(i);return new Blob([n],{type:r})},Events={},Events.subs={},Events.pub=function(t,e){return setImmediate(function(){Events.start_pub(t,e)})},Events.sub=function(t,e){t=Events.scrub_path(t).join("/"),Events.subs[t]||(Events.subs[t]=[]),Events.subs[t].push(e)},Events.unsub=function(t,e){t=Events.scrub_path(t).join("/");var r=Events.subs[t];if(!r)return!1;var n=r.indexOf(e);return-1==n?!1:void r.splice(n,1)},Events.start_pub=function(t,e){var r=Events.scrub_path(t),n=r.join("/");Events.try_pub("*",e,n),r.reduce(function(t,r){var i=t+r+"/";return Events.try_pub(i+"*",e,n),i},""),Events.try_pub(n,e,n)},Events.try_pub=function(t,e,r){var n=Events.subs[t];return n&&n.length?void n.forEach(function(t){t(e,r)}):!1},Events.scrub_path=function(t){return t.replace(/^[^\w*-]+/,"").replace(/[^\w*-]+$/,"").split("/").map(function(t){return t.replace(/[^\w*-]/g,"")})},Gridbox={},Gridbox.getGridCoordBox=function(t,e,r,n,i){var o=function(t,e){return Math.min(t,e)},s=r/e,a=n/t,u=function(t,e){return t==e},c=Array.apply(0,Array(t)).map(function(){return Array.apply(0,Array(e)).map(function(){return 0})});return{get:function(){return c},set_eq:function(t){u=t},add:function(r,n,u,f,h,l,p){if(h=o(h||t-n,t-n),l=o(l||e-r,e-r),u=o(u||0,h),f=o(f||0,l),0>l||0>h)return PB.onError("Block is too big for the grid");t:for(var d=u;h>=d;d++)e:for(var g=f;l>=g;g++){for(var y=0;n>y;y++)for(var v=0;r>v;v++)if(c[d+y][g+v])continue e;break t}if(g==l+1&&d==h+1)return PB.onError("No room in the grid");if(null==g||null==d)return PB.onError("Block too big for the grid");for(var y=0;n>y;y++)for(var v=0;r>v;v++)c[d+y][g+v]=p||1;return{width:r*s,height:n*a,x:g*s,y:d*a+i/1.5}}}},Gridbox.findNeighbor=function(t,e,r){var n=Gridbox.findBoxInGrid(t,e);if(!n)return!1;var i=Gridbox.makeDirBox(n,r);return i?Gridbox.firstThingInBox(t,i[0],i[1]):!1},Gridbox.findBoxInGrid=function(t,e,r){r=r||function(t,e){return t===e},r=function(t,e){return t.sig===e.sig};t:for(var n=0,i=t.length;i>n;n++)for(var o=0,s=t[n].length;s>o;o++)if(r(t[n][o],e))break t;if(n==t.length&&o==t[0].length)return!1;for(var a=0,i=t.length-n;i>a&&r(t[n+a][o],e);a++);for(var u=0,s=t[n].length-o;s>u&&r(t[n][o+u],e);u++);return[[o,n],[o+u-1,n+a-1]]},Gridbox.firstThingInBox=function(t,e,r){for(var n=Math.max(e[1],0),i=Math.min(r[1],t.length-1);i>=n;n++)for(var o=Math.max(e[0],0),s=Math.min(r[0],t[0].length-1);s>=o;o++)if(t[n][o])return t[n][o]},Gridbox.makeDirBox=function(t,e){var r=t[0][1],n=t[0][0],i=t[1][1],o=t[1][0];return"up"==e?[[n,r-1],[o,r-1]]:"down"==e?[[n,i+1],[o,i+1]]:"left"==e?[[n-1,r],[n-1,i]]:"right"==e?[[o+1,r],[o+1,i]]:void 0},Dagoba={},Dagoba.G={},Dagoba.graph=function(t,e){var r=Object.create(Dagoba.G);return r.vertices=[],r.edges=[],r.vertexIndex={},t&&Array.isArray(t)&&r.addVertices(t),e&&Array.isArray(e)&&r.addEdges(e),r},Dagoba.G.v=function(){var t=Dagoba.query(this);return t.add(["vertex"].concat([].slice.call(arguments))),t},Dagoba.G.addVertex=function(t){t._id||(t._id=this.vertices.length+1),this.vertices.push(t),this.vertexIndex[t._id]=t,t._out=[],t._in=[]},Dagoba.G.addEdge=function(t){return t._label?(t._in=this.findVertexById(t._in),t._out=this.findVertexById(t._out),t._in&&t._out?(t._out._out.push(t),t._in._in.push(t),void this.edges.push(t)):!1):!1},Dagoba.G.addVertices=function(t){t.forEach(this.addVertex.bind(this))},Dagoba.G.addEdges=function(t){t.forEach(this.addEdge.bind(this))},Dagoba.G.findVertexById=function(t){return this.vertexIndex[t]},Dagoba.G.findVerticesByIds=function(t){return 1==t.length?[].concat(this.findVertexById(t[0])||[]):t.map(this.findVertexById.bind(this)).filter(Boolean)},Dagoba.G.findVertices=function(t){return"object"==typeof t[0]?this.searchVertices(t[0]):0==t.length?this.vertices.slice():this.findVerticesByIds(t)},Dagoba.G.searchVertices=function(t){return this.vertices.filter(function(e){return Object.keys(t).reduce(function(r,n){return r&&t[n]==e[n]},!0)})},Dagoba.G.findEdgeById=function(t){return Dagoba.find(this.edges,function(e){return e._id==t})},Dagoba.G.findOutEdges=function(t){return t._out},Dagoba.G.findInEdges=function(t){return t._in},Dagoba.G.toString=function(){return'{"V":'+JSON.stringify(this.vertices,Dagoba.cleanvertex)+',"E":'+JSON.stringify(this.edges,Dagoba.cleanedge)+"}"},Dagoba.fromString=function(t){var e=JSON.parse(t);return Dagoba.graph(e.V,e.E)},Dagoba.Q={},Dagoba.query=function(t){var e=Object.create(Dagoba.Q);return e.graph=t,e.state=[],e.program=[],e.gremlins=[],e},Dagoba.Q.run=function(){function t(t,i){var o=n[t],s=r[t]=r[t]||{};return Dagoba.QFuns[o[0]]?Dagoba.QFuns[o[0]](e,o.slice(1)||{},i,s):Dagoba.onError("Unrecognized function call: "+o[0])||i||"pull"}var e=this.graph,r=this.state,n=this.program,i=(this.gremlins,n.length-1),o=i,s=-1,a=[],u=!1;if(!n.length)return[];for(;i>s;){if(u=t(o,u),"pull"==u){if(u=!1,o-1>s){o--;continue}s=o}"done"==u&&(s=o,u=!1),o++,o>i&&(u&&a.push(u),u=!1,o--)}return a=a.map(function(t){return t.result?t.result:t.vertex}),a=Dagoba.firehooks("postquery",this,a)[0]},Dagoba.Q.add=function(t){return this.program.push(t),this},Dagoba.addQFun=function(t,e){Dagoba.QFuns[t]=e,Dagoba.Q[t]=function(){return this.add([t].concat([].slice.apply(arguments)))}},Dagoba.QFuns={},Dagoba.addQFun("vertex",function(t,e,r,n){if(n.vertices||(n.vertices=t.findVertices(e)),!n.vertices.length)return"done";var i=n.vertices.pop();return Dagoba.make_gremlin(i)}),Dagoba.addQFun("out",function(t,e,r,n){if(!(r||n.edges&&n.edges.length))return"pull";if(n.edges&&n.edges.length||(n.edges=t.findOutEdges(r.vertex).filter(Dagoba.filterThings(e[0]))),!n.edges.length)return"pull";var i=n.edges.pop()._in,o=Dagoba.make_gremlin(i);return o}),Dagoba.addQFun("outAllN",function(t,e,r,n){var i=e[0],o=e[1]-1;if(!n.edgeList){if(!r)return"pull";n.edgeList=[],n.current=0,n.edgeList[0]=t.findOutEdges(r.vertex).filter(Dagoba.filterThings(i))}if(!n.edgeList[n.current].length){if(n.current>=o||!n.edgeList[n.current+1]||!n.edgeList[n.current+1].length)return n.edgeList=!1,"pull";n.current++,n.edgeList[n.current+1]=[]}var s=n.edgeList[n.current].pop()._in;n.current<o&&(n.edgeList[n.current+1]||(n.edgeList[n.current+1]=[]),n.edgeList[n.current+1]=n.edgeList[n.current+1].concat(t.findOutEdges(s).filter(Dagoba.filterThings(i))));var a=Dagoba.make_gremlin(s);return a}),Dagoba.addQFun("inAllN",function(t,e,r,n){var i=e[0],o=e[1]-1;if(!n.edgeList){if(!r)return"pull";n.edgeList=[],n.current=0,n.edgeList[0]=t.findInEdges(r.vertex).filter(Dagoba.filterThings(i))}if(!n.edgeList[n.current].length){if(n.current>=o||!n.edgeList[n.current+1]||!n.edgeList[n.current+1].length)return n.edgeList=!1,"pull";n.current++,n.edgeList[n.current+1]=[]}var s=n.edgeList[n.current].pop()._out;n.current<o&&(n.edgeList[n.current+1]||(n.edgeList[n.current+1]=[]),n.edgeList[n.current+1]=n.edgeList[n.current+1].concat(t.findInEdges(s).filter(Dagoba.filterThings(i))));var a=Dagoba.make_gremlin(s);return a}),Dagoba.addQFun("in",function(t,e,r,n){if(!(r||n.edges&&n.edges.length))return"pull";if(n.edges&&n.edges.length||(n.edges=t.findInEdges(r.vertex).filter(Dagoba.filterThings(e[0]))),!n.edges.length)return"pull";var i=n.edges.pop()._out,o=Dagoba.make_gremlin(i);return o}),Dagoba.addQFun("property",function(t,e,r){return r?(r.result=r.vertex[e[0]],r):"pull"}),Dagoba.addQFun("unique",function(t,e,r,n){return r?n[r.vertex._id]?"pull":(n[r.vertex._id]=!0,r):"pull"}),Dagoba.addQFun("filter",function(t,e,r){return r?"function"!=typeof e[0]?Dagoba.onError("Filter arg is not a function: "+e[0])||r:e[0](r.vertex)?r:"pull":"pull"}),Dagoba.addQFun("take",function(t,e,r,n){return n.taken=n.taken?n.taken:0,n.taken==e[0]?(n.taken=0,"done"):r?(n.taken++,r):"pull"}),Dagoba.hooks={},Dagoba.addhook=function(t,e){Dagoba.hooks[t]||(Dagoba.hooks[t]=[]),Dagoba.hooks[t].push(e)},Dagoba.firehooks=function(t,e){var r=[].slice.call(arguments,2);return((Dagoba.hooks||{})[t]||[]).reduce(function(t,r){return r.apply(e,t)},r)},Dagoba.make_gremlin=function(t,e){return{vertex:t,state:e}},Dagoba.filterThings=function(t){return function(e){return t?t+""===t?e._label==t:Array.isArray(t)?!!~t.indexOf(e._label):Dagoba.objFilter(e,t):!0}},Dagoba.objFilter=function(t,e){for(var r in e)if(t[r]!=e[r])return!1;return!0},Dagoba.find=function(t,e){for(var r=0,n=t.length;n>r;r++)if(e(t[r],r,t))return t[r]},Dagoba.cleanvertex=function(t,e){return"_in"==t||"_out"==t?void 0:e},Dagoba.cleanedge=function(t,e){return"_in"==t?e._id:"_out"==t?e._id:e},Dagoba.uniqueify=function(t){return[t.filter(function(t,e,r){return r.indexOf(t)==e})]},Dagoba.cleanclone=function(t){return[t.map(function(t){return JSON.parse(JSON.stringify(t,function(t,e){return"_"==t[0]?void 0:e}))})]},Dagoba.onError=function(t){return console.log(t),!1},"undefined"==typeof PB&&(PB={}),PB.CONFIG||(PB.CONFIG={}),PB.Modules={},PB.M=PB.Modules,PB.version="0.7.2",PB.init=function(t){function e(e,r){PB.CONFIG[e]=t[e]||PB.CONFIG[e]||r}function r(){var t=PB.Persist.get("CONFIG");return t?(PB.CONFIG.mods=t,void Object.keys(PB.CONFIG.mods).forEach(function(e){PB.CONFIG[e]=t[e]})):!1}t=t||{},e("zone",""),e("puffApi","https://i.cx/api/puffs/api.php"),e("userApi","https://i.cx/api/users/api.php"),e("eventsApi","https://i.cx/api/puffs/api.php"),e("enableP2P",!1),e("pageBatchSize",10),e("initLoadGiveup",200),e("networkTimeout",2e4),e("noLocalStorage",!1),e("netblockSuffix","local"),e("cryptoworkerURL",""),e("ephemeralKeychain",!1),e("initLoadBatchSize",20),e("inMemoryShellLimit",1e4),e("globalBigBatchLimit",2e3),e("inMemoryMemoryLimit",3e8),e("anonPrivateAdminKey","5KdVjQwjhMchrZudFVfeRiiPMdrN6rc4CouNh7KPZmh8iHEiWMx"),e("disableSendToServer",!1),e("disableReceivePublic",!1),e("disableCloudIdentity",!1),e("supportedContentTypes",!1),e("shellContentThreshold",1e3),e("localStorageShellLimit",1e3),e("localStorageMemoryLimit",3e6),PB.Users.init(t),PB.Data.init(t),PB.Net.init(t);var n=Object.keys(PB.M);n.forEach(function(e){PB.M[e].init&&PB.M[e].init(t)}),r(),PB.buildCryptoworker(t)},PB.getPuffBySig=function(t){var e=PB.Data.getCachedShellBySig(t);return e||(e=PB.Data.getDecryptedLetterBySig(t)),e?PB.Data.getPuffFromShell(e):PB.Data.getPuffBySig(t)},PB.postPublicMessage=function(t,e){e=e||"text";var r=PB.getCurrentUsername();if(!r)return PB.emptyPromise("You must have a current identity to post a public message");var n=PB.simpleBuildPuff(e,t);return PB.addPuffToSystem(n)},PB.postPrivateMessage=function(t,e,r){r=r||"text",e=e||[],Array.isArray(e)||(e=[e]);var n=PB.getCurrentUsername();if(!n)return PB.emptyPromise("You must have a current identity to post a private message");e.push(n),e=PB.uniquify(e);var i=PB.Users.usernamesToUserRecordsPromise(e);return i.then(function(n){var i=PB.simpleBuildPuff(r,t,null,e,n);return PB.addPuffToSystem(i)})},PB.getMyMessages=!0,PB.createIdentity=function(t,e){var r=t+e,n=PB.Crypto.passphraseToPrivateKeyWif(r),i=PB.registerTopLevelUser(t,n,n,n);return i.then(function(){var r=1;PB.addAlias(t,t,r,n,n,n,{passphrase:e}),PB.switchIdentityTo(t)}),i},PB.registerTopLevelUser=function(t,e,r,n){var i=PB.Crypto.privateToPublic(e),o=PB.Crypto.privateToPublic(r),s=PB.Crypto.privateToPublic(n),a={requestedUsername:t,rootKey:i,adminKey:o,defaultKey:s},u=[],c="requestUsername",f="updateUserRecord",h=PB.buildPuff(t,r,u,f,c,a),l=PB.Net.updateUserRecord(h);return l},PB.registerSubuser=function(t,e,r,n){var i,o=PB.getCurrentUsername();return PB.useSecureInfo(function(s,s,s,a){i=PB.registerSubuserForUser(o,a,t,e,r,n)}),i},PB.updatePrivateKey=function(t,e,r){var n=PB.getCurrentUsername(),i=PB.Crypto.privateToPublic(e);if(-1==["defaultKey","adminKey","rootKey"].indexOf(t))return PB.emptyPromise("That is not a valid key to modify");var o={},s=[],a="modifyUserKey",u="updateUserRecord";o.keyToModify=t,o.newKey=i,o.time=Date.now();var c=new Promise(function(i,c){var f;PB.useSecureInfo(function(e,e,r,i){var h="privateRootKey",l=r;return"defaultKey"==t&&(h="privateAdminKey",l=i),l?void(f=PB.buildPuff(n,l,s,u,a,o)):c(PB.makeError("You need the "+h+" to change the "+t+" key."))});var h=PB.Net.updateUserRecord(f);h.then(function(n){return"defaultKey"==t&&PB.useSecureInfo(function(t,i,o,s){PB.addAlias(i,i,n.capa,o,s,e,r)}),"adminKey"==t&&PB.useSecureInfo(function(t,i,o,t,s){PB.addAlias(i,i,n.capa,o,e,s,r)}),"rootKey"==t&&PB.useSecureInfo(function(t,i,t,o,s){PB.addAlias(i,i,n.capa,e,o,s,r)}),i(n)}).catch(function(t){return c(PB.makeError(t))})});return c},PB.getProfilePuff=function(t){var e=PB.Data.profiles[t];if(e)return Promise.resolve(e);var r=PB.Net.getProfilePuff(t);return r=r.then(function(e){var r=e[0];return r||(r={payload:{}}),PB.Data.profiles[PB.Users.justUsername(r.username||t)]=r,r})},PB.handlers={},PB.addHandler=function(t,e){PB.handlers[t]||(PB.handlers[t]=[]),PB.handlers[t].push(e)},PB.runHandlers=function(t){var e=[].slice.call(arguments,1);return(PB.handlers[t]||[]).reduce(function(t,r){return r.apply(null,null==t?e:Array.isArray(t)?t:[t])},e)},PB.makeHandlerHandler=function(t){return function(e){return PB.addHandler(t,e)}},PB.addErrorHandler=PB.makeHandlerHandler("error"),PB.addNewPuffHandler=PB.makeHandlerHandler("newPuffs"),PB.addDHTErrorHandler=PB.makeHandlerHandler("DHTError"),PB.addRelationshipHandler=PB.makeHandlerHandler("relationship"),PB.addTimeoutErrorHandler=PB.makeHandlerHandler("timeoutError"),PB.addNetworkErrorHandler=PB.makeHandlerHandler("networkError"),PB.addNewPuffReportHandler=PB.makeHandlerHandler("newPuffReport"),PB.addIdentityUpdateHandler=PB.makeHandlerHandler("identityUpdate"),PB.addNetworkResponseHandler=PB.makeHandlerHandler("networkresponse"),PB.addPayloadModifierHandler=PB.makeHandlerHandler("payloadModifier"),PB.addBeforeSwitchIdentityHandler=PB.makeHandlerHandler("beforeSwitchIdentity"),PB.addAfterSwitchIdentityHandler=PB.makeHandlerHandler("afterSwitchIdentity"),PB.simpleBuildPuff=function(t,e,r,n,i,o){var s;return r=PB.runHandlers("payloadModifier",r),PB.useSecureInfo(function(a,u,c,f,h){var l=!1,p=PB.getCurrentVersionedUsername();s=PB.buildPuff(p,h,n,t,e,r,l,i,o)}),s},PB.buildPuff=function(t,e,r,n,i,o,s,a,u){var c=PB.Data.packagePuffStructure(t,r,n,i,o,s);return c.sig=PB.Crypto.signPuff(c,e),a&&(c=PB.Data.encryptPuff(c,e,a,u)),c},PB.addPuffToSystem=function(t){return PB.Data.getCachedShellBySig(t.sig)?!1:(PB.Data.addShellsThenMakeAvailable(t),PB.Net.distributePuff(t),t)},PB.decryptPuffForReals=function(t,e,r,n){if(!t.keys)return!1;var i=t.keys[r],o=PB.Crypto.decryptPrivateMessage(i,e,n),s=t.payload.content,a=PB.Crypto.decryptWithAES(s,o),u=PB.tryDecodeURIComponent(escape(a));return PB.parseJSON(u)},PB.login=function(t,e){return userprom=PB.Users.getUserRecordNoCache(t),userprom.then(function(t){var r=t.identity;return r?(puffprom=PB.Net.getPuffBySig(r),puffprom.then(function(r){var n=r[0],i=t.defaultKey,o=PB.Users.makeVersioned(t.username,t.capa),s=e,a=PB.Data.decryptPuffAlmostForReals(n,i,o,s);return a.then(function(t){return t&&t.payload&&t.payload.content?PB.loginWithIdentityFile(t.payload.content):void 0})})):PB.onError("That user record has no identity")})},PB.loginWithIdentityFile=function(t){var e=t.username,r=t.aliases,n=t.preferences;return e&&r&&n?(PB.currentIdentityHash=PB.Crypto.createMessageHash(JSON.stringify(t)),PB.addIdentity(e,r,n),PB.switchIdentityTo(e)):PB.onError("That is not a valid identity object")},PB.loginWithPassphrase=function(t,e,r){var n=r?e:t+e,i=PB.Crypto.passphraseToPrivateKeyWif(n),o=PB.Crypto.privateToPublic(i),s=PB.Users.getUserRecordNoCache(t);return s.then(function(n){return n.defaultKey!=o&&n.adminKey!=o&&n.rootKey!=o?r?!1:PB.loginWithPassphrase(t,e,!0):PB.login(t,i)})},PB.storeIdentityFileInCloud=function(){!PB.currentIdentityHash;var t=PB.formatIdentityFile();if(!t)return!1;var e=PB.Crypto.createMessageHash(JSON.stringify(t));if(PB.currentIdentityHash==e)return!1;PB.currentIdentityHash=e;var r={},n=[],i="identity",o=PB.getCurrentUserRecord(),s=[o];if(!o)return!1;var a=PB.simpleBuildPuff(i,t,r,n,s);if(!a)return!1;PB.Net.distributePuff(a);var u,r={},n=[],i="updateUserRecord",t="setIdentity";if(r.identity=a.sig,PB.useSecureInfo(function(e,o,e,s){return s?void(u=PB.buildPuff(o,s,n,i,t,r)):PB.onError("You must have an administrative key to upload your identity file")}),!u)return!1;var c=PB.Net.updateUserRecord(u);
return c},PB.formatIdentityFile=function(t){if(t=t||PB.getCurrentUsername(),!t)return!1;var e={};return PB.useSecureInfo(function(r){var n=r[t];e.username=t,e.aliases=n.aliases,e.preferences=n.preferences,e.version="1.1"}),e},PB.registerSubuserForUser=function(t,e,r,n,i,o){var s={requestedUsername:r,defaultKey:o,adminKey:i,rootKey:n,time:Date.now()},a=[],u="requestUsername",c="updateUserRecord",f=PB.buildPuff(t,e,a,c,u,s);return PB.Net.updateUserRecord(f)},PB.buildCryptoworker=function(t){var e=t.cryptoworkerURL||PB.CONFIG.cryptoworkerURL;return e?(PB.cryptoworker=new Worker(e),void PB.cryptoworker.addEventListener("message",PB.workerreceive)):!1},PB.workerqueue=[],PB.workerautoid=0,PB.workerreceive=function(t){var e=t.data.id;if(!e)return!1;var r=PB.workerqueue[e];return r?(r(t.data.evaluated),void delete PB.workerqueue[e]):!1},PB.workersend=function(t,e,r){PB.workerautoid+=1,PB.workerqueue[PB.workerautoid]=r,Array.isArray(e)||(e=[e]),PB.cryptoworker.postMessage({fun:t,args:e,id:PB.workerautoid})},PB.implementSecureInterface=function(t,e,r,n,i,o,s){"function"==typeof t&&(PB.useSecureInfo=function(e){return t(function(t,r,n,i,o){var s=JSON.parse(JSON.stringify(t));e(s,r,n,i,o)})}),"function"==typeof e&&(PB.addIdentity=e),"function"==typeof r&&(PB.addAlias=r),"function"==typeof n&&(PB.setPrimaryAlias=n),"function"==typeof i&&(PB.setPreference=i),"function"==typeof o&&(PB.switchIdentityTo=function(t){PB.runHandlers("beforeSwitchIdentity",t);var e=o(t);return PB.runHandlers("afterSwitchIdentity",t),e}),"function"==typeof s&&(PB.removeIdentity=s),PB.getCurrentUsername=function(){var t;return PB.useSecureInfo(function(e,r){t=r}),t},PB.getCurrentCapa=function(){var t;return PB.useSecureInfo(function(e,r){t=((e[r]||{}).primary||{}).capa||0}),t},PB.getCurrentVersionedUsername=function(){var t=PB.getCurrentUsername();return t?PB.Users.makeVersioned(t,PB.getCurrentCapa()):PB.onError("No current user in wardrobe")},PB.getCurrentUserRecord=function(){var t=PB.getCurrentVersionedUsername();if(!t)return!1;var e=PB.Users.records[t];return e?e:PB.onError("That user does not exist in our records")},PB.getAllIdentityUsernames=function(){var t;return PB.useSecureInfo(function(e){t=Object.keys(e)}),t}},PB.validateUsername=function(t){return t?t.length>256?PB.onError("Usernames must be shorter than 256 characters",t):t!=t.toLowerCase()?PB.onError("Usernames must be lowercase",t):/^[0-9a-z.]+$/.test(t)?!0:PB.onError("Usernames must be alphanumeric",t):PB.onError("Username is required",t)},PB.isValidShell=function(t){return t.sig&&t.routes&&t.username?"object"!=typeof t.payload?!1:t.payload.type?!0:!1:!1},PB.isGoodPuff=function(t){if(!PB.M.Forum.contentTypes[shell.payload.type])return Events.pub("track/unsupported-content-type",{type:shell.payload.type,sig:shell.sig}),!1;var e=PB.Users.getUserRecordPromise(t.username);return e.then(function(e){return PB.Crypto.verifyPuffSig(t,e.defaultKey)})},PB.onError=function(t,e,r){var n={msg:t,obj:e};return PB.runHandlers("error",n),r&&PB.runHandlers(r,n),!1},PB.catchError=function(t){return function(e){throw PB.onError(t,e),e}},PB.throwError=function(t,e){var r=e?Error(e):"";throw PB.makeError(t,r)},PB.makeError=function(t,e,r){return PB.onError(t,e,r),Error(t)},PB.emptyPromise=function(t){return t&&PB.onError(t),Promise.reject(t)},PB.throwNetError=function(t,e){var r="networkError",n=e?Error(e):"";throw PB.makeError(t,n,r)},PB.throwDHTError=function(t,e){var r="DHTError",n=e?Error(e):"";throw PB.makeError(t,n,r)},PB.parseJSON=function(t){try{return JSON.parse(t)}catch(e){return PB.onError("Invalid JSON string",e)}},PB.stringifyJSON=function(t){try{return JSON.stringify(t)}catch(e){return PB.onError("Invalid object",e)}},PB.tryDecodeURIComponent=function(t){try{return decodeURIComponent(t)}catch(e){return PB.onError("Invalid URI string",e)}},PB.promisesPending={},PB.promiseMemoize=function(t,e){return e||(e=PB.removePromisePending),function(){var r=JSON.stringify([t.toString(),arguments]);if(PB.promisesPending[r])return PB.promisesPending[r];var n=t.apply(t,arguments);return n=n.then(function(t){return e(r,t),t},function(t){throw e(r,t),t}),PB.promisesPending[r]=n,n}},PB.removePromisePending=function(t){delete PB.promisesPending[t]},~function(){function t(t){return r.push(t),i&&(i=!1,window.postMessage(n,"*")),!1}function e(t){if(t.data!=n)return!1;t.stopPropagation(),i=!0;var e=r;r=[];for(var o=0,s=e.length;s>o;o++)e[o]()}var r=[],n=12345,i=!0;"undefined"!=typeof window&&(window.addEventListener("message",e,!0),window.setImmediate=t)}(),PB.queuer=function(){var t=[],e=function(r){r(function(){return t.length?(t.shift()(),void e(r)):!1})},r=function(r,n){return t.push(n),t.length>1?!1:void e(r)};return r},PB.once=function(){var t=[],e=function(){var e=t;t=[];for(var r=0,n=e.length;n>r;r++)e[r]()},r=function(r,n){return~t.indexOf(n)?!1:(t.push(n),t.length>1?!1:void r(e))};return r},~function(){if("undefined"!=typeof window){window.queueImmediate=PB.queuer().bind(null,setImmediate),window.onceImmediate=PB.once().bind(null,setImmediate),window.queueRAF=PB.queuer().bind(null,requestAnimationFrame),window.onceRAF=PB.once().bind(null,requestAnimationFrame);var t={};window.onceInAwhile=function(e,r){return t[e]?!1:void(t[e]=setTimeout(function(){e(),t[e]=!1},r))}}}(),PB.prop=function(t,e){return arguments.length<2?function(e){return e[t]}:e[t]},PB.uniquify=function(t){return t.filter(PB.unique)},PB.unique=function(t,e,r){return r.indexOf(t)==e},PB.Net={},PB.Net.init=function(){PB.Net.P2P.init()},PB.Net.getPuffBySig=function(t){var e=PB.CONFIG.puffApi,r={type:"getPuffBySig",sig:t};return PB.Net.PBgetJSON(e,r)},PB.Net.getKidSigs=function(t){var e=PB.CONFIG.puffApi,r={type:"getChildrenBySig",sig:t};return PB.Net.PBgetJSON(e,r)},PB.Net.getKidSigs=Boron.memoize(PB.Net.getKidSigs),PB.Net.getStarShells=function(){var t=PB.CONFIG.puffApi,e={type:"getPuffs",contentType:"star",numb:PB.CONFIG.globalBigBatchLimit};return PB.Net.PBgetJSON(t,e)},PB.Net.getConversationPuffs=function(t,e,r){t=t.replace("&",",");var n=PB.CONFIG.puffApi,i={type:"getPuffs",contentType:"encryptedpuff",conversationPartners:t,numb:e,offset:r};return PB.Net.PBgetJSON(n,i)},PB.Net.getMyPrivatePuffs=function(t,e,r,n){if(!t)return PB.emptyPromise();e=e||PB.CONFIG.globalBigBatchLimit;var i=PB.CONFIG.puffApi,o={route:t,username:t,fromAndTo:1,type:"getPuffs",contentType:"encryptedpuff",fullOrShell:n||"full",numb:e,offset:r};return PB.Net.PBgetJSON(i,o)},PB.Net.getProfilePuff=function(t){var e=PB.CONFIG.puffApi,r={username:t,fullOrShell:"full",contentType:"profile",type:"getPuffs",sort:"DESC",numb:1};return PB.Net.PBgetJSON(e,r)},PB.Net.getProfilePuff=PB.promiseMemoize(PB.Net.getProfilePuff),PB.Net.getSomeShells=function(t,e,r,n){var i=t.mode;if("ancestors"==i)return PB.Net.getAncestors([t.focus],r);if("descendants"==i)return PB.Net.getDescendants([t.focus],r);var o=PB.CONFIG.puffApi,s={type:"getPuffs",contentType:"plain"};r&&(s.numb=r),n&&(s.offset=n),t.sort&&(s.sort=t.sort),e.users&&(s.username=e.users),e.routes&&(s.route=e.routes),e.tags&&(s.tags=e.tags),e.types&&(s.contentType=e.types),t.ancestors&&(s.maxParents=t.ancestors);var a=JSON.stringify(e.types),u='["profile"]'==a;return PB.CONFIG.disableReceivePublic&&!u?PB.emptyPromise().then(function(){return[]}):PB.Net.PBgetJSON(o,s).then(function(t){return t||[]},function(){return[]})},PB.Net.getAncestors=function(t,e){function r(t,e,n){if(!t.length)return!1;if(!n)return!1;var i=t[0];if(~e.indexOf(i))return r(t.slice(1),e,n);var o=PB.Data.getPuffBySig(i);if(o)return r(t.slice(1).concat(o.payload.parents),e.concat(i),n);n--;var s=PB.Data.pendingPuffPromises[i];s.then(function(o){r(t.slice(1).concat(((o[0]||{}).payload||{}).parents),e.concat(i),n)})}return r(t,[],e),PB.emptyPromise()},PB.Net.getDescendants=function(t,e){function r(t,e,n){if(!t.length)return!1;if(!n)return!1;var i=t[0];if(~e.indexOf(i))return r(t.slice(1),e,n);var o=PB.Data.getCachedShellBySig(i);o||(PB.Data.getPuffBySig(i),n--);var s=PB.Net.getKidSigs(i);return s.then(function(o){r(t.slice(1).concat(o),e.concat(i),n)})}return r(t,[],e),PB.emptyPromise()},PB.Net.getSiblings=function(){return PB.emptyPromise()},PB.Net.distributePuff=function(t){if(PB.CONFIG.disableSendToServer)return!1;if(PB.CONFIG.netblockSuffix){var e=[t.username];t.keys&&(e=e.concat(Object.keys(t.keys))),e=e.map(PB.Users.justUsername);var r=e.map(function(t){var e=t.split(".");return e[e.length-1]});if(r.indexOf(PB.CONFIG.netblockSuffix)>-1)return!1}PB.Net.sendPuffToServer(t),PB.Net.P2P.sendPuffToPeers(t)},PB.Net.sendPuffToServer=function(t){var e={type:"addPuff",puff:JSON.stringify(t)};return PB.Net.PBpost(PB.CONFIG.puffApi,e).catch(PB.catchError("Could not send puff to server"))},PB.Net.getUserRecord=function(t,e){var r=PB.CONFIG.userApi,n=PB.Users.makeVersioned(t,e);t=PB.Users.justUsername(n),0!==e&&(e=PB.Users.justCapa(n));var i={type:"getUser",username:t};return e&&(i.capa=e),PB.Net.PBgetJSON(r,i)},PB.Net.updateUserRecord=function(t){var e={type:"updateUsingPuff",puff:t},r=PB.Net.PBpost(PB.CONFIG.userApi,e);return r.catch(PB.catchError("Sending user record modification puff failed")).then(JSON.parse).then(function(t){return PB.Users.process(t)||PB.throwError("Invalid user record",JSON.stringify(t))})},PB.Net.xhr=function(t,e,r){return new Promise(function(n,i){var o=new XMLHttpRequest;o.open(e.method||"GET",t),Object.keys(e.headers||{}).forEach(function(t){o.setRequestHeader(t,e.headers[t])});var s=new FormData;Object.keys(r||{}).forEach(function(t){var e="object"==typeof r[t]?PB.stringifyJSON(r[t]):r[t];s.append(t,e)}),e&&e.type&&(o.responseType=e.type),o.onload=function(){return 200!=o.status?i(PB.makeError(o.statusText)):"json"==o.responseType&&null===o.response?i(PB.makeError("Invalid JSON in response",o.response)):void n(o.responseType!=e.type&&"json"==e.type?PB.parseJSON(o.response):o.response)},o.onerror=function(t){i(PB.makeError("Network Error",t,"networkError"))},o.ontimeout=function(t){i(PB.makeError("Timeout Error",t,"timeoutError"))},o.timeout=PB.CONFIG.networkTimeout,o.send(s)})},PB.Net.getJSON=function(t,e){var r={headers:{Accept:"application/json"},method:"GET",type:"json"},e=e||{},n=function(t){return t||0===t?encodeURIComponent(t):""},i=Object.keys(e).reduce(function(t,r){return t+n(r)+"="+n(e[r])+"&"},"?");return PB.Net.xhr(t+i,r)},PB.Net.post=function(t,e){var r={headers:{},method:"POST"};return PB.Net.xhr(t,r,e)},PB.Net.PBxhr=function(t,e,r){var n=PB.Net.xhr(t,e,r);return n.then(function(t){return t.FAIL?PB.throwDHTError(t.FAIL):"string"==typeof t&&'{"FAIL'==t.slice(0,6)?PB.throwDHTError((PB.parseJSON(t)||{}).FAIL):(PB.runHandlers("networkresponse",t),t)})},PB.Net.PBpost=function(t,e){var r={headers:{},method:"POST"};return PB.Net.PBxhr(t,r,e)},PB.Net.PBgetJSON=function(t,e){var r={headers:{Accept:"application/json"},method:"GET",type:"json"},e=e||{},n=function(t){return t||0===t?encodeURIComponent(t):""},i=Object.keys(e).reduce(function(t,r){return t+n(r)+"="+n(e[r])+"&"},"?");return PB.Net.PBxhr(t+i,r)},PB.Net.P2P={},PB.Net.P2P.peers={},PB.Net.P2P.init=function(){return PB.CONFIG.enableP2P?(PB.Net.P2P.Peer=new Peer({host:"162.219.162.56",port:9e3,path:"/",debug:1}),PB.Net.P2P.Peer.on("open",PB.Net.P2P.openPeerConnection),void PB.Net.P2P.Peer.on("connection",PB.Net.P2P.connection)):!1},PB.Net.P2P.reloadPeers=function(){return PB.Net.P2P.Peer.listAllPeers(PB.Net.P2P.handlePeers)},PB.Net.P2P.openPeerConnection=function(){return PB.Net.P2P.Peer.listAllPeers(PB.Net.P2P.handlePeers)},PB.Net.P2P.connection=function(t){return PB.Net.P2P.reloadPeers(),t.on("data",function(t){PB.Data.addShellsThenMakeAvailable(t)})},PB.Net.P2P.handlePeers=function(t){t.forEach(function(t){return PB.Net.P2P.peers[t]?!1:void(PB.Net.P2P.peers[t]=PB.Net.P2P.Peer.connect(t))})},PB.Net.P2P.sendPuffToPeers=function(t){for(var e in PB.Net.P2P.peers)PB.Net.P2P.peers[e].send(t)},PB.Data={},PB.Data.bonii={},PB.Data.shells=[],PB.Data.shellSort={},PB.Data.pendingPuffPromises={},PB.Data.profiles={},PB.Data.init=function(t){t.disablePublicPuffs||PB.Data.importShells(),PB.addBeforeSwitchIdentityHandler(PB.Data.removeAllPrivateShells)},PB.Data.addSigAsVertex=function(t){var e=PB.Data.graph.v(t).run();return e.length?!1:PB.Data.graph.addVertex({_id:t,name:t,type:"shell"})||!0},PB.Data.addShellAsVertex=function(t){var e=PB.Data.graph.v(t.sig).run();if(!e.length)return PB.Data.graph.addVertex({_id:t.sig,name:t.sig,shell:t,type:"shell"})||!0;var r=e[0];return r.shell?!1:r.shell=t},PB.Data.addShellUsernameAsVertex=function(t){var e=t.username,r=PB.Data.graph.v(e).run(),n=r[0];if(n){if(PB.Data.graph.v(t.sig).out("author").property("name").run()[0]==e)return!1}else n=PB.Data.graph.addVertex({_id:e,name:e,type:"username"});PB.Data.graph.addEdge({_out:t.sig,_in:t.username,_label:"author"})},PB.Data.graph=Dagoba.graph(),PB.Data.addToGraph=function(t){t.forEach(PB.Data.addShellAsVertex),t.forEach(PB.Data.addShellUsernameAsVertex),PB.runHandlers("relationship",t)},PB.Data.getAllMyShells=function(){var t=PB.Data.getPublicShells(),e=PB.Data.getCurrentDecryptedLetters();return t.concat(e)},PB.Data.getShells=function(){return PB.Data.shells},PB.Data.getPublicShells=function(){var t=PB.Data.getShells();return t.filter(function(t){return!t.keys})},PB.Data.getCachedShellBySig=function(t){return PB.Data.shellSort[t]},PB.Data.addBonus=function(t,e,r){var n=t.sig;PB.Data.bonii[n]||(PB.Data.bonii[n]={}),PB.Data.bonii[n][e]=r},PB.Data.getBonus=function(t,e){var r=t.sig,n=PB.Data.bonii[r];return n&&n[e]},PB.Data.addStar=function(t,e,r){var n={sig:t},i=PB.Data.getBonus(n,"starStats")||{score:0,from:{}};i.from[e]=r,i.score=PB.Data.scoreStars(Object.keys(i.from)),PB.Data.addBonus(n,"starStats",i)},PB.Data.removeStar=function(t,e){var r={sig:t},n=PB.Data.getBonus(r,"starStats")||{score:0,from:{}};delete n.from[e],n.score=PB.Data.scoreStars(Object.keys(n.from)),PB.Data.addBonus(r,"starStats",n)},PB.Data.scoreStars=function(){return 0},PB.Data.addShellsThenMakeAvailable=function(t){function e(t){return function(e){return!t(e)}}var r={counts:{}};return t=Array.isArray(t)?t:[t],r.counts.delivered=t.length,t=t.filter(PB.isValidShell),r.counts.valid=t.length,r.meta=PB.Data.handleMetaPuffs(t),t=t.filter(e(PB.Data.isMetaPuff)),r.counts.nonmeta=t.length,r.private_promise=PB.Data.handlePrivatePuffs(t),t=t.filter(e(PB.Data.isPrivatePuff)),r.counts.public=t.length,t=PB.Data.handleAndFilterExistingShells(t),r.counts.new_public=r.counts.public-t.length,PB.Data.handleNewPublicShells(t),t=PB.Data.handleAndFilterByGC(t),r.counts.gc=r.counts.new_public-t.length,r.public_puff_sigs=t.map(PB.prop("sig")),PB.runHandlers("newPuffs",t),PB.runHandlers("newPuffReport",r),r},PB.Data.handleMetaPuffs=function(t){var e=t.filter(PB.Data.isMetaPuff);return e.forEach(function(t){var e=t.payload.content;PB.Data.addStar(e,t.username,t.sig)}),{stars:e.length}},PB.Data.isMetaPuff=function(t){return"star"==t.payload.type},PB.Data.handlePrivatePuffs=function(t){var e=t.filter(PB.Data.isPrivatePuff);return PB.Data.ingestEncryptedShells(e)},PB.Data.isPrivatePuff=function(t){return"encryptedpuff"==t.payload.type},PB.Data.handleAndFilterExistingShells=function(t){return t.filter(function(t){var e=PB.Data.getCachedShellBySig(t.sig);return e?e.payload.content?!1:void 0===t.payload.content?!1:(e.payload.content=t.payload.content,!0):void 0})},PB.Data.handleNewPublicShells=function(t){t.forEach(function(t){PB.Data.shells.push(t),PB.Data.shellSort[t.sig]=t}),PB.Data.addToGraph(t),PB.Data.rateSomePuffs(t),PB.Data.persistShells()},PB.Data.handleAndFilterByGC=function(t){var e=PB.Data.garbageCompactor();return e?t.map(PB.prop("sig")).map(PB.Data.getCachedShellBySig).filter(Boolean):t},PB.Data.persistShells=function(t){return PB.CONFIG.noLocalStorage?!1:(t||(t=function(){return PB.Data.getShellsForLocalStorage()}),void PB.Persist.save("shells",t))},PB.Data.getConversationPuffs=function(t,e,r){e=e||0,r=r||PB.CONFIG.pageBatchSize||10;var n;return n=PB.Net.getConversationPuffs(t,r,e),n=n.then(PB.Data.addShellsThenMakeAvailable)},PB.Data.getConversationPuffs=PB.promiseMemoize(PB.Data.getConversationPuffs,function(t,e){e.private_promise.then(function(){PB.removePromisePending(t)})}),PB.Data.importShells=function(){PB.Data.importLocalShells(),PB.Data.importRemoteShells()},PB.Data.importLocalShells=function(){var t=PB.Persist.get("shells")||[];PB.Data.addShellsThenMakeAvailable(t)},PB.Data.importAllStars=function(){var t=PB.Net.getStarShells();t.then(PB.Data.addShellsThenMakeAvailable)},PB.Data.horridStash={},PB.Data.isBadEnvelope=function(t){return PB.Data.horridStash[t]},PB.Data.addBadEnvelope=function(t){PB.Data.horridStash[t]=!0},PB.Data.currentDecryptedLetters=[],PB.Data.currentDecryptedLetterMap={},PB.Data.getCurrentDecryptedLetters=function(){return PB.Data.currentDecryptedLetters},PB.Data.getDecryptedLetterBySig=function(t){return PB.Data.currentDecryptedLetterMap[t]?PB.Data.currentDecryptedLetterMap[t]:void 0},PB.Data.addDecryptedLetter=function(t,e){var r=PB.Data.getDecryptedLetterBySig(e.sig);return r?!1:"identity"==t.payload.type?!1:(PB.Data.currentDecryptedLetters.push(t),PB.Data.currentDecryptedLetterMap[e.sig]=t,PB.Data.currentDecryptedLetterMap[t.sig]=t,PB.Data.addBonus(t,"envelope",e),PB.Data.addToGraph([t]),!0)},PB.Data.removeAllPrivateShells=function(){PB.Data.currentDecryptedLetters.forEach(function(t){PB.Data.removeShellFromCache(t.sig)}),PB.Data.currentDecryptedLetterMap={},PB.Data.currentDecryptedLetters=[]},PB.Data.encryptPuff=function(t,e,r,n){var i=PB.Crypto.getRandomKey(),o=PB.Crypto.encryptWithAES(JSON.stringify(t),i),s=t.username;n&&(e=n.default,s=PB.Users.makeVersioned(n.username,n.capa));var a=PB.Data.packagePuffStructure(s,t.routes,"encryptedpuff",o,{},t.previous);return a.keys=PB.Crypto.createKeyPairs(i,e,r),a.sig=PB.Crypto.signPuff(a,e),a},PB.Data.extractLetterFromEnvelope=function(t){if(PB.Data.isBadEnvelope(t.sig))return Promise.reject("Bad envelope");var e=PB.Data.getDecryptedLetterBySig(t.sig);if(e)return Promise.resolve(e);var r=PB.Data.getDecryptedPuffPromise(t);return r.catch(function(){return!1}).then(function(e){return e?e:(PB.Data.addBadEnvelope(t.sig),PB.throwError("Invalid envelope"))})},PB.Data.getDecryptedPuffPromise=function(t){if(!t||!t.keys)return PB.emptyPromise("Envelope does not contain an encrypted letter");var e=t.username,r=PB.Users.getUserRecordPromise(e),n=r.catch(PB.catchError("User record acquisition failed")).then(function(e){var r;return PB.useSecureInfo(function(n,i){var o=n[i],s=o.aliases,a="";t:for(var u in t.keys)for(var c=0;c<s.length;c++){var f=s[c];if(f.username==u){a=f.username;break t}var h=PB.Users.makeVersioned(f.username,f.capa);if(h==u){a=h;break t}}if(!a)return PB.throwError("No key found for current user");var l=f.privateDefaultKey,p=e.defaultKey;r=PB.Data.decryptPuffAlmostForReals(t,p,a,l)}),r});return n},PB.Data.decryptPuffAlmostForReals=function(t,e,r,n){return new Promise(function(i,o){return PB.cryptoworker?PB.workersend("decryptPuffForReals",[t,e,r,n],i,o):i(PB.decryptPuffForReals(t,e,r,n))})},PB.Data.packagePuffStructure=function(t,e,r,n,i,o){i=i||{},i.content=n,i.type=r,e=e||[],o=o||!1;var s={username:t,routes:e,previous:o,version:"0.1.0",payload:i};return s},PB.Data.getMorePrivatePuffs=function(t,e,r){t||(t=PB.getCurrentUsername()),e=e||0,r=r||PB.CONFIG.pageBatchSize||10;var n;return n=PB.Net.getMyPrivatePuffs(PB.getCurrentUsername(),r,e),n=n.then(PB.Data.addShellsThenMakeAvailable)},PB.Data.updatePrivateShells=function(t){var e=PB.getCurrentUsername(),r=1,n="full";t=t||0,PB.Net.getMyPrivatePuffs(e,r,t,n).then(function(e){var r=e[0];if(!r)return!1;var n=PB.Data.ingestAnEncryptedShell(r);n.then(function(e){e&&PB.Data.updatePrivateShells(1+t)})})},PB.Data.ingestEncryptedShells=function(t){var e=t.map(PB.Data.ingestAnEncryptedShell);return new Promise(function(t){function r(){i.bad++,--n||t(i)}var n=e.length,i={good:0,bad:0,goodsigs:[]};e.forEach(function(e){e.then(function(e){return e?(i.good++,i.goodsigs.push(e.sig),void(--n||t(i))):r()},r)})})},PB.Data.ingestAnEncryptedShell=function(t){var e=PB.Data.extractLetterFromEnvelope(t);return e=e.then(function(e){if(!e)return!1;var r=PB.Data.addDecryptedLetter(e,t);return r?(PB.runHandlers("newPuffs",[e]),e):!1})},PB.Data.slotLocker={},PB.Data.importRemoteShells=function(){function t(s){if(s){var a=PB.Data.addShellsThenMakeAvailable(s);a!=n&&(i=!1)}if(e>r&&(i=!1),!i)return PB.Data.slotLocker[o]=1,!1;var u=PB.Net.getSomeShells({},{},n,e);u.then(t),e+=n}var e=0,r=PB.CONFIG.initLoadGiveup,n=PB.CONFIG.initLoadBatchSize,i=!0,o='[{"sort":"DESC"},{"tags":[],"types":[],"users":[],"routes":[]}]';PB.Data.slotLocker[o]=-1,t()},PB.Data.fillSomeSlotsPlease=function(t,e,r,n){if(e>=t)return!1;var i=[r,n],o=JSON.stringify(i),s=PB.Data.slotLocker[o]||0;if(0>s)return!1;PB.Data.slotLocker[o]=-1;var a=t,u=PB.Net.getSomeShells(r,n,a,r.offset);return u.then(PB.Data.addShellsThenMakeAvailable).then(function(t){PB.Data.slotLocker[o]=t?1:-1}),!0},PB.Data.getPuffFromShell=function(t){return t?t.payload&&void 0!==t.payload.content?t:PB.Data.getPuffBySig(t.sig):!1},PB.Data.getPuffBySig=function(t){function e(e){if(!e.length){var r={sig:t};if(!PB.Data.getBonus(r,"envelope"))return PB.Data.removeShellFromCache(t),PB.onError("Content can not be found for shell '"+t+"'")}return e}var r=PB.Data.getCachedShellBySig(t);return r&&r.payload&&"undefined"!=typeof r.payload.content?r:PB.Data.pendingPuffPromises[t]?!1:(PB.Data.pendingPuffPromises[t]=PB.Net.getPuffBySig(t),PB.Data.pendingPuffPromises[t].then(e).then(PB.Data.addShellsThenMakeAvailable).then(function(){setTimeout(function(){delete PB.Data.pendingPuffPromises[t]},1e4)}),!1)},PB.Data.removeShellFromCache=function(t){var e=PB.Data.getCachedShellBySig(t);PB.Data.shells.splice(PB.Data.shells.indexOf(e),1),delete PB.Data.shellSort[t],delete PB.Data.bonii[t],PB.Data.purgeShellFromGraph(t),PB.Data.removeCachedPuffScore(e)},PB.Data.purgeShellFromGraph=function(t){var e=PB.Data.graph.v(t).run()[0];e&&(e.type="purged",e.shell=void 0)},PB.Data.getMyPuffChain=function(t){var e=PB.Data.getShells();return e.filter(function(e){return e&&e.username==t})},PB.Data.runningSizeTally=0,PB.Data.scoreSort={},PB.Data.heuristics=[],PB.Data.addHeuristics=function(t){PB.Data.heuristics.push(t)},PB.Data.addHeuristics(function(t){return 100*parseFloat((PB.Data.getBonus(t,"starStats")||{}).score||0)}),PB.Data.rateMyPuff=function(t){var e=PB.Data.heuristics.map(function(e){return e(t)}),r=e.reduce(function(t,e){return t+(e||0)},0);return r},PB.Data.rateSomePuffs=function(t){t.forEach(function(t){var e=PB.Data.rateMyPuff(t);PB.Data.doStuffWithScore(t,e),PB.Data.doStuffWithPuff(t)})},PB.Data.doStuffWithScore=function(t,e){PB.Data.removeCachedPuffScore(t),PB.Data.addBonus(t,"rating",e),PB.Data.cachePuffScore(t,e)},PB.Data.doStuffWithPuff=function(t){var e=JSON.stringify(t).length;PB.Data.addBonus(t,"size",e),PB.Data.runningSizeTally+=e||0},PB.Data.cachePuffScore=function(t,e){var r=PB.Data.convertScoreToKey(e);PB.Data.scoreSort[r]=PB.Data.scoreSort[r]||[],PB.Data.scoreSort[r].push(t)},PB.Data.removeCachedPuffScore=function(t){if(!t)return!1;var e=PB.Data.getBonus(t,"score"),r=PB.Data.convertScoreToKey(e),n=PB.Data.scoreSort[r];if(!n)return!1;if(!n.length)return!1;for(var i=n.length-1;i>=0;i--)if(n[i].sig==t.sig){n.splice(i,1);var o=PB.Data.getBonus(t,"size");return PB.Data.runningSizeTally-=o||0,!1}},PB.Data.getCachedPuffs=function(t,e){for(var r=[],n=Object.keys(PB.Data.scoreSort).map(parseFloat).sort(),i=0;i<n.length;i++){var o=n[i],s=PB.Data.scoreSort[o];s.reduce(function(n,i){return n>t==!!e&&r.push(i),n+1},0)}return r},PB.Data.convertScoreToKey=function(t){return Math.floor(t/10)||0},PB.Data.getTopPuffs=function(t){return PB.Data.getCachedPuffs(t)},PB.Data.getNotTopPuffs=function(t){return PB.Data.getCachedPuffs(t,"bottom")},PB.Data.garbageCompactor=function(){var t=PB.CONFIG.inMemoryShellLimit,e=PB.CONFIG.inMemoryMemoryLimit,r=PB.CONFIG.shellContentThreshold,n=!1;if(PB.Data.shells.length>t&&(n=!0,PB.Data.shells.slice(t).map(PB.prop("sig")).forEach(PB.Data.removeShellFromCache)),PB.Data.runningSizeTally>e){n=!0;for(var i=PB.Data.shells.length-1;i>=0;i--){var o=PB.Data.shells[i],s=(o.payload.content||"").toString().length;if(s>r&&(delete o.payload.content,total-=s+13,e>=total))break}}return n},PB.Data.getShellsForLocalStorage=function(){var t=PB.CONFIG.localStorageShellLimit,e=PB.CONFIG.localStorageMemoryLimit,r=PB.CONFIG.shellContentThreshold,n=PB.Data.getTopPuffs(t),i=n.reduce(function(t,e){return t+(PB.Data.getBonus(e,"size")||0)},0);if(e>=i)return n;for(var o=n.length-1;o>=0;o--){var s=n[o],a=(s.payload.content||"").toString().length;if(a>r){var u=PB.Data.compactPuff(s);if(n[o]=u,i-=a+13,e>=i)break}}if(e>=i)return n;for(var o=n.length-1;o>=0;o--){var a=JSON.stringify(s).length;if(i-=a,e>=i)break}return n=n.slice(0,Math.max(o,1))},PB.Data.compactPuff=function(t){var e=Boron.extend(t),r={};for(var n in t.payload)"content"!=n&&(r[n]=t.payload[n]);return e.payload=r,e},PB.Users={},PB.Users.records={},PB.Users.promises={},PB.Users.init=function(){PB.Users.depersist()},PB.Users.process=function(t){return(t=PB.Users.build(t.username,t.defaultKey,t.adminKey,t.rootKey,t.latest,t.created,t.updated,t.profile,t.identity,t.capa))?(PB.Users.cache(t),t):PB.onError("That is not an acceptable user record",t)},PB.Users.getCachedUserRecord=function(t){return PB.Users.makeVersioned(t)==t?PB.Users.records[t]:PB.Users.findFreshest(t)},PB.Users.getUserRecordPromise=function(t,e){var r=PB.Users.makeVersioned(t,e),n=PB.Users.getCachedUserRecord(r);if(n)return Promise.resolve(n);var i=PB.Users.promises[r];return i?i:PB.Users.getUserRecordNoCache(r)},PB.Users.getUserRecordNoCache=function(t,e){e=e||0;var r=PB.Net.getUserRecord(t,e);r=r.then(function(t){var t=PB.Users.process(t);return t||PB.throwError("Invalid user record returned"),t},PB.catchError("Unable to access user information from the DHT"));var n=PB.Users.makeVersioned(t,e);return PB.Users.promises[n]=r,r},PB.Users.doesUserExist=function(t){return PB.Net.getUserRecord(t).then(function(t){if(!t||t.FAIL)throw"User does not exist";return!0},PB.catchError("Unable to access user information from the DHT"))},PB.Users.userRecordToVersionedUsername=function(t){return PB.Users.makeVersioned(t.username,t.capa)},PB.Users.justUsername=function(t){var e=PB.Users.breakVersionedUsername(t);return e.username},PB.Users.justCapa=function(t){var e=PB.Users.breakVersionedUsername(t);return e.capa},PB.Users.makeVersioned=function(t,e){function r(t,e){return e=e||1,t+":"+e}return t&&t.indexOf?e?r(t,e):t.indexOf(":")>0?t:r(t):""},PB.Users.breakVersionedUsername=function(t){var e=(t||"").split(":");return{username:e[0],capa:e[1]||1}},PB.Users.build=function(t,e,r,n,i,o,s,a,u,c){return i=i||"",s=s||"",a=a||"",u=u||"",c=c||1,PB.validateUsername(t)?{username:t,capa:c,rootKey:n,adminKey:r,defaultKey:e,created:o,latest:i,updated:s,profile:a,identity:u}:!1},PB.Users.usernamesToUserRecordsPromise=function(t){if(!t||!t.length)return Promise.resolve([]);Array.isArray(t)||(t=[t]);var e=t.map(PB.Users.getCachedUserRecord).filter(Boolean);if(e.length==t.length)return Promise.resolve(e);var r=Promise.resolve(),n=e.map(function(t){return t.username});return t.forEach(function(t){~n.indexOf(t)||(r=r.then(function(){return PB.Users.getUserRecordNoCache(t).then(function(t){e.push(t)})}))}),r.then(function(){return e})},PB.Users.cache=function(t){var e=PB.Users.userRecordToVersionedUsername(t);return PB.Users.records[e]=t,delete PB.Users.promises[e],PB.Persist.save("userRecords",PB.Users.records),t},PB.Users.depersist=function(){PB.Users.records=PB.Persist.get("userRecords")||{}},PB.Users.findFreshest=function(t){t=PB.Users.justUsername(t);var e=Object.keys(PB.Users.records),r=0;e.filter(function(e){return PB.Users.justUsername(e)==t}).forEach(function(t){var e=+PB.Users.justCapa(t);e>r&&(r=e)});var n=PB.Users.makeVersioned(t,r);return PB.Users.records[n]},PB.Users.getUpToDateUserAtAnyCost=function(){var t=PB.getCurrentUsername();if(t)return PB.Users.getUserRecordNoCache(t,0);var e=PB.Users.addNewAnonUser();return e.then(function(t){return PB.switchIdentityTo(t.username),console.log("Setting current user to "+t.username),t})},PB.Users.generateRandomUsername=function(t){t&&t==Math.round(t)||(t=10);for(var e="",r="abcdefghijklmnopqrstuvwxyz0123456789",n=0;10>n;n++)e+=PB.Crypto.getRandomItem(r);return e},PB.Users.addNewAnonUser=function(t){var e="anon."+PB.Users.generateRandomUsername(12);if(void 0!==typeof t&&t)var r=e+t,n=PB.Crypto.passphraseToPrivateKeyWif(r);else var n=PB.Crypto.generatePrivateKey();var i=PB.Crypto.privateToPublic(n),o=PB.Crypto.privateToPublic(n),s=PB.Crypto.privateToPublic(n),a={requestedUsername:e,defaultKey:s,adminKey:o,rootKey:i,time:Date.now()},u=[],c="requestUsername",f="updateUserRecord",h=PB.buildPuff("anon",PB.CONFIG.anonPrivateAdminKey,u,f,c,a);return PB.Net.updateUserRecord(h)},PB.Users.createAnonUserAndMakeCurrent=function(){var t="anon."+PB.Users.generateRandomUsername(12),e=PB.Crypto.generatePrivateKey().slice(-12),r=t+e,n=PB.Crypto.passphraseToPrivateKeyWif(r),i=PB.Crypto.privateToPublic(n),o={requestedUsername:t,defaultKey:i,adminKey:i,rootKey:i,time:Date.now()},s=[],a="requestUsername",u="updateUserRecord",c=PB.buildPuff("anon",PB.CONFIG.anonPrivateAdminKey,s,u,a,o),f=PB.Net.updateUserRecord(c);return f.then(function(t){PB.addAlias(t.username,t.username,1,n,n,n,{passphrase:e}),PB.switchIdentityTo(t.username)})},PB.Crypto={},PB.Crypto.generatePrivateKey=function(){var t=(new Bitcoin.ECKey).toWif();return PB.Crypto.wifToPriKey(t)?t:PB.Crypto.generatePrivateKey()},PB.Crypto.privateToPublic=function(t){if(!t)return PB.onError("That private key contained no data");try{return PB.Crypto.wifToPriKey(t).getPub(!0).toWif()}catch(e){return PB.onError("Invalid private key: could not convert to public key",[t,e])}},PB.Crypto.signPuff=function(t,e){var r=PB.Crypto.wifToPriKey(e),n=PB.Crypto.puffToSiglessString(t),i=PB.Crypto.createMessageHash(n);try{return Bitcoin.base58.encode(r.sign(i))}catch(o){return PB.onError("Could not properly encode signature",[r,i,o])}},PB.Crypto.verifyPuffSig=function(t,e){var r=PB.Crypto.puffToSiglessString(t);return PB.Crypto.verifyMessage(r,t.sig,e)},PB.Crypto.verifyMessage=function(t,e,r){try{var n=PB.Crypto.wifToPubKey(r),i=Bitcoin.base58.decode(e).toJSON();i=i.data||i;var o=PB.Crypto.createMessageHash(t);return n.verify(o,i)}catch(s){return PB.onError("Invalid key or sig: could not verify message",[o,e,r,s])}},PB.Crypto.createMessageHash=function(t){return Bitcoin.Crypto.SHA256(t).toString()},PB.Crypto.wifToPriKey=function(t){if(!t)return PB.onError("That private key wif contains no data");try{return new Bitcoin.ECKey(t,!0)}catch(e){return PB.onError("Invalid private key: are you sure it is properly WIFfed?",[t,e])}},PB.Crypto.wifToPubKey=function(t){if(!t)return PB.onError("That public key wif contains no data");try{var e=Bitcoin.base58check.decode(t).payload.toJSON();return e=e.data||e,new Bitcoin.ECPubKey(e,!0)}catch(r){return PB.onError("Invalid public key: are you sure it is properly WIFfed?",[t,r])}},PB.Crypto.puffToSiglessString=function(t){return JSON.stringify(t,function(t,e){return"sig"==t?void 0:e})},PB.Crypto.passphraseToPrivateKeyWif=function(t){var e=Bitcoin.Crypto.SHA256(t).toString();return hash=Bitcoin.convert.hexToBytes(e),Bitcoin.ECKey(hash).toWif()},PB.Crypto.encryptWithAES=function(t,e){var r=Bitcoin.Crypto.AES.encrypt(t,e);return Bitcoin.Crypto.format.OpenSSL.stringify(r)},PB.Crypto.decryptWithAES=function(t,e){if(!e||!t)return!1;var r=Bitcoin.Crypto.format.OpenSSL.parse(t),n=Bitcoin.Crypto.AES.decrypt(r,e),i=Bitcoin.convert.wordsToBytes(n.words),o=/[\u0000-\u0010]+$/g;return i.map(function(t){return String.fromCharCode(t)}).join("").replace(o,"")},PB.Crypto.getOurSharedSecret=function(t,e){var r=PB.Crypto.wifToPubKey(t),n=PB.Crypto.wifToPriKey(e);if(!r||!n)return!1;var i=r.multiply(n).toWif(),o=Bitcoin.Crypto.SHA256(i).toString();return o},PB.Crypto.encryptPrivateMessage=function(t,e,r){var n=PB.Crypto.getOurSharedSecret(e,r);if(!n)return!1;
var i=PB.Crypto.encryptWithAES(t,n);return i},PB.Crypto.decryptPrivateMessage=function(t,e,r){var n=PB.Crypto.getOurSharedSecret(e,r);if(!n||!t)return!1;var i=PB.Crypto.decryptWithAES(t,n);return i},PB.Crypto.random=function(){var t=PB.Crypto.getRandomValues(2,32),e=t[0]*Math.pow(2,20)+(t[1]>>12),r=e*Math.pow(2,-52);return r},PB.Crypto.getRandomInteger=function(t,e){e=Math.floor(e||0),t=Math.floor(t||2147483647);var r=t-e,n=PB.Crypto.random();return Math.floor(n*r+e)},PB.Crypto.getRandomItem=function(t){var e=PB.Crypto.getRandomInteger(t.length);return t[e]},PB.Crypto.getRandomKey=function(t){t=t||32;var e=PB.Crypto.getRandomValues(t,8);return Bitcoin.convert.bytesToBase64(e)},PB.Crypto.getRandomValues=function(t,e){if(window.crypto&&window.crypto.getRandomValues){var r;return r=32==e?new Uint32Array(e):new Uint8Array(e),window.crypto.getRandomValues(r)}return PB.Crypto.getRandomValuesShim(t,e)},PB.Crypto.getRandomValuesShim=function(t,e){for(var r,n=[],i=function(t){var t=t,e=987654321,r=4294967295;return function(){e=36969*(65535&e)+(e>>16)&r,t=18e3*(65535&t)+(t>>16)&r;var n=(e<<16)+t&r;return n/=4294967296,n+=.5,n*(Math.random()>.5?1:-1)}},o=0;t>o;o+=4){var s=i(4294967296*(r||Math.random()));if(r=987654071*s(),32==e)n.push(Math.abs(4294967296*s()|0));else{var a=4294967296*s()|0;n.push(Math.abs(4278190080&a)>>24),n.push(Math.abs(16711680&a)>>16),n.push(Math.abs(65280&a)>>8),n.push(Math.abs(255&a))}}return n},PB.Crypto.createKeyPairs=function(t,e,r){return Array.isArray(r)?r.reduce(function(r,n){var i=PB.Users.userRecordToVersionedUsername(n);return r[i]=PB.Crypto.encryptPrivateMessage(t,n.defaultKey,e),r},{}):PB.throwError("Invalid userRecords")},PB.Persist={},PB.Persist.todo={},PB.Persist.todoflag=!1,PB.Persist.save=function(t,e){null==e&&(e=!1),PB.Persist.todo[t]=e,PB.Persist.todoflag||onceInAwhile(function(){for(var t in PB.Persist.todo){var e="PUFF::"+t,r=PB.Persist.todo[t];"function"==typeof r&&(r=r());var n=JSON.stringify(r);localStorage.setItem(e,n)}PB.Persist.todo={},PB.Persist.todoflag=!1},100),PB.Persist.todoflag=!0},PB.Persist.get=function(t){var e="PUFF::"+t,r=localStorage.getItem(e);return r?PB.parseJSON(r):!1},PB.Persist.remove=function(t){var e="PUFF::"+t;localStorage.removeItem(e)},PB.Spec={},PB.Spec.isValidUsername=function(t){return PB.Spec.isValidUsername.rulesStatement="Usernames can only contain lowercase letters, numbers, and periods. They cannot be longer than 255 characters, or begin or end with a period.",t?t.length>255?!1:t.match(/^[a-z0-9.]+$/)?"."==t.slice(0,1)?!1:"."==t.slice(-1)?!1:!0:!1:!1},PB.Spec.sanitizeUsername=function(t){return t=t.trim(),t=t.toLowerCase(),"."==t.slice(0,1)&&(t=t.slice(1)),"."==t.slice(-1)&&(t=t.slice(0,-1)),t=t.replace(/[^a-z0-9.]+/g,"")},PB.Spec.isValidPublicKey=function(t){return isset(t)?!0:!1},PB.Spec.isValidPrivateKey=function(t){return isset(t)?!0:!1},PB.Spec.isValidCapa=function(t){PB.Spec.isValidCapa.rulesStatement="capa must be a natural number.",t=t.toString();var e=Math.abs(n),r=parseInt(n,10);return 1>r?!1:!isNaN(e)&&r===e&&e.toString()===n},PB.M.Forum={},PB.M.Forum.contentTypes={},PB.M.Forum.init=function(){PB.addRelationshipHandler(PB.M.Forum.addFamilialEdges),PB.addBeforeSwitchIdentityHandler(PB.M.Forum.clearPuffContentStash),PB.addPayloadModifierHandler(PB.M.Forum.addTimestamp)},PB.M.Forum.addTimestamp=function(t){return t=t||{},t.time=Date.now(),t},PB.M.Forum.filterByFilters=function(t){return t?function(e){if(t.routes&&t.routes.length>0){for(var r=!1,n=0;n<t.routes.length;n++)e.routes.indexOf(t.routes[n])>-1&&(r=!0);if(!r)return!1}if(t.tags&&t.tags.length>0){if(!e.payload.tags||!e.payload.tags.length)return!1;for(var i=!1,n=0;n<t.tags.length;n++)e.payload.tags.indexOf(t.tags[n])>-1&&(i=!0);if(!i)return!1}if(t.types&&t.types.length>0&&!~t.types.indexOf(e.payload.type))return!1;if(t.users&&t.users.length>0&&!~t.users.indexOf(PB.Users.justUsername(e.username)))return!1;if(t.roots&&(e.payload.parents||[]).length)return!1;if(t.ancestors&&t.focus){var o=PB.getPuffBySig(t.focus);if(o.payload&&!~o.payload.parents.indexOf(e.sig))return!1}return t.descendants&&t.focus&&!~e.payload.parents.indexOf(t.focus)?!1:t.type&&t.type.length&&!~t.type.indexOf(e.payload.type)?!1:!0}:function(){return!0}},PB.M.Forum.sortByPayload=function(t,e){return"DESC"==puffworldprops.view.query.sort?e.payload.time-t.payload.time:t.payload.time-e.payload.time},PB.M.Forum.getParentCount=function(t){if(!t)return 0;var e=t.sig||t;return PB.Data.graph.v(e).out("parent").run().length},PB.M.Forum.getChildCount=function(t){if(!t)return 0;var e=t.sig||t;return PB.Data.graph.v(e).out("child").run().length},PB.M.Forum.getPuffList=function(t,e,r){r=r||1/0;var n=+t.offset||0,i=PB.Data.getAllMyShells(),o=i.filter(PB.M.Forum.filterByFilters(Boron.extend({},t,e))).sort(PB.M.Forum.sortByPayload),s=o.slice(n,n+r),a=s.map(PB.Data.getPuffFromShell).filter(Boolean),u=s.length;return u>=r?a:(PB.Data.fillSomeSlotsPlease(r,u,t,e),a)},PB.M.Forum.addPost=function(t,e,r,n,i,o){if(r||(r=[]),Array.isArray(r)||(r=[r]),r.map(PB.getPuffBySig).filter(function(t){return null!=t}).length!=r.length)return PB.emptyPromise("Those are not good parents");r=PB.uniquify(r);var s=r.map(function(t){return PB.getPuffBySig(t).username});n.routes&&(s=n.routes,delete n.routes),s=PB.uniquify(s);var a=PB.M.Forum.partiallyApplyPuffMaker(t,e,r,n,s,i,o),u=PB.Users.getUpToDateUserAtAnyCost(),c=u.catch(PB.catchError("Failed to add post: could not access or create a valid user")).then(a).catch(PB.catchError("Posting failed"));return c},PB.M.Forum.partiallyApplyPuffMaker=function(t,e,r,n,i,o,s){var a=n||{};a.parents=a.parents||r,a.time=n.time||Date.now(),a.tags=n.tags||[];var t=t||"text",i=i?i:[];return i=i.concat(PB.CONFIG.zone),function(r){var n=(r.latest,PB.simpleBuildPuff(t,e,a,i,o,s));return PB.addPuffToSystem(n)}},PB.M.Forum.addFamilialEdges=function(t){t.forEach(PB.M.Forum.addFamilialEdgesForShell)},PB.M.Forum.addFamilialEdgesForShell=function(t){var e=PB.M.Forum.addFamilialEdgesForParent(t);(t.payload.parents||[]).forEach(e)},PB.M.Forum.addFamilialEdgesForParent=function(t){var e=PB.Data.graph.v(t.sig).out("parent").property("shell").run().map(PB.prop("sig"));return function(r){return~e.indexOf(r)?!1:(PB.Data.addSigAsVertex(r),PB.Data.graph.addEdge({_label:"parent",_in:r,_out:t.sig}),void PB.Data.graph.addEdge({_label:"child",_out:r,_in:t.sig}))}},PB.M.Forum.processContent=function(t,e,r){var n=PB.M.Forum.contentTypes[t];return n||(n=PB.M.Forum.contentTypes.text),n.toHtml(e,r)},PB.M.Forum.puffContentStash={},PB.M.Forum.clearPuffContentStash=function(){PB.M.Forum.puffContentStash={}},PB.M.Forum.getProcessedPuffContent=function(t){if(PB.M.Forum.puffContentStash[t.sig])return PB.M.Forum.puffContentStash[t.sig];var e=PB.M.Forum.processContent(t.payload.type,t.payload.content,t);return PB.M.Forum.puffContentStash[t.sig]=e,e},PB.M.Forum.addContentType=function(t,e){return t?PB.CONFIG.supportedContentTypes&&-1==PB.CONFIG.supportedContentTypes.indexOf(t)?PB.onError("Unsupported content type: "+t):e.toHtml?void(PB.M.Forum.contentTypes[t]=e):PB.onError("Invalid content type: object is missing toHtml method",t):PB.onError("Invalid content type name")},PB.M.Forum.addContentType("text",{toHtml:function(t){var e=XBBCODE.process({text:t});return e.html=e.html.replace(/\n/g,"</br>"),"<span>"+e.html+"</span>"}}),PB.M.Forum.addContentType("bbcode",{toHtml:function(t){var e=XBBCODE.process({text:t}),r=e.html.replace(/\n/g,"<br />");return r}}),PB.M.Forum.addContentType("image",{toHtml:function(t){return"tableView"==puffworldprops.view.mode?"<img src="+t+" />":'<img class="imgInBox" src='+t+" />"}}),PB.M.Forum.addContentType("markdown",{toHtml:function(t){var e=new Markdown.Converter;return"<span>"+e.makeHtml(t)+"</span>"}}),PB.M.Forum.addContentType("PGN",{toHtml:function(t){return chessBoard(t)}}),PB.M.Forum.addContentType("identity",{toHtml:function(){return""}}),PB.M.Forum.addContentType("profile",{toHtml:function(t){return"tableView"==puffworldprops.view.mode?"<img src="+t+" />":'<img class="imgInBox" src='+t+" />"}}),PB.M.Forum.addContentType("file",{toHtml:function(t,e){return e.payload.filename}}),PB.M.Forum.flagPuff=function(t){var e={},r=[],n="flagPuff",i=t;e.time=Date.now(),PB.useSecureInfo(function(t,o,s,a){if(!o)return alert("You must first set your username before you can flag content"),!1;if(!a)return alert("You must first set your private admin key before you can flag content"),!1;PB.buildPuff(o,a,r,n,i,e)});var o={type:"flagPuff",puff:puff},s=PB.Net.PBpost(PB.CONFIG.puffApi,o);return s=s.then(function(t){var e=PB.Persist.get("flagged")||[];return e.push(i),PB.Persist.save("flagged",e),Events.pub("ui/flag",{}),t})},PB.M.Forum.metaFields=[],PB.M.Forum.context={},PB.M.Forum.addMetaFields=function(t,e,r){if(!t.name)return console.log("Invalid meta field name.");if(!t.type)return console.log("Invalid meta field type.");if(t.validator&&"function"==typeof t.validator||(t.validator=!1),e=e||Object.keys(PB.M.Forum.contentTypes),"string"==typeof e)e=[e];else if(!Array.isArray(e))return PB.onError("Invalid context.");if(r=r||[],"string"==typeof r)r=[r];else if(!Array.isArray(r))return PB.onError("Invalid context.");PB.M.Forum.metaFields.push(t);for(var n=0;n<e.length;n++)if(-1==r.indexOf(e[n])){var i=PB.M.Forum.context[e[n]]||[];i.push(t.name),PB.M.Forum.context[e[n]]=i}},PB.M.Forum.addMetaFields({name:"reply privacy",type:"pulldown","enum":["","public","private","anonymous","invisible"],defaultValue:""}),PB.M.Forum.addMetaFields({name:"content license",type:"pulldown","enum":["","CreativeCommonsAttribution","GNUPublicLicense","Publicdomain","Rights-managed","Royalty-free"],defaultValue:""}),PB.M.Forum.addMetaFields({name:"tags",type:"array",validator:function(t){return/^[a-z0-9]+$/i.test(t)}},!1,"profile"),PB.M.Forum.addMetaFields({name:"language",type:"text",defaultValue:function(){return puffworldprops.view.language}}),PB.M.Forum.addMetaFields({name:"name",type:"text"},"profile"),PB.M.Wardrobe={},~function(){function t(){PB.implementSecureInterface(c,f,h,l,p,d,g),PB.addIdentityUpdateHandler(function(){PB.CONFIG.disableCloudIdentity||PB.storeIdentityFileInCloud()});var t=PB.CONFIG.disableCloudIdentity;PB.CONFIG.disableCloudIdentity=!0;var e=PB.Persist.get("identities")||{};Object.keys(e).forEach(function(t){var r=e[t];f(t,r.aliases,r.preferences,!0)}),PB.CONFIG.disableCloudIdentity=t;var r=PB.Persist.get("currentUsername");r&&PB.switchIdentityTo(r)}function e(t,e){for(var r=0,n=!1,i=0,o=t.aliases.length;o>i;i++){var s=t.aliases[i];s.username==e&&s.capa>r&&(n=s,r=s.capa)}return n}function r(t,e){for(var r=0,n=t.aliases.length;n>r;r++){var i=t.aliases[r];if(e.username==i.username&&e.capa==i.capa)return i}}function n(){PB.CONFIG.ephemeralKeychain||PB.Persist.save("identities",s),PB.Persist.save("currentUsername",u),PB.runHandlers("identityUpdate")}function i(){return o(u)}function o(t){if(!t)return!1;var e=s[t];return e?e:!1}var s={},a={},u=!1;PB.M.Wardrobe.init=t;var c=function(t){var e=i()||{},r=e.primary||{};return t(s,u,r.privateRootKey,r.privateAdminKey,r.privateDefaultKey),!0},f=function(t,e,r,i){var o={username:t,primary:{},aliases:[],preferences:r||{}};return s[t]=o,Array.isArray(e)||(e=e?[e]:[]),e.forEach(function(e){h(t,e.username,e.capa,e.privateRootKey,e.privateAdminKey,e.privateDefaultKey,e.secrets)}),i||n(),!0},h=function(t,e,i,s,u,c,h){var l={username:e,capa:i||1,privateRootKey:s||!1,privateAdminKey:u||!1,privateDefaultKey:c||!1,secrets:h||{}},p=o(t);p||(f(t),p=o(t));var d=r(p,l);if(d){l.secrets=Boron.extend(d.secrets,l.secrets);for(var g in l)l[g]&&(d[g]=l[g])}else p.aliases.push(l);return e==t&&l.capa>=(p.capa||0)&&(p.primary=l),a[e]=p,n(),!0},l=function(t,r){var n=o(t);if(!n)return PB.onError("Primary alias can only be set for known identities");var i=e(n,r);return i?(n.username=r,n.primary=i,delete s[t],s[r]=n,t==u&&d(r),!0):PB.onError("That alias is not associated with that identity")},p=function(t,e){var r=i();return r?(r.preferences[t]=e,void n()):PB.onError("Preferences can only be set for an active identity")},d=function(t){if(t){var e=o(t);if(!e)return PB.onError('No identity found with username "'+t+'"')}return u=t||!1,PB.currentIdentityHash||(PB.currentIdentityHash=PB.Crypto.createMessageHash(JSON.stringify(PB.formatIdentityFile()))),n(),t&&e&&e.primary&&PB.Users.getUserRecordPromise(t,e.primary.capa),!0},g=function(t){var e=o(t);return e?(delete s[t],u==t&&(u=!1),void n()):PB.onError("Could not find that identity for removal")}}();